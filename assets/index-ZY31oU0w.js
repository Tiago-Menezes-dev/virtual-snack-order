var tS=t=>{throw TypeError(t)};var Vv=(t,e,n)=>e.has(t)||tS("Cannot "+n);var H=(t,e,n)=>(Vv(t,e,"read from private field"),n?n.call(t):e.get(t)),tt=(t,e,n)=>e.has(t)?tS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ne=(t,e,n,r)=>(Vv(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),En=(t,e,n)=>(Vv(t,e,"access private method"),n);var uf=(t,e,n,r)=>({set _(s){Ne(t,e,s,n)},get _(){return H(t,e,r)}});function fF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function WR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var HR={exports:{}},tg={},qR={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh=Symbol.for("react.element"),pF=Symbol.for("react.portal"),mF=Symbol.for("react.fragment"),gF=Symbol.for("react.strict_mode"),vF=Symbol.for("react.profiler"),yF=Symbol.for("react.provider"),_F=Symbol.for("react.context"),wF=Symbol.for("react.forward_ref"),EF=Symbol.for("react.suspense"),TF=Symbol.for("react.memo"),xF=Symbol.for("react.lazy"),nS=Symbol.iterator;function SF(t){return t===null||typeof t!="object"?null:(t=nS&&t[nS]||t["@@iterator"],typeof t=="function"?t:null)}var KR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GR=Object.assign,QR={};function Lc(t,e,n){this.props=t,this.context=e,this.refs=QR,this.updater=n||KR}Lc.prototype.isReactComponent={};Lc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Lc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YR(){}YR.prototype=Lc.prototype;function n0(t,e,n){this.props=t,this.context=e,this.refs=QR,this.updater=n||KR}var r0=n0.prototype=new YR;r0.constructor=n0;GR(r0,Lc.prototype);r0.isPureReactComponent=!0;var rS=Array.isArray,ZR=Object.prototype.hasOwnProperty,s0={current:null},XR={key:!0,ref:!0,__self:!0,__source:!0};function JR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ZR.call(e,r)&&!XR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:yh,type:t,key:i,ref:o,props:s,_owner:s0.current}}function bF(t,e){return{$$typeof:yh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function i0(t){return typeof t=="object"&&t!==null&&t.$$typeof===yh}function CF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sS=/\/+/g;function Fv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CF(""+t.key):e.toString(36)}function Kf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yh:case pF:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Fv(o,0):r,rS(s)?(n="",t!=null&&(n=t.replace(sS,"$&/")+"/"),Kf(s,e,n,"",function(c){return c})):s!=null&&(i0(s)&&(s=bF(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sS,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",rS(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Fv(i,a);o+=Kf(i,e,n,l,s)}else if(l=SF(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Fv(i,a++),o+=Kf(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function df(t,e,n){if(t==null)return t;var r=[],s=0;return Kf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function IF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zn={current:null},Gf={transition:null},RF={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:Gf,ReactCurrentOwner:s0};function eA(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:df,forEach:function(t,e,n){df(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return df(t,function(){e++}),e},toArray:function(t){return df(t,function(e){return e})||[]},only:function(t){if(!i0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=Lc;ze.Fragment=mF;ze.Profiler=vF;ze.PureComponent=n0;ze.StrictMode=gF;ze.Suspense=EF;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RF;ze.act=eA;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=GR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=s0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ZR.call(e,l)&&!XR.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:yh,type:t.type,key:s,ref:i,props:r,_owner:o}};ze.createContext=function(t){return t={$$typeof:_F,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yF,_context:t},t.Consumer=t};ze.createElement=JR;ze.createFactory=function(t){var e=JR.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:wF,render:t}};ze.isValidElement=i0;ze.lazy=function(t){return{$$typeof:xF,_payload:{_status:-1,_result:t},_init:IF}};ze.memo=function(t,e){return{$$typeof:TF,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Gf.transition;Gf.transition={};try{t()}finally{Gf.transition=e}};ze.unstable_act=eA;ze.useCallback=function(t,e){return zn.current.useCallback(t,e)};ze.useContext=function(t){return zn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return zn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return zn.current.useEffect(t,e)};ze.useId=function(){return zn.current.useId()};ze.useImperativeHandle=function(t,e,n){return zn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return zn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return zn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return zn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return zn.current.useReducer(t,e,n)};ze.useRef=function(t){return zn.current.useRef(t)};ze.useState=function(t){return zn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return zn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return zn.current.useTransition()};ze.version="18.3.1";qR.exports=ze;var y=qR.exports;const W=WR(y),tA=fF({__proto__:null,default:W},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AF=y,kF=Symbol.for("react.element"),PF=Symbol.for("react.fragment"),NF=Object.prototype.hasOwnProperty,OF=AF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DF={key:!0,ref:!0,__self:!0,__source:!0};function nA(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)NF.call(e,r)&&!DF.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:kF,type:t,key:i,ref:o,props:s,_owner:OF.current}}tg.Fragment=PF;tg.jsx=nA;tg.jsxs=nA;HR.exports=tg;var p=HR.exports,rA={exports:{}},vr={},sA={exports:{}},iA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,B){var ee=U.length;U.push(B);e:for(;0<ee;){var pe=ee-1>>>1,le=U[pe];if(0<s(le,B))U[pe]=B,U[ee]=le,ee=pe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var B=U[0],ee=U.pop();if(ee!==B){U[0]=ee;e:for(var pe=0,le=U.length,he=le>>>1;pe<he;){var ye=2*(pe+1)-1,qe=U[ye],rt=ye+1,se=U[rt];if(0>s(qe,ee))rt<le&&0>s(se,qe)?(U[pe]=se,U[rt]=ee,pe=rt):(U[pe]=qe,U[ye]=ee,pe=ye);else if(rt<le&&0>s(se,ee))U[pe]=se,U[rt]=ee,pe=rt;else break e}}return B}function s(U,B){var ee=U.sortIndex-B.sortIndex;return ee!==0?ee:U.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,T=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=U)r(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function O(U){if(v=!1,S(U),!T)if(n(l)!==null)T=!0,K(D);else{var B=n(c);B!==null&&Q(O,B.startTime-U)}}function D(U,B){T=!1,v&&(v=!1,E(b),b=-1),m=!0;var ee=f;try{for(S(B),h=n(l);h!==null&&(!(h.expirationTime>B)||U&&!N());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,f=h.priorityLevel;var le=pe(h.expirationTime<=B);B=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(l)&&r(l),S(B)}else r(l);h=n(l)}if(h!==null)var he=!0;else{var ye=n(c);ye!==null&&Q(O,ye.startTime-B),he=!1}return he}finally{h=null,f=ee,m=!1}}var L=!1,I=null,b=-1,C=5,A=-1;function N(){return!(t.unstable_now()-A<C)}function k(){if(I!==null){var U=t.unstable_now();A=U;var B=!0;try{B=I(!0,U)}finally{B?R():(L=!1,I=null)}}else L=!1}var R;if(typeof _=="function")R=function(){_(k)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=k,R=function(){G.postMessage(null)}}else R=function(){x(k,0)};function K(U){I=U,L||(L=!0,R())}function Q(U,B){b=x(function(){U(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){T||m||(T=!0,K(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var ee=f;f=B;try{return U()}finally{f=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,B){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ee=f;f=U;try{return B()}finally{f=ee}},t.unstable_scheduleCallback=function(U,B,ee){var pe=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?pe+ee:pe):ee=pe,U){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ee+le,U={id:d++,callback:B,priorityLevel:U,startTime:ee,expirationTime:le,sortIndex:-1},ee>pe?(U.sortIndex=ee,e(c,U),n(l)===null&&U===n(c)&&(v?(E(b),b=-1):v=!0,Q(O,ee-pe))):(U.sortIndex=le,e(l,U),T||m||(T=!0,K(D))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var B=f;return function(){var ee=f;f=B;try{return U.apply(this,arguments)}finally{f=ee}}}})(iA);sA.exports=iA;var MF=sA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LF=y,gr=MF;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oA=new Set,dd={};function Ga(t,e){uc(t,e),uc(t+"Capture",e)}function uc(t,e){for(dd[t]=e,t=0;t<e.length;t++)oA.add(e[t])}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xy=Object.prototype.hasOwnProperty,VF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iS={},oS={};function FF(t){return Xy.call(oS,t)?!0:Xy.call(iS,t)?!1:VF.test(t)?oS[t]=!0:(iS[t]=!0,!1)}function jF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UF(t,e,n,r){if(e===null||typeof e>"u"||jF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mn[t]=new Wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mn[e]=new Wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mn[t]=new Wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mn[t]=new Wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mn[t]=new Wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mn[t]=new Wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mn[t]=new Wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mn[t]=new Wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mn[t]=new Wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var o0=/[\-:]([a-z])/g;function a0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(o0,a0);mn[e]=new Wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(o0,a0);mn[e]=new Wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(o0,a0);mn[e]=new Wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!1,!1)});mn.xlinkHref=new Wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!0,!0)});function l0(t,e,n,r){var s=mn.hasOwnProperty(e)?mn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UF(e,n,s,r)&&(n=null),r||s===null?FF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ai=LF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hf=Symbol.for("react.element"),xl=Symbol.for("react.portal"),Sl=Symbol.for("react.fragment"),c0=Symbol.for("react.strict_mode"),Jy=Symbol.for("react.profiler"),aA=Symbol.for("react.provider"),lA=Symbol.for("react.context"),u0=Symbol.for("react.forward_ref"),e_=Symbol.for("react.suspense"),t_=Symbol.for("react.suspense_list"),d0=Symbol.for("react.memo"),$i=Symbol.for("react.lazy"),cA=Symbol.for("react.offscreen"),aS=Symbol.iterator;function hu(t){return t===null||typeof t!="object"?null:(t=aS&&t[aS]||t["@@iterator"],typeof t=="function"?t:null)}var bt=Object.assign,jv;function Ru(t){if(jv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jv=e&&e[1]||""}return`
`+jv+t}var Uv=!1;function $v(t,e){if(!t||Uv)return"";Uv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Uv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ru(t):""}function $F(t){switch(t.tag){case 5:return Ru(t.type);case 16:return Ru("Lazy");case 13:return Ru("Suspense");case 19:return Ru("SuspenseList");case 0:case 2:case 15:return t=$v(t.type,!1),t;case 11:return t=$v(t.type.render,!1),t;case 1:return t=$v(t.type,!0),t;default:return""}}function n_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sl:return"Fragment";case xl:return"Portal";case Jy:return"Profiler";case c0:return"StrictMode";case e_:return"Suspense";case t_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lA:return(t.displayName||"Context")+".Consumer";case aA:return(t._context.displayName||"Context")+".Provider";case u0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case d0:return e=t.displayName||null,e!==null?e:n_(t.type)||"Memo";case $i:e=t._payload,t=t._init;try{return n_(t(e))}catch{}}return null}function BF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n_(e);case 8:return e===c0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function So(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zF(t){var e=uA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ff(t){t._valueTracker||(t._valueTracker=zF(t))}function dA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function r_(t,e){var n=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=So(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hA(t,e){e=e.checked,e!=null&&l0(t,"checked",e,!1)}function s_(t,e){hA(t,e);var n=So(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?i_(t,e.type,n):e.hasOwnProperty("defaultValue")&&i_(t,e.type,So(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function i_(t,e,n){(e!=="number"||xp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Au=Array.isArray;function jl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+So(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function o_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Au(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:So(n)}}function fA(t,e){var n=So(e.value),r=So(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pf,mA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pf=pf||document.createElement("div"),pf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WF=["Webkit","ms","Moz","O"];Object.keys(Bu).forEach(function(t){WF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bu[e]=Bu[t]})});function gA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bu.hasOwnProperty(t)&&Bu[t]?(""+e).trim():e+"px"}function vA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var HF=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l_(t,e){if(e){if(HF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function c_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u_=null;function h0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var d_=null,Ul=null,$l=null;function hS(t){if(t=Eh(t)){if(typeof d_!="function")throw Error(J(280));var e=t.stateNode;e&&(e=og(e),d_(t.stateNode,t.type,e))}}function yA(t){Ul?$l?$l.push(t):$l=[t]:Ul=t}function _A(){if(Ul){var t=Ul,e=$l;if($l=Ul=null,hS(t),e)for(t=0;t<e.length;t++)hS(e[t])}}function wA(t,e){return t(e)}function EA(){}var Bv=!1;function TA(t,e,n){if(Bv)return t(e,n);Bv=!0;try{return wA(t,e,n)}finally{Bv=!1,(Ul!==null||$l!==null)&&(EA(),_A())}}function fd(t,e){var n=t.stateNode;if(n===null)return null;var r=og(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var h_=!1;if(gi)try{var fu={};Object.defineProperty(fu,"passive",{get:function(){h_=!0}}),window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{h_=!1}function qF(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var zu=!1,Sp=null,bp=!1,f_=null,KF={onError:function(t){zu=!0,Sp=t}};function GF(t,e,n,r,s,i,o,a,l){zu=!1,Sp=null,qF.apply(KF,arguments)}function QF(t,e,n,r,s,i,o,a,l){if(GF.apply(this,arguments),zu){if(zu){var c=Sp;zu=!1,Sp=null}else throw Error(J(198));bp||(bp=!0,f_=c)}}function Qa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fS(t){if(Qa(t)!==t)throw Error(J(188))}function YF(t){var e=t.alternate;if(!e){if(e=Qa(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fS(s),t;if(i===r)return fS(s),e;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function SA(t){return t=YF(t),t!==null?bA(t):null}function bA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bA(t);if(e!==null)return e;t=t.sibling}return null}var CA=gr.unstable_scheduleCallback,pS=gr.unstable_cancelCallback,ZF=gr.unstable_shouldYield,XF=gr.unstable_requestPaint,Lt=gr.unstable_now,JF=gr.unstable_getCurrentPriorityLevel,f0=gr.unstable_ImmediatePriority,IA=gr.unstable_UserBlockingPriority,Cp=gr.unstable_NormalPriority,ej=gr.unstable_LowPriority,RA=gr.unstable_IdlePriority,ng=null,ks=null;function tj(t){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(ng,t,void 0,(t.current.flags&128)===128)}catch{}}var rs=Math.clz32?Math.clz32:sj,nj=Math.log,rj=Math.LN2;function sj(t){return t>>>=0,t===0?32:31-(nj(t)/rj|0)|0}var mf=64,gf=4194304;function ku(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ip(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ku(a):(i&=o,i!==0&&(r=ku(i)))}else o=n&~s,o!==0?r=ku(o):i!==0&&(r=ku(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rs(e),s=1<<n,r|=t[n],e&=~s;return r}function ij(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rs(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=ij(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function p_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AA(){var t=mf;return mf<<=1,!(mf&4194240)&&(mf=64),t}function zv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _h(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rs(e),t[e]=n}function aj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rs(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function p0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ot=0;function kA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PA,m0,NA,OA,DA,m_=!1,vf=[],oo=null,ao=null,lo=null,pd=new Map,md=new Map,zi=[],lj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mS(t,e){switch(t){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":pd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(e.pointerId)}}function pu(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Eh(e),e!==null&&m0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function cj(t,e,n,r,s){switch(e){case"focusin":return oo=pu(oo,t,e,n,r,s),!0;case"dragenter":return ao=pu(ao,t,e,n,r,s),!0;case"mouseover":return lo=pu(lo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return pd.set(i,pu(pd.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,md.set(i,pu(md.get(i)||null,t,e,n,r,s)),!0}return!1}function MA(t){var e=ua(t.target);if(e!==null){var n=Qa(e);if(n!==null){if(e=n.tag,e===13){if(e=xA(n),e!==null){t.blockedOn=e,DA(t.priority,function(){NA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=g_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);u_=r,n.target.dispatchEvent(r),u_=null}else return e=Eh(n),e!==null&&m0(e),t.blockedOn=n,!1;e.shift()}return!0}function gS(t,e,n){Qf(t)&&n.delete(e)}function uj(){m_=!1,oo!==null&&Qf(oo)&&(oo=null),ao!==null&&Qf(ao)&&(ao=null),lo!==null&&Qf(lo)&&(lo=null),pd.forEach(gS),md.forEach(gS)}function mu(t,e){t.blockedOn===e&&(t.blockedOn=null,m_||(m_=!0,gr.unstable_scheduleCallback(gr.unstable_NormalPriority,uj)))}function gd(t){function e(s){return mu(s,t)}if(0<vf.length){mu(vf[0],t);for(var n=1;n<vf.length;n++){var r=vf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(oo!==null&&mu(oo,t),ao!==null&&mu(ao,t),lo!==null&&mu(lo,t),pd.forEach(e),md.forEach(e),n=0;n<zi.length;n++)r=zi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zi.length&&(n=zi[0],n.blockedOn===null);)MA(n),n.blockedOn===null&&zi.shift()}var Bl=Ai.ReactCurrentBatchConfig,Rp=!0;function dj(t,e,n,r){var s=ot,i=Bl.transition;Bl.transition=null;try{ot=1,g0(t,e,n,r)}finally{ot=s,Bl.transition=i}}function hj(t,e,n,r){var s=ot,i=Bl.transition;Bl.transition=null;try{ot=4,g0(t,e,n,r)}finally{ot=s,Bl.transition=i}}function g0(t,e,n,r){if(Rp){var s=g_(t,e,n,r);if(s===null)Jv(t,e,r,Ap,n),mS(t,r);else if(cj(s,t,e,n,r))r.stopPropagation();else if(mS(t,r),e&4&&-1<lj.indexOf(t)){for(;s!==null;){var i=Eh(s);if(i!==null&&PA(i),i=g_(t,e,n,r),i===null&&Jv(t,e,r,Ap,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Jv(t,e,r,null,n)}}var Ap=null;function g_(t,e,n,r){if(Ap=null,t=h0(r),t=ua(t),t!==null)if(e=Qa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ap=t,null}function LA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JF()){case f0:return 1;case IA:return 4;case Cp:case ej:return 16;case RA:return 536870912;default:return 16}default:return 16}}var to=null,v0=null,Yf=null;function VA(){if(Yf)return Yf;var t,e=v0,n=e.length,r,s="value"in to?to.value:to.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Yf=s.slice(t,1<r?1-r:void 0)}function Zf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yf(){return!0}function vS(){return!1}function yr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yf:vS,this.isPropagationStopped=vS,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yf)},persist:function(){},isPersistent:yf}),e}var Vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y0=yr(Vc),wh=bt({},Vc,{view:0,detail:0}),fj=yr(wh),Wv,Hv,gu,rg=bt({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gu&&(gu&&t.type==="mousemove"?(Wv=t.screenX-gu.screenX,Hv=t.screenY-gu.screenY):Hv=Wv=0,gu=t),Wv)},movementY:function(t){return"movementY"in t?t.movementY:Hv}}),yS=yr(rg),pj=bt({},rg,{dataTransfer:0}),mj=yr(pj),gj=bt({},wh,{relatedTarget:0}),qv=yr(gj),vj=bt({},Vc,{animationName:0,elapsedTime:0,pseudoElement:0}),yj=yr(vj),_j=bt({},Vc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wj=yr(_j),Ej=bt({},Vc,{data:0}),_S=yr(Ej),Tj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sj[t])?!!e[t]:!1}function _0(){return bj}var Cj=bt({},wh,{key:function(t){if(t.key){var e=Tj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_0,charCode:function(t){return t.type==="keypress"?Zf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ij=yr(Cj),Rj=bt({},rg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wS=yr(Rj),Aj=bt({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_0}),kj=yr(Aj),Pj=bt({},Vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nj=yr(Pj),Oj=bt({},rg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dj=yr(Oj),Mj=[9,13,27,32],w0=gi&&"CompositionEvent"in window,Wu=null;gi&&"documentMode"in document&&(Wu=document.documentMode);var Lj=gi&&"TextEvent"in window&&!Wu,FA=gi&&(!w0||Wu&&8<Wu&&11>=Wu),ES=" ",TS=!1;function jA(t,e){switch(t){case"keyup":return Mj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bl=!1;function Vj(t,e){switch(t){case"compositionend":return UA(e);case"keypress":return e.which!==32?null:(TS=!0,ES);case"textInput":return t=e.data,t===ES&&TS?null:t;default:return null}}function Fj(t,e){if(bl)return t==="compositionend"||!w0&&jA(t,e)?(t=VA(),Yf=v0=to=null,bl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FA&&e.locale!=="ko"?null:e.data;default:return null}}var jj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jj[t.type]:e==="textarea"}function $A(t,e,n,r){yA(r),e=kp(e,"onChange"),0<e.length&&(n=new y0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hu=null,vd=null;function Uj(t){XA(t,0)}function sg(t){var e=Rl(t);if(dA(e))return t}function $j(t,e){if(t==="change")return e}var BA=!1;if(gi){var Kv;if(gi){var Gv="oninput"in document;if(!Gv){var SS=document.createElement("div");SS.setAttribute("oninput","return;"),Gv=typeof SS.oninput=="function"}Kv=Gv}else Kv=!1;BA=Kv&&(!document.documentMode||9<document.documentMode)}function bS(){Hu&&(Hu.detachEvent("onpropertychange",zA),vd=Hu=null)}function zA(t){if(t.propertyName==="value"&&sg(vd)){var e=[];$A(e,vd,t,h0(t)),TA(Uj,e)}}function Bj(t,e,n){t==="focusin"?(bS(),Hu=e,vd=n,Hu.attachEvent("onpropertychange",zA)):t==="focusout"&&bS()}function zj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sg(vd)}function Wj(t,e){if(t==="click")return sg(e)}function Hj(t,e){if(t==="input"||t==="change")return sg(e)}function qj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var as=typeof Object.is=="function"?Object.is:qj;function yd(t,e){if(as(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xy.call(e,s)||!as(t[s],e[s]))return!1}return!0}function CS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function IS(t,e){var n=CS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CS(n)}}function WA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?WA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function HA(){for(var t=window,e=xp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xp(t.document)}return e}function E0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Kj(t){var e=HA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&WA(n.ownerDocument.documentElement,n)){if(r!==null&&E0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=IS(n,i);var o=IS(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gj=gi&&"documentMode"in document&&11>=document.documentMode,Cl=null,v_=null,qu=null,y_=!1;function RS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;y_||Cl==null||Cl!==xp(r)||(r=Cl,"selectionStart"in r&&E0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qu&&yd(qu,r)||(qu=r,r=kp(v_,"onSelect"),0<r.length&&(e=new y0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cl)))}function _f(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Il={animationend:_f("Animation","AnimationEnd"),animationiteration:_f("Animation","AnimationIteration"),animationstart:_f("Animation","AnimationStart"),transitionend:_f("Transition","TransitionEnd")},Qv={},qA={};gi&&(qA=document.createElement("div").style,"AnimationEvent"in window||(delete Il.animationend.animation,delete Il.animationiteration.animation,delete Il.animationstart.animation),"TransitionEvent"in window||delete Il.transitionend.transition);function ig(t){if(Qv[t])return Qv[t];if(!Il[t])return t;var e=Il[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qA)return Qv[t]=e[n];return t}var KA=ig("animationend"),GA=ig("animationiteration"),QA=ig("animationstart"),YA=ig("transitionend"),ZA=new Map,AS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qo(t,e){ZA.set(t,e),Ga(e,[t])}for(var Yv=0;Yv<AS.length;Yv++){var Zv=AS[Yv],Qj=Zv.toLowerCase(),Yj=Zv[0].toUpperCase()+Zv.slice(1);qo(Qj,"on"+Yj)}qo(KA,"onAnimationEnd");qo(GA,"onAnimationIteration");qo(QA,"onAnimationStart");qo("dblclick","onDoubleClick");qo("focusin","onFocus");qo("focusout","onBlur");qo(YA,"onTransitionEnd");uc("onMouseEnter",["mouseout","mouseover"]);uc("onMouseLeave",["mouseout","mouseover"]);uc("onPointerEnter",["pointerout","pointerover"]);uc("onPointerLeave",["pointerout","pointerover"]);Ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ga("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pu));function kS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QF(r,e,void 0,t),t.currentTarget=null}function XA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;kS(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;kS(s,a,c),i=l}}}if(bp)throw t=f_,bp=!1,f_=null,t}function gt(t,e){var n=e[x_];n===void 0&&(n=e[x_]=new Set);var r=t+"__bubble";n.has(r)||(JA(e,t,2,!1),n.add(r))}function Xv(t,e,n){var r=0;e&&(r|=4),JA(n,t,r,e)}var wf="_reactListening"+Math.random().toString(36).slice(2);function _d(t){if(!t[wf]){t[wf]=!0,oA.forEach(function(n){n!=="selectionchange"&&(Zj.has(n)||Xv(n,!1,t),Xv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wf]||(e[wf]=!0,Xv("selectionchange",!1,e))}}function JA(t,e,n,r){switch(LA(e)){case 1:var s=dj;break;case 4:s=hj;break;default:s=g0}n=s.bind(null,e,n,t),s=void 0,!h_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Jv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ua(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}TA(function(){var c=i,d=h0(n),h=[];e:{var f=ZA.get(t);if(f!==void 0){var m=y0,T=t;switch(t){case"keypress":if(Zf(n)===0)break e;case"keydown":case"keyup":m=Ij;break;case"focusin":T="focus",m=qv;break;case"focusout":T="blur",m=qv;break;case"beforeblur":case"afterblur":m=qv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=yS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=kj;break;case KA:case GA:case QA:m=yj;break;case YA:m=Nj;break;case"scroll":m=fj;break;case"wheel":m=Dj;break;case"copy":case"cut":case"paste":m=wj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=wS}var v=(e&4)!==0,x=!v&&t==="scroll",E=v?f!==null?f+"Capture":null:f;v=[];for(var _=c,S;_!==null;){S=_;var O=S.stateNode;if(S.tag===5&&O!==null&&(S=O,E!==null&&(O=fd(_,E),O!=null&&v.push(wd(_,O,S)))),x)break;_=_.return}0<v.length&&(f=new m(f,T,null,n,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==u_&&(T=n.relatedTarget||n.fromElement)&&(ua(T)||T[vi]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(T=n.relatedTarget||n.toElement,m=c,T=T?ua(T):null,T!==null&&(x=Qa(T),T!==x||T.tag!==5&&T.tag!==6)&&(T=null)):(m=null,T=c),m!==T)){if(v=yS,O="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=wS,O="onPointerLeave",E="onPointerEnter",_="pointer"),x=m==null?f:Rl(m),S=T==null?f:Rl(T),f=new v(O,_+"leave",m,n,d),f.target=x,f.relatedTarget=S,O=null,ua(d)===c&&(v=new v(E,_+"enter",T,n,d),v.target=S,v.relatedTarget=x,O=v),x=O,m&&T)t:{for(v=m,E=T,_=0,S=v;S;S=hl(S))_++;for(S=0,O=E;O;O=hl(O))S++;for(;0<_-S;)v=hl(v),_--;for(;0<S-_;)E=hl(E),S--;for(;_--;){if(v===E||E!==null&&v===E.alternate)break t;v=hl(v),E=hl(E)}v=null}else v=null;m!==null&&PS(h,f,m,v,!1),T!==null&&x!==null&&PS(h,x,T,v,!0)}}e:{if(f=c?Rl(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var D=$j;else if(xS(f))if(BA)D=Hj;else{D=zj;var L=Bj}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=Wj);if(D&&(D=D(t,c))){$A(h,D,n,d);break e}L&&L(t,f,c),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&i_(f,"number",f.value)}switch(L=c?Rl(c):window,t){case"focusin":(xS(L)||L.contentEditable==="true")&&(Cl=L,v_=c,qu=null);break;case"focusout":qu=v_=Cl=null;break;case"mousedown":y_=!0;break;case"contextmenu":case"mouseup":case"dragend":y_=!1,RS(h,n,d);break;case"selectionchange":if(Gj)break;case"keydown":case"keyup":RS(h,n,d)}var I;if(w0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else bl?jA(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(FA&&n.locale!=="ko"&&(bl||b!=="onCompositionStart"?b==="onCompositionEnd"&&bl&&(I=VA()):(to=d,v0="value"in to?to.value:to.textContent,bl=!0)),L=kp(c,b),0<L.length&&(b=new _S(b,t,null,n,d),h.push({event:b,listeners:L}),I?b.data=I:(I=UA(n),I!==null&&(b.data=I)))),(I=Lj?Vj(t,n):Fj(t,n))&&(c=kp(c,"onBeforeInput"),0<c.length&&(d=new _S("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=I))}XA(h,e)})}function wd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kp(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fd(t,n),i!=null&&r.unshift(wd(t,i,s)),i=fd(t,e),i!=null&&r.push(wd(t,i,s))),t=t.return}return r}function hl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PS(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=fd(n,i),l!=null&&o.unshift(wd(n,l,a))):s||(l=fd(n,i),l!=null&&o.push(wd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Xj=/\r\n?/g,Jj=/\u0000|\uFFFD/g;function NS(t){return(typeof t=="string"?t:""+t).replace(Xj,`
`).replace(Jj,"")}function Ef(t,e,n){if(e=NS(e),NS(t)!==e&&n)throw Error(J(425))}function Pp(){}var __=null,w_=null;function E_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var T_=typeof setTimeout=="function"?setTimeout:void 0,e4=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,t4=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(t){return OS.resolve(null).then(t).catch(n4)}:T_;function n4(t){setTimeout(function(){throw t})}function ey(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gd(e)}function co(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function DS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fc=Math.random().toString(36).slice(2),bs="__reactFiber$"+Fc,Ed="__reactProps$"+Fc,vi="__reactContainer$"+Fc,x_="__reactEvents$"+Fc,r4="__reactListeners$"+Fc,s4="__reactHandles$"+Fc;function ua(t){var e=t[bs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vi]||n[bs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=DS(t);t!==null;){if(n=t[bs])return n;t=DS(t)}return e}t=n,n=t.parentNode}return null}function Eh(t){return t=t[bs]||t[vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function og(t){return t[Ed]||null}var S_=[],Al=-1;function Ko(t){return{current:t}}function vt(t){0>Al||(t.current=S_[Al],S_[Al]=null,Al--)}function ft(t,e){Al++,S_[Al]=t.current,t.current=e}var bo={},kn=Ko(bo),Jn=Ko(!1),Ca=bo;function dc(t,e){var n=t.type.contextTypes;if(!n)return bo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function er(t){return t=t.childContextTypes,t!=null}function Np(){vt(Jn),vt(kn)}function MS(t,e,n){if(kn.current!==bo)throw Error(J(168));ft(kn,e),ft(Jn,n)}function ek(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,BF(t)||"Unknown",s));return bt({},n,r)}function Op(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bo,Ca=kn.current,ft(kn,t),ft(Jn,Jn.current),!0}function LS(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=ek(t,e,Ca),r.__reactInternalMemoizedMergedChildContext=t,vt(Jn),vt(kn),ft(kn,t)):vt(Jn),ft(Jn,n)}var ri=null,ag=!1,ty=!1;function tk(t){ri===null?ri=[t]:ri.push(t)}function i4(t){ag=!0,tk(t)}function Go(){if(!ty&&ri!==null){ty=!0;var t=0,e=ot;try{var n=ri;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ri=null,ag=!1}catch(s){throw ri!==null&&(ri=ri.slice(t+1)),CA(f0,Go),s}finally{ot=e,ty=!1}}return null}var kl=[],Pl=0,Dp=null,Mp=0,Sr=[],br=0,Ia=null,oi=1,ai="";function oa(t,e){kl[Pl++]=Mp,kl[Pl++]=Dp,Dp=t,Mp=e}function nk(t,e,n){Sr[br++]=oi,Sr[br++]=ai,Sr[br++]=Ia,Ia=t;var r=oi;t=ai;var s=32-rs(r)-1;r&=~(1<<s),n+=1;var i=32-rs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,oi=1<<32-rs(e)+s|n<<s|r,ai=i+t}else oi=1<<i|n<<s|r,ai=t}function T0(t){t.return!==null&&(oa(t,1),nk(t,1,0))}function x0(t){for(;t===Dp;)Dp=kl[--Pl],kl[Pl]=null,Mp=kl[--Pl],kl[Pl]=null;for(;t===Ia;)Ia=Sr[--br],Sr[br]=null,ai=Sr[--br],Sr[br]=null,oi=Sr[--br],Sr[br]=null}var hr=null,cr=null,_t=!1,Yr=null;function rk(t,e){var n=Ir(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function VS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,cr=co(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ia!==null?{id:oi,overflow:ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ir(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,cr=null,!0):!1;default:return!1}}function b_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function C_(t){if(_t){var e=cr;if(e){var n=e;if(!VS(t,e)){if(b_(t))throw Error(J(418));e=co(n.nextSibling);var r=hr;e&&VS(t,e)?rk(r,n):(t.flags=t.flags&-4097|2,_t=!1,hr=t)}}else{if(b_(t))throw Error(J(418));t.flags=t.flags&-4097|2,_t=!1,hr=t}}}function FS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function Tf(t){if(t!==hr)return!1;if(!_t)return FS(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!E_(t.type,t.memoizedProps)),e&&(e=cr)){if(b_(t))throw sk(),Error(J(418));for(;e;)rk(t,e),e=co(e.nextSibling)}if(FS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cr=co(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cr=null}}else cr=hr?co(t.stateNode.nextSibling):null;return!0}function sk(){for(var t=cr;t;)t=co(t.nextSibling)}function hc(){cr=hr=null,_t=!1}function S0(t){Yr===null?Yr=[t]:Yr.push(t)}var o4=Ai.ReactCurrentBatchConfig;function vu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function xf(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jS(t){var e=t._init;return e(t._payload)}function ik(t){function e(E,_){if(t){var S=E.deletions;S===null?(E.deletions=[_],E.flags|=16):S.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=po(E,_),E.index=0,E.sibling=null,E}function i(E,_,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<_?(E.flags|=2,_):S):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,_,S,O){return _===null||_.tag!==6?(_=ly(S,E.mode,O),_.return=E,_):(_=s(_,S),_.return=E,_)}function l(E,_,S,O){var D=S.type;return D===Sl?d(E,_,S.props.children,O,S.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===$i&&jS(D)===_.type)?(O=s(_,S.props),O.ref=vu(E,_,S),O.return=E,O):(O=sp(S.type,S.key,S.props,null,E.mode,O),O.ref=vu(E,_,S),O.return=E,O)}function c(E,_,S,O){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=cy(S,E.mode,O),_.return=E,_):(_=s(_,S.children||[]),_.return=E,_)}function d(E,_,S,O,D){return _===null||_.tag!==7?(_=xa(S,E.mode,O,D),_.return=E,_):(_=s(_,S),_.return=E,_)}function h(E,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ly(""+_,E.mode,S),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hf:return S=sp(_.type,_.key,_.props,null,E.mode,S),S.ref=vu(E,null,_),S.return=E,S;case xl:return _=cy(_,E.mode,S),_.return=E,_;case $i:var O=_._init;return h(E,O(_._payload),S)}if(Au(_)||hu(_))return _=xa(_,E.mode,S,null),_.return=E,_;xf(E,_)}return null}function f(E,_,S,O){var D=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:a(E,_,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hf:return S.key===D?l(E,_,S,O):null;case xl:return S.key===D?c(E,_,S,O):null;case $i:return D=S._init,f(E,_,D(S._payload),O)}if(Au(S)||hu(S))return D!==null?null:d(E,_,S,O,null);xf(E,S)}return null}function m(E,_,S,O,D){if(typeof O=="string"&&O!==""||typeof O=="number")return E=E.get(S)||null,a(_,E,""+O,D);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case hf:return E=E.get(O.key===null?S:O.key)||null,l(_,E,O,D);case xl:return E=E.get(O.key===null?S:O.key)||null,c(_,E,O,D);case $i:var L=O._init;return m(E,_,S,L(O._payload),D)}if(Au(O)||hu(O))return E=E.get(S)||null,d(_,E,O,D,null);xf(_,O)}return null}function T(E,_,S,O){for(var D=null,L=null,I=_,b=_=0,C=null;I!==null&&b<S.length;b++){I.index>b?(C=I,I=null):C=I.sibling;var A=f(E,I,S[b],O);if(A===null){I===null&&(I=C);break}t&&I&&A.alternate===null&&e(E,I),_=i(A,_,b),L===null?D=A:L.sibling=A,L=A,I=C}if(b===S.length)return n(E,I),_t&&oa(E,b),D;if(I===null){for(;b<S.length;b++)I=h(E,S[b],O),I!==null&&(_=i(I,_,b),L===null?D=I:L.sibling=I,L=I);return _t&&oa(E,b),D}for(I=r(E,I);b<S.length;b++)C=m(I,E,b,S[b],O),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?b:C.key),_=i(C,_,b),L===null?D=C:L.sibling=C,L=C);return t&&I.forEach(function(N){return e(E,N)}),_t&&oa(E,b),D}function v(E,_,S,O){var D=hu(S);if(typeof D!="function")throw Error(J(150));if(S=D.call(S),S==null)throw Error(J(151));for(var L=D=null,I=_,b=_=0,C=null,A=S.next();I!==null&&!A.done;b++,A=S.next()){I.index>b?(C=I,I=null):C=I.sibling;var N=f(E,I,A.value,O);if(N===null){I===null&&(I=C);break}t&&I&&N.alternate===null&&e(E,I),_=i(N,_,b),L===null?D=N:L.sibling=N,L=N,I=C}if(A.done)return n(E,I),_t&&oa(E,b),D;if(I===null){for(;!A.done;b++,A=S.next())A=h(E,A.value,O),A!==null&&(_=i(A,_,b),L===null?D=A:L.sibling=A,L=A);return _t&&oa(E,b),D}for(I=r(E,I);!A.done;b++,A=S.next())A=m(I,E,b,A.value,O),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?b:A.key),_=i(A,_,b),L===null?D=A:L.sibling=A,L=A);return t&&I.forEach(function(k){return e(E,k)}),_t&&oa(E,b),D}function x(E,_,S,O){if(typeof S=="object"&&S!==null&&S.type===Sl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case hf:e:{for(var D=S.key,L=_;L!==null;){if(L.key===D){if(D=S.type,D===Sl){if(L.tag===7){n(E,L.sibling),_=s(L,S.props.children),_.return=E,E=_;break e}}else if(L.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===$i&&jS(D)===L.type){n(E,L.sibling),_=s(L,S.props),_.ref=vu(E,L,S),_.return=E,E=_;break e}n(E,L);break}else e(E,L);L=L.sibling}S.type===Sl?(_=xa(S.props.children,E.mode,O,S.key),_.return=E,E=_):(O=sp(S.type,S.key,S.props,null,E.mode,O),O.ref=vu(E,_,S),O.return=E,E=O)}return o(E);case xl:e:{for(L=S.key;_!==null;){if(_.key===L)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(E,_.sibling),_=s(_,S.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=cy(S,E.mode,O),_.return=E,E=_}return o(E);case $i:return L=S._init,x(E,_,L(S._payload),O)}if(Au(S))return T(E,_,S,O);if(hu(S))return v(E,_,S,O);xf(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,S),_.return=E,E=_):(n(E,_),_=ly(S,E.mode,O),_.return=E,E=_),o(E)):n(E,_)}return x}var fc=ik(!0),ok=ik(!1),Lp=Ko(null),Vp=null,Nl=null,b0=null;function C0(){b0=Nl=Vp=null}function I0(t){var e=Lp.current;vt(Lp),t._currentValue=e}function I_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zl(t,e){Vp=t,b0=Nl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xn=!0),t.firstContext=null)}function Or(t){var e=t._currentValue;if(b0!==t)if(t={context:t,memoizedValue:e,next:null},Nl===null){if(Vp===null)throw Error(J(308));Nl=t,Vp.dependencies={lanes:0,firstContext:t}}else Nl=Nl.next=t;return e}var da=null;function R0(t){da===null?da=[t]:da.push(t)}function ak(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,R0(e)):(n.next=s.next,s.next=n),e.interleaved=n,yi(t,r)}function yi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bi=!1;function A0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,yi(t,n)}return s=r.interleaved,s===null?(e.next=e,R0(r)):(e.next=s.next,s.next=e),r.interleaved=e,yi(t,n)}function Xf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,p0(t,n)}}function US(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fp(t,e,n,r){var s=t.updateQueue;Bi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,v=a;switch(f=e,m=n,v.tag){case 1:if(T=v.payload,typeof T=="function"){h=T.call(m,h,f);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=v.payload,f=typeof T=="function"?T.call(m,h,f):T,f==null)break e;h=bt({},h,f);break e;case 2:Bi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Aa|=o,t.lanes=o,t.memoizedState=h}}function $S(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var Th={},Ps=Ko(Th),Td=Ko(Th),xd=Ko(Th);function ha(t){if(t===Th)throw Error(J(174));return t}function k0(t,e){switch(ft(xd,e),ft(Td,t),ft(Ps,Th),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:a_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=a_(e,t)}vt(Ps),ft(Ps,e)}function pc(){vt(Ps),vt(Td),vt(xd)}function ck(t){ha(xd.current);var e=ha(Ps.current),n=a_(e,t.type);e!==n&&(ft(Td,t),ft(Ps,n))}function P0(t){Td.current===t&&(vt(Ps),vt(Td))}var xt=Ko(0);function jp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ny=[];function N0(){for(var t=0;t<ny.length;t++)ny[t]._workInProgressVersionPrimary=null;ny.length=0}var Jf=Ai.ReactCurrentDispatcher,ry=Ai.ReactCurrentBatchConfig,Ra=0,St=null,Wt=null,Jt=null,Up=!1,Ku=!1,Sd=0,a4=0;function Tn(){throw Error(J(321))}function O0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!as(t[n],e[n]))return!1;return!0}function D0(t,e,n,r,s,i){if(Ra=i,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jf.current=t===null||t.memoizedState===null?d4:h4,t=n(r,s),Ku){i=0;do{if(Ku=!1,Sd=0,25<=i)throw Error(J(301));i+=1,Jt=Wt=null,e.updateQueue=null,Jf.current=f4,t=n(r,s)}while(Ku)}if(Jf.current=$p,e=Wt!==null&&Wt.next!==null,Ra=0,Jt=Wt=St=null,Up=!1,e)throw Error(J(300));return t}function M0(){var t=Sd!==0;return Sd=0,t}function ws(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?St.memoizedState=Jt=t:Jt=Jt.next=t,Jt}function Dr(){if(Wt===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var e=Jt===null?St.memoizedState:Jt.next;if(e!==null)Jt=e,Wt=t;else{if(t===null)throw Error(J(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Jt===null?St.memoizedState=Jt=t:Jt=Jt.next=t}return Jt}function bd(t,e){return typeof e=="function"?e(t):e}function sy(t){var e=Dr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Wt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ra&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,St.lanes|=d,Aa|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,as(r,e.memoizedState)||(Xn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,St.lanes|=i,Aa|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iy(t){var e=Dr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);as(i,e.memoizedState)||(Xn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function uk(){}function dk(t,e){var n=St,r=Dr(),s=e(),i=!as(r.memoizedState,s);if(i&&(r.memoizedState=s,Xn=!0),r=r.queue,L0(pk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Jt!==null&&Jt.memoizedState.tag&1){if(n.flags|=2048,Cd(9,fk.bind(null,n,r,s,e),void 0,null),tn===null)throw Error(J(349));Ra&30||hk(n,e,s)}return s}function hk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fk(t,e,n,r){e.value=n,e.getSnapshot=r,mk(e)&&gk(t)}function pk(t,e,n){return n(function(){mk(e)&&gk(t)})}function mk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!as(t,n)}catch{return!0}}function gk(t){var e=yi(t,1);e!==null&&ss(e,t,1,-1)}function BS(t){var e=ws();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bd,lastRenderedState:t},e.queue=t,t=t.dispatch=u4.bind(null,St,t),[e.memoizedState,t]}function Cd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vk(){return Dr().memoizedState}function ep(t,e,n,r){var s=ws();St.flags|=t,s.memoizedState=Cd(1|e,n,void 0,r===void 0?null:r)}function lg(t,e,n,r){var s=Dr();r=r===void 0?null:r;var i=void 0;if(Wt!==null){var o=Wt.memoizedState;if(i=o.destroy,r!==null&&O0(r,o.deps)){s.memoizedState=Cd(e,n,i,r);return}}St.flags|=t,s.memoizedState=Cd(1|e,n,i,r)}function zS(t,e){return ep(8390656,8,t,e)}function L0(t,e){return lg(2048,8,t,e)}function yk(t,e){return lg(4,2,t,e)}function _k(t,e){return lg(4,4,t,e)}function wk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ek(t,e,n){return n=n!=null?n.concat([t]):null,lg(4,4,wk.bind(null,e,t),n)}function V0(){}function Tk(t,e){var n=Dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xk(t,e){var n=Dr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sk(t,e,n){return Ra&21?(as(n,e)||(n=AA(),St.lanes|=n,Aa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xn=!0),t.memoizedState=n)}function l4(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=ry.transition;ry.transition={};try{t(!1),e()}finally{ot=n,ry.transition=r}}function bk(){return Dr().memoizedState}function c4(t,e,n){var r=fo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ck(t))Ik(e,n);else if(n=ak(t,e,n,r),n!==null){var s=Un();ss(n,t,r,s),Rk(n,e,r)}}function u4(t,e,n){var r=fo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ck(t))Ik(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,as(a,o)){var l=e.interleaved;l===null?(s.next=s,R0(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ak(t,e,s,r),n!==null&&(s=Un(),ss(n,t,r,s),Rk(n,e,r))}}function Ck(t){var e=t.alternate;return t===St||e!==null&&e===St}function Ik(t,e){Ku=Up=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Rk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,p0(t,n)}}var $p={readContext:Or,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},d4={readContext:Or,useCallback:function(t,e){return ws().memoizedState=[t,e===void 0?null:e],t},useContext:Or,useEffect:zS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ep(4194308,4,wk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ep(4194308,4,t,e)},useInsertionEffect:function(t,e){return ep(4,2,t,e)},useMemo:function(t,e){var n=ws();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ws();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=c4.bind(null,St,t),[r.memoizedState,t]},useRef:function(t){var e=ws();return t={current:t},e.memoizedState=t},useState:BS,useDebugValue:V0,useDeferredValue:function(t){return ws().memoizedState=t},useTransition:function(){var t=BS(!1),e=t[0];return t=l4.bind(null,t[1]),ws().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=St,s=ws();if(_t){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),tn===null)throw Error(J(349));Ra&30||hk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zS(pk.bind(null,r,i,t),[t]),r.flags|=2048,Cd(9,fk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ws(),e=tn.identifierPrefix;if(_t){var n=ai,r=oi;n=(r&~(1<<32-rs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},h4={readContext:Or,useCallback:Tk,useContext:Or,useEffect:L0,useImperativeHandle:Ek,useInsertionEffect:yk,useLayoutEffect:_k,useMemo:xk,useReducer:sy,useRef:vk,useState:function(){return sy(bd)},useDebugValue:V0,useDeferredValue:function(t){var e=Dr();return Sk(e,Wt.memoizedState,t)},useTransition:function(){var t=sy(bd)[0],e=Dr().memoizedState;return[t,e]},useMutableSource:uk,useSyncExternalStore:dk,useId:bk,unstable_isNewReconciler:!1},f4={readContext:Or,useCallback:Tk,useContext:Or,useEffect:L0,useImperativeHandle:Ek,useInsertionEffect:yk,useLayoutEffect:_k,useMemo:xk,useReducer:iy,useRef:vk,useState:function(){return iy(bd)},useDebugValue:V0,useDeferredValue:function(t){var e=Dr();return Wt===null?e.memoizedState=t:Sk(e,Wt.memoizedState,t)},useTransition:function(){var t=iy(bd)[0],e=Dr().memoizedState;return[t,e]},useMutableSource:uk,useSyncExternalStore:dk,useId:bk,unstable_isNewReconciler:!1};function Hr(t,e){if(t&&t.defaultProps){e=bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function R_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cg={isMounted:function(t){return(t=t._reactInternals)?Qa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Un(),s=fo(t),i=hi(r,s);i.payload=e,n!=null&&(i.callback=n),e=uo(t,i,s),e!==null&&(ss(e,t,s,r),Xf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Un(),s=fo(t),i=hi(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=uo(t,i,s),e!==null&&(ss(e,t,s,r),Xf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Un(),r=fo(t),s=hi(n,r);s.tag=2,e!=null&&(s.callback=e),e=uo(t,s,r),e!==null&&(ss(e,t,r,n),Xf(e,t,r))}};function WS(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yd(n,r)||!yd(s,i):!0}function Ak(t,e,n){var r=!1,s=bo,i=e.contextType;return typeof i=="object"&&i!==null?i=Or(i):(s=er(e)?Ca:kn.current,r=e.contextTypes,i=(r=r!=null)?dc(t,s):bo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function HS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cg.enqueueReplaceState(e,e.state,null)}function A_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},A0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Or(i):(i=er(e)?Ca:kn.current,s.context=dc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(R_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cg.enqueueReplaceState(s,s.state,null),Fp(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mc(t,e){try{var n="",r=e;do n+=$F(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function oy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function k_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var p4=typeof WeakMap=="function"?WeakMap:Map;function kk(t,e,n){n=hi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zp||(zp=!0,U_=r),k_(t,e)},n}function Pk(t,e,n){n=hi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){k_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){k_(t,e),typeof r!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new p4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=R4.bind(null,t,e,n),e.then(t,t))}function KS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function GS(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hi(-1,1),e.tag=2,uo(n,e,1))),n.lanes|=1),t)}var m4=Ai.ReactCurrentOwner,Xn=!1;function Mn(t,e,n,r){e.child=t===null?ok(e,null,n,r):fc(e,t.child,n,r)}function QS(t,e,n,r,s){n=n.render;var i=e.ref;return zl(e,s),r=D0(t,e,n,r,i,s),n=M0(),t!==null&&!Xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_i(t,e,s)):(_t&&n&&T0(e),e.flags|=1,Mn(t,e,r,s),e.child)}function YS(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!H0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Nk(t,e,i,r,s)):(t=sp(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yd,n(o,r)&&t.ref===e.ref)return _i(t,e,s)}return e.flags|=1,t=po(i,r),t.ref=e.ref,t.return=e,e.child=t}function Nk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yd(i,r)&&t.ref===e.ref)if(Xn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xn=!0);else return e.lanes=t.lanes,_i(t,e,s)}return P_(t,e,n,r,s)}function Ok(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Dl,ir),ir|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ft(Dl,ir),ir|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ft(Dl,ir),ir|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ft(Dl,ir),ir|=r;return Mn(t,e,s,n),e.child}function Dk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function P_(t,e,n,r,s){var i=er(n)?Ca:kn.current;return i=dc(e,i),zl(e,s),n=D0(t,e,n,r,i,s),r=M0(),t!==null&&!Xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_i(t,e,s)):(_t&&r&&T0(e),e.flags|=1,Mn(t,e,n,s),e.child)}function ZS(t,e,n,r,s){if(er(n)){var i=!0;Op(e)}else i=!1;if(zl(e,s),e.stateNode===null)tp(t,e),Ak(e,n,r),A_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Or(c):(c=er(n)?Ca:kn.current,c=dc(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&HS(e,o,r,c),Bi=!1;var f=e.memoizedState;o.state=f,Fp(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Jn.current||Bi?(typeof d=="function"&&(R_(e,n,d,r),l=e.memoizedState),(a=Bi||WS(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,lk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hr(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Or(l):(l=er(n)?Ca:kn.current,l=dc(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&HS(e,o,r,l),Bi=!1,f=e.memoizedState,o.state=f,Fp(e,r,o,s);var T=e.memoizedState;a!==h||f!==T||Jn.current||Bi?(typeof m=="function"&&(R_(e,n,m,r),T=e.memoizedState),(c=Bi||WS(e,n,c,r,f,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return N_(t,e,n,r,i,s)}function N_(t,e,n,r,s,i){Dk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&LS(e,n,!1),_i(t,e,i);r=e.stateNode,m4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fc(e,t.child,null,i),e.child=fc(e,null,a,i)):Mn(t,e,a,i),e.memoizedState=r.state,s&&LS(e,n,!0),e.child}function Mk(t){var e=t.stateNode;e.pendingContext?MS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&MS(t,e.context,!1),k0(t,e.containerInfo)}function XS(t,e,n,r,s){return hc(),S0(s),e.flags|=256,Mn(t,e,n,r),e.child}var O_={dehydrated:null,treeContext:null,retryLane:0};function D_(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lk(t,e,n){var r=e.pendingProps,s=xt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ft(xt,s&1),t===null)return C_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=hg(o,r,0,null),t=xa(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=D_(n),e.memoizedState=O_,t):F0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return g4(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=po(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=po(a,i):(i=xa(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?D_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=O_,r}return i=t.child,t=i.sibling,r=po(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function F0(t,e){return e=hg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sf(t,e,n,r){return r!==null&&S0(r),fc(e,t.child,null,n),t=F0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function g4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=oy(Error(J(422))),Sf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=hg({mode:"visible",children:r.children},s,0,null),i=xa(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&fc(e,t.child,null,o),e.child.memoizedState=D_(o),e.memoizedState=O_,i);if(!(e.mode&1))return Sf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(J(419)),r=oy(i,r,void 0),Sf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Xn||a){if(r=tn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,yi(t,s),ss(r,t,s,-1))}return W0(),r=oy(Error(J(421))),Sf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=A4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,cr=co(s.nextSibling),hr=e,_t=!0,Yr=null,t!==null&&(Sr[br++]=oi,Sr[br++]=ai,Sr[br++]=Ia,oi=t.id,ai=t.overflow,Ia=e),e=F0(e,r.children),e.flags|=4096,e)}function JS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),I_(t.return,e,n)}function ay(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Vk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mn(t,e,r.children,n),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&JS(t,n,e);else if(t.tag===19)JS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ft(xt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jp(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ay(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jp(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ay(e,!0,n,null,i);break;case"together":ay(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _i(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Aa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=po(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=po(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function v4(t,e,n){switch(e.tag){case 3:Mk(e),hc();break;case 5:ck(e);break;case 1:er(e.type)&&Op(e);break;case 4:k0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ft(Lp,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ft(xt,xt.current&1),e.flags|=128,null):n&e.child.childLanes?Lk(t,e,n):(ft(xt,xt.current&1),t=_i(t,e,n),t!==null?t.sibling:null);ft(xt,xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ft(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,Ok(t,e,n)}return _i(t,e,n)}var Fk,M_,jk,Uk;Fk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};M_=function(){};jk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ha(Ps.current);var i=null;switch(n){case"input":s=r_(t,s),r=r_(t,r),i=[];break;case"select":s=bt({},s,{value:void 0}),r=bt({},r,{value:void 0}),i=[];break;case"textarea":s=o_(t,s),r=o_(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pp)}l_(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(dd.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(dd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&gt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Uk=function(t,e,n,r){n!==r&&(e.flags|=4)};function yu(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y4(t,e,n){var r=e.pendingProps;switch(x0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(e),null;case 1:return er(e.type)&&Np(),xn(e),null;case 3:return r=e.stateNode,pc(),vt(Jn),vt(kn),N0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yr!==null&&(z_(Yr),Yr=null))),M_(t,e),xn(e),null;case 5:P0(e);var s=ha(xd.current);if(n=e.type,t!==null&&e.stateNode!=null)jk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return xn(e),null}if(t=ha(Ps.current),Tf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bs]=e,r[Ed]=i,t=(e.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(s=0;s<Pu.length;s++)gt(Pu[s],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":lS(r,i),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},gt("invalid",r);break;case"textarea":uS(r,i),gt("invalid",r)}l_(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ef(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ef(r.textContent,a,t),s=["children",""+a]):dd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":ff(r),cS(r,i,!0);break;case"textarea":ff(r),dS(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pp)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bs]=e,t[Ed]=r,Fk(t,e,!1,!1),e.stateNode=t;e:{switch(o=c_(n,r),n){case"dialog":gt("cancel",t),gt("close",t),s=r;break;case"iframe":case"object":case"embed":gt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Pu.length;s++)gt(Pu[s],t);s=r;break;case"source":gt("error",t),s=r;break;case"img":case"image":case"link":gt("error",t),gt("load",t),s=r;break;case"details":gt("toggle",t),s=r;break;case"input":lS(t,r),s=r_(t,r),gt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=bt({},r,{value:void 0}),gt("invalid",t);break;case"textarea":uS(t,r),s=o_(t,r),gt("invalid",t);break;default:s=r}l_(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?vA(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mA(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&hd(t,l):typeof l=="number"&&hd(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&gt("scroll",t):l!=null&&l0(t,i,l,o))}switch(n){case"input":ff(t),cS(t,r,!1);break;case"textarea":ff(t),dS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+So(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?jl(t,!!r.multiple,i,!1):r.defaultValue!=null&&jl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xn(e),null;case 6:if(t&&e.stateNode!=null)Uk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=ha(xd.current),ha(Ps.current),Tf(e)){if(r=e.stateNode,n=e.memoizedProps,r[bs]=e,(i=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:Ef(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ef(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bs]=e,e.stateNode=r}return xn(e),null;case 13:if(vt(xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&cr!==null&&e.mode&1&&!(e.flags&128))sk(),hc(),e.flags|=98560,i=!1;else if(i=Tf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[bs]=e}else hc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xn(e),i=!1}else Yr!==null&&(z_(Yr),Yr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Gt===0&&(Gt=3):W0())),e.updateQueue!==null&&(e.flags|=4),xn(e),null);case 4:return pc(),M_(t,e),t===null&&_d(e.stateNode.containerInfo),xn(e),null;case 10:return I0(e.type._context),xn(e),null;case 17:return er(e.type)&&Np(),xn(e),null;case 19:if(vt(xt),i=e.memoizedState,i===null)return xn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)yu(i,!1);else{if(Gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jp(t),o!==null){for(e.flags|=128,yu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ft(xt,xt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Lt()>gc&&(e.flags|=128,r=!0,yu(i,!1),e.lanes=4194304)}else{if(!r)if(t=jp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_t)return xn(e),null}else 2*Lt()-i.renderingStartTime>gc&&n!==1073741824&&(e.flags|=128,r=!0,yu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Lt(),e.sibling=null,n=xt.current,ft(xt,r?n&1|2:n&1),e):(xn(e),null);case 22:case 23:return z0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ir&1073741824&&(xn(e),e.subtreeFlags&6&&(e.flags|=8192)):xn(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function _4(t,e){switch(x0(e),e.tag){case 1:return er(e.type)&&Np(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pc(),vt(Jn),vt(kn),N0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return P0(e),null;case 13:if(vt(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));hc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(xt),null;case 4:return pc(),null;case 10:return I0(e.type._context),null;case 22:case 23:return z0(),null;case 24:return null;default:return null}}var bf=!1,In=!1,w4=typeof WeakSet=="function"?WeakSet:Set,de=null;function Ol(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kt(t,e,r)}else n.current=null}function L_(t,e,n){try{n()}catch(r){kt(t,e,r)}}var eb=!1;function E4(t,e){if(__=Rp,t=HA(),E0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(w_={focusedElem:t,selectionRange:n},Rp=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var v=T.memoizedProps,x=T.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:Hr(e.type,v),x);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(O){kt(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return T=eb,eb=!1,T}function Gu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&L_(e,n,i)}s=s.next}while(s!==r)}}function ug(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function V_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $k(t){var e=t.alternate;e!==null&&(t.alternate=null,$k(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bs],delete e[Ed],delete e[x_],delete e[r4],delete e[s4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bk(t){return t.tag===5||t.tag===3||t.tag===4}function tb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function F_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pp));else if(r!==4&&(t=t.child,t!==null))for(F_(t,e,n),t=t.sibling;t!==null;)F_(t,e,n),t=t.sibling}function j_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(j_(t,e,n),t=t.sibling;t!==null;)j_(t,e,n),t=t.sibling}var on=null,Qr=!1;function Mi(t,e,n){for(n=n.child;n!==null;)zk(t,e,n),n=n.sibling}function zk(t,e,n){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(ng,n)}catch{}switch(n.tag){case 5:In||Ol(n,e);case 6:var r=on,s=Qr;on=null,Mi(t,e,n),on=r,Qr=s,on!==null&&(Qr?(t=on,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):on.removeChild(n.stateNode));break;case 18:on!==null&&(Qr?(t=on,n=n.stateNode,t.nodeType===8?ey(t.parentNode,n):t.nodeType===1&&ey(t,n),gd(t)):ey(on,n.stateNode));break;case 4:r=on,s=Qr,on=n.stateNode.containerInfo,Qr=!0,Mi(t,e,n),on=r,Qr=s;break;case 0:case 11:case 14:case 15:if(!In&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&L_(n,e,o),s=s.next}while(s!==r)}Mi(t,e,n);break;case 1:if(!In&&(Ol(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kt(n,e,a)}Mi(t,e,n);break;case 21:Mi(t,e,n);break;case 22:n.mode&1?(In=(r=In)||n.memoizedState!==null,Mi(t,e,n),In=r):Mi(t,e,n);break;default:Mi(t,e,n)}}function nb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new w4),e.forEach(function(r){var s=k4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Br(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:on=a.stateNode,Qr=!1;break e;case 3:on=a.stateNode.containerInfo,Qr=!0;break e;case 4:on=a.stateNode.containerInfo,Qr=!0;break e}a=a.return}if(on===null)throw Error(J(160));zk(i,o,s),on=null,Qr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){kt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wk(e,t),e=e.sibling}function Wk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Br(e,t),_s(t),r&4){try{Gu(3,t,t.return),ug(3,t)}catch(v){kt(t,t.return,v)}try{Gu(5,t,t.return)}catch(v){kt(t,t.return,v)}}break;case 1:Br(e,t),_s(t),r&512&&n!==null&&Ol(n,n.return);break;case 5:if(Br(e,t),_s(t),r&512&&n!==null&&Ol(n,n.return),t.flags&32){var s=t.stateNode;try{hd(s,"")}catch(v){kt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&hA(s,i),c_(a,o);var c=c_(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?vA(s,h):d==="dangerouslySetInnerHTML"?mA(s,h):d==="children"?hd(s,h):l0(s,d,h,c)}switch(a){case"input":s_(s,i);break;case"textarea":fA(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?jl(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?jl(s,!!i.multiple,i.defaultValue,!0):jl(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ed]=i}catch(v){kt(t,t.return,v)}}break;case 6:if(Br(e,t),_s(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){kt(t,t.return,v)}}break;case 3:if(Br(e,t),_s(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gd(e.containerInfo)}catch(v){kt(t,t.return,v)}break;case 4:Br(e,t),_s(t);break;case 13:Br(e,t),_s(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($0=Lt())),r&4&&nb(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(In=(c=In)||d,Br(e,t),In=c):Br(e,t),_s(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(de=t,d=t.child;d!==null;){for(h=de=d;de!==null;){switch(f=de,m=f.child,f.tag){case 0:case 11:case 14:case 15:Gu(4,f,f.return);break;case 1:Ol(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(v){kt(r,n,v)}}break;case 5:Ol(f,f.return);break;case 22:if(f.memoizedState!==null){sb(h);continue}}m!==null?(m.return=f,de=m):sb(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gA("display",o))}catch(v){kt(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){kt(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Br(e,t),_s(t),r&4&&nb(t);break;case 21:break;default:Br(e,t),_s(t)}}function _s(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bk(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hd(s,""),r.flags&=-33);var i=tb(t);j_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tb(t);F_(t,a,o);break;default:throw Error(J(161))}}catch(l){kt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T4(t,e,n){de=t,Hk(t)}function Hk(t,e,n){for(var r=(t.mode&1)!==0;de!==null;){var s=de,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||bf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||In;a=bf;var c=In;if(bf=o,(In=l)&&!c)for(de=s;de!==null;)o=de,l=o.child,o.tag===22&&o.memoizedState!==null?ib(s):l!==null?(l.return=o,de=l):ib(s);for(;i!==null;)de=i,Hk(i),i=i.sibling;de=s,bf=a,In=c}rb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,de=i):rb(t)}}function rb(t){for(;de!==null;){var e=de;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:In||ug(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!In)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Hr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$S(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$S(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&gd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}In||e.flags&512&&V_(e)}catch(f){kt(e,e.return,f)}}if(e===t){de=null;break}if(n=e.sibling,n!==null){n.return=e.return,de=n;break}de=e.return}}function sb(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var n=e.sibling;if(n!==null){n.return=e.return,de=n;break}de=e.return}}function ib(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ug(4,e)}catch(l){kt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){kt(e,s,l)}}var i=e.return;try{V_(e)}catch(l){kt(e,i,l)}break;case 5:var o=e.return;try{V_(e)}catch(l){kt(e,o,l)}}}catch(l){kt(e,e.return,l)}if(e===t){de=null;break}var a=e.sibling;if(a!==null){a.return=e.return,de=a;break}de=e.return}}var x4=Math.ceil,Bp=Ai.ReactCurrentDispatcher,j0=Ai.ReactCurrentOwner,Pr=Ai.ReactCurrentBatchConfig,Xe=0,tn=null,Ut=null,pn=0,ir=0,Dl=Ko(0),Gt=0,Id=null,Aa=0,dg=0,U0=0,Qu=null,Zn=null,$0=0,gc=1/0,ni=null,zp=!1,U_=null,ho=null,Cf=!1,no=null,Wp=0,Yu=0,$_=null,np=-1,rp=0;function Un(){return Xe&6?Lt():np!==-1?np:np=Lt()}function fo(t){return t.mode&1?Xe&2&&pn!==0?pn&-pn:o4.transition!==null?(rp===0&&(rp=AA()),rp):(t=ot,t!==0||(t=window.event,t=t===void 0?16:LA(t.type)),t):1}function ss(t,e,n,r){if(50<Yu)throw Yu=0,$_=null,Error(J(185));_h(t,n,r),(!(Xe&2)||t!==tn)&&(t===tn&&(!(Xe&2)&&(dg|=n),Gt===4&&Wi(t,pn)),tr(t,r),n===1&&Xe===0&&!(e.mode&1)&&(gc=Lt()+500,ag&&Go()))}function tr(t,e){var n=t.callbackNode;oj(t,e);var r=Ip(t,t===tn?pn:0);if(r===0)n!==null&&pS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pS(n),e===1)t.tag===0?i4(ob.bind(null,t)):tk(ob.bind(null,t)),t4(function(){!(Xe&6)&&Go()}),n=null;else{switch(kA(r)){case 1:n=f0;break;case 4:n=IA;break;case 16:n=Cp;break;case 536870912:n=RA;break;default:n=Cp}n=Jk(n,qk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qk(t,e){if(np=-1,rp=0,Xe&6)throw Error(J(327));var n=t.callbackNode;if(Wl()&&t.callbackNode!==n)return null;var r=Ip(t,t===tn?pn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hp(t,r);else{e=r;var s=Xe;Xe|=2;var i=Gk();(tn!==t||pn!==e)&&(ni=null,gc=Lt()+500,Ta(t,e));do try{C4();break}catch(a){Kk(t,a)}while(!0);C0(),Bp.current=i,Xe=s,Ut!==null?e=0:(tn=null,pn=0,e=Gt)}if(e!==0){if(e===2&&(s=p_(t),s!==0&&(r=s,e=B_(t,s))),e===1)throw n=Id,Ta(t,0),Wi(t,r),tr(t,Lt()),n;if(e===6)Wi(t,r);else{if(s=t.current.alternate,!(r&30)&&!S4(s)&&(e=Hp(t,r),e===2&&(i=p_(t),i!==0&&(r=i,e=B_(t,i))),e===1))throw n=Id,Ta(t,0),Wi(t,r),tr(t,Lt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:aa(t,Zn,ni);break;case 3:if(Wi(t,r),(r&130023424)===r&&(e=$0+500-Lt(),10<e)){if(Ip(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Un(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=T_(aa.bind(null,t,Zn,ni),e);break}aa(t,Zn,ni);break;case 4:if(Wi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x4(r/1960))-r,10<r){t.timeoutHandle=T_(aa.bind(null,t,Zn,ni),r);break}aa(t,Zn,ni);break;case 5:aa(t,Zn,ni);break;default:throw Error(J(329))}}}return tr(t,Lt()),t.callbackNode===n?qk.bind(null,t):null}function B_(t,e){var n=Qu;return t.current.memoizedState.isDehydrated&&(Ta(t,e).flags|=256),t=Hp(t,e),t!==2&&(e=Zn,Zn=n,e!==null&&z_(e)),t}function z_(t){Zn===null?Zn=t:Zn.push.apply(Zn,t)}function S4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!as(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wi(t,e){for(e&=~U0,e&=~dg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rs(e),r=1<<n;t[n]=-1,e&=~r}}function ob(t){if(Xe&6)throw Error(J(327));Wl();var e=Ip(t,0);if(!(e&1))return tr(t,Lt()),null;var n=Hp(t,e);if(t.tag!==0&&n===2){var r=p_(t);r!==0&&(e=r,n=B_(t,r))}if(n===1)throw n=Id,Ta(t,0),Wi(t,e),tr(t,Lt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,aa(t,Zn,ni),tr(t,Lt()),null}function B0(t,e){var n=Xe;Xe|=1;try{return t(e)}finally{Xe=n,Xe===0&&(gc=Lt()+500,ag&&Go())}}function ka(t){no!==null&&no.tag===0&&!(Xe&6)&&Wl();var e=Xe;Xe|=1;var n=Pr.transition,r=ot;try{if(Pr.transition=null,ot=1,t)return t()}finally{ot=r,Pr.transition=n,Xe=e,!(Xe&6)&&Go()}}function z0(){ir=Dl.current,vt(Dl)}function Ta(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,e4(n)),Ut!==null)for(n=Ut.return;n!==null;){var r=n;switch(x0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Np();break;case 3:pc(),vt(Jn),vt(kn),N0();break;case 5:P0(r);break;case 4:pc();break;case 13:vt(xt);break;case 19:vt(xt);break;case 10:I0(r.type._context);break;case 22:case 23:z0()}n=n.return}if(tn=t,Ut=t=po(t.current,null),pn=ir=e,Gt=0,Id=null,U0=dg=Aa=0,Zn=Qu=null,da!==null){for(e=0;e<da.length;e++)if(n=da[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}da=null}return t}function Kk(t,e){do{var n=Ut;try{if(C0(),Jf.current=$p,Up){for(var r=St.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Up=!1}if(Ra=0,Jt=Wt=St=null,Ku=!1,Sd=0,j0.current=null,n===null||n.return===null){Gt=1,Id=e,Ut=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=pn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=KS(o);if(m!==null){m.flags&=-257,GS(m,o,a,i,e),m.mode&1&&qS(i,c,e),e=m,l=c;var T=e.updateQueue;if(T===null){var v=new Set;v.add(l),e.updateQueue=v}else T.add(l);break e}else{if(!(e&1)){qS(i,c,e),W0();break e}l=Error(J(426))}}else if(_t&&a.mode&1){var x=KS(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),GS(x,o,a,i,e),S0(mc(l,a));break e}}i=l=mc(l,a),Gt!==4&&(Gt=2),Qu===null?Qu=[i]:Qu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=kk(i,l,e);US(i,E);break e;case 1:a=l;var _=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ho===null||!ho.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=Pk(i,a,e);US(i,O);break e}}i=i.return}while(i!==null)}Yk(n)}catch(D){e=D,Ut===n&&n!==null&&(Ut=n=n.return);continue}break}while(!0)}function Gk(){var t=Bp.current;return Bp.current=$p,t===null?$p:t}function W0(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),tn===null||!(Aa&268435455)&&!(dg&268435455)||Wi(tn,pn)}function Hp(t,e){var n=Xe;Xe|=2;var r=Gk();(tn!==t||pn!==e)&&(ni=null,Ta(t,e));do try{b4();break}catch(s){Kk(t,s)}while(!0);if(C0(),Xe=n,Bp.current=r,Ut!==null)throw Error(J(261));return tn=null,pn=0,Gt}function b4(){for(;Ut!==null;)Qk(Ut)}function C4(){for(;Ut!==null&&!ZF();)Qk(Ut)}function Qk(t){var e=Xk(t.alternate,t,ir);t.memoizedProps=t.pendingProps,e===null?Yk(t):Ut=e,j0.current=null}function Yk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_4(n,e),n!==null){n.flags&=32767,Ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Gt=6,Ut=null;return}}else if(n=y4(n,e,ir),n!==null){Ut=n;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);Gt===0&&(Gt=5)}function aa(t,e,n){var r=ot,s=Pr.transition;try{Pr.transition=null,ot=1,I4(t,e,n,r)}finally{Pr.transition=s,ot=r}return null}function I4(t,e,n,r){do Wl();while(no!==null);if(Xe&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(aj(t,i),t===tn&&(Ut=tn=null,pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cf||(Cf=!0,Jk(Cp,function(){return Wl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Pr.transition,Pr.transition=null;var o=ot;ot=1;var a=Xe;Xe|=4,j0.current=null,E4(t,n),Wk(n,t),Kj(w_),Rp=!!__,w_=__=null,t.current=n,T4(n),XF(),Xe=a,ot=o,Pr.transition=i}else t.current=n;if(Cf&&(Cf=!1,no=t,Wp=s),i=t.pendingLanes,i===0&&(ho=null),tj(n.stateNode),tr(t,Lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zp)throw zp=!1,t=U_,U_=null,t;return Wp&1&&t.tag!==0&&Wl(),i=t.pendingLanes,i&1?t===$_?Yu++:(Yu=0,$_=t):Yu=0,Go(),null}function Wl(){if(no!==null){var t=kA(Wp),e=Pr.transition,n=ot;try{if(Pr.transition=null,ot=16>t?16:t,no===null)var r=!1;else{if(t=no,no=null,Wp=0,Xe&6)throw Error(J(331));var s=Xe;for(Xe|=4,de=t.current;de!==null;){var i=de,o=i.child;if(de.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(de=c;de!==null;){var d=de;switch(d.tag){case 0:case 11:case 15:Gu(8,d,i)}var h=d.child;if(h!==null)h.return=d,de=h;else for(;de!==null;){d=de;var f=d.sibling,m=d.return;if($k(d),d===c){de=null;break}if(f!==null){f.return=m,de=f;break}de=m}}}var T=i.alternate;if(T!==null){var v=T.child;if(v!==null){T.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}de=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,de=o;else e:for(;de!==null;){if(i=de,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gu(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,de=E;break e}de=i.return}}var _=t.current;for(de=_;de!==null;){o=de;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,de=S;else e:for(o=_;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ug(9,a)}}catch(D){kt(a,a.return,D)}if(a===o){de=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,de=O;break e}de=a.return}}if(Xe=s,Go(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(ng,t)}catch{}r=!0}return r}finally{ot=n,Pr.transition=e}}return!1}function ab(t,e,n){e=mc(n,e),e=kk(t,e,1),t=uo(t,e,1),e=Un(),t!==null&&(_h(t,1,e),tr(t,e))}function kt(t,e,n){if(t.tag===3)ab(t,t,n);else for(;e!==null;){if(e.tag===3){ab(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ho===null||!ho.has(r))){t=mc(n,t),t=Pk(e,t,1),e=uo(e,t,1),t=Un(),e!==null&&(_h(e,1,t),tr(e,t));break}}e=e.return}}function R4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Un(),t.pingedLanes|=t.suspendedLanes&n,tn===t&&(pn&n)===n&&(Gt===4||Gt===3&&(pn&130023424)===pn&&500>Lt()-$0?Ta(t,0):U0|=n),tr(t,e)}function Zk(t,e){e===0&&(t.mode&1?(e=gf,gf<<=1,!(gf&130023424)&&(gf=4194304)):e=1);var n=Un();t=yi(t,e),t!==null&&(_h(t,e,n),tr(t,n))}function A4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Zk(t,n)}function k4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),Zk(t,n)}var Xk;Xk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jn.current)Xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xn=!1,v4(t,e,n);Xn=!!(t.flags&131072)}else Xn=!1,_t&&e.flags&1048576&&nk(e,Mp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tp(t,e),t=e.pendingProps;var s=dc(e,kn.current);zl(e,n),s=D0(null,e,r,t,s,n);var i=M0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,er(r)?(i=!0,Op(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,A0(e),s.updater=cg,e.stateNode=s,s._reactInternals=e,A_(e,r,t,n),e=N_(null,e,r,!0,i,n)):(e.tag=0,_t&&i&&T0(e),Mn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tp(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=N4(r),t=Hr(r,t),s){case 0:e=P_(null,e,r,t,n);break e;case 1:e=ZS(null,e,r,t,n);break e;case 11:e=QS(null,e,r,t,n);break e;case 14:e=YS(null,e,r,Hr(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hr(r,s),P_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hr(r,s),ZS(t,e,r,s,n);case 3:e:{if(Mk(e),t===null)throw Error(J(387));r=e.pendingProps,i=e.memoizedState,s=i.element,lk(t,e),Fp(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mc(Error(J(423)),e),e=XS(t,e,r,n,s);break e}else if(r!==s){s=mc(Error(J(424)),e),e=XS(t,e,r,n,s);break e}else for(cr=co(e.stateNode.containerInfo.firstChild),hr=e,_t=!0,Yr=null,n=ok(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hc(),r===s){e=_i(t,e,n);break e}Mn(t,e,r,n)}e=e.child}return e;case 5:return ck(e),t===null&&C_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,E_(r,s)?o=null:i!==null&&E_(r,i)&&(e.flags|=32),Dk(t,e),Mn(t,e,o,n),e.child;case 6:return t===null&&C_(e),null;case 13:return Lk(t,e,n);case 4:return k0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fc(e,null,r,n):Mn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hr(r,s),QS(t,e,r,s,n);case 7:return Mn(t,e,e.pendingProps,n),e.child;case 8:return Mn(t,e,e.pendingProps.children,n),e.child;case 12:return Mn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ft(Lp,r._currentValue),r._currentValue=o,i!==null)if(as(i.value,o)){if(i.children===s.children&&!Jn.current){e=_i(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=hi(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),I_(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),I_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zl(e,n),s=Or(s),r=r(s),e.flags|=1,Mn(t,e,r,n),e.child;case 14:return r=e.type,s=Hr(r,e.pendingProps),s=Hr(r.type,s),YS(t,e,r,s,n);case 15:return Nk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hr(r,s),tp(t,e),e.tag=1,er(r)?(t=!0,Op(e)):t=!1,zl(e,n),Ak(e,r,s),A_(e,r,s,n),N_(null,e,r,!0,t,n);case 19:return Vk(t,e,n);case 22:return Ok(t,e,n)}throw Error(J(156,e.tag))};function Jk(t,e){return CA(t,e)}function P4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(t,e,n,r){return new P4(t,e,n,r)}function H0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N4(t){if(typeof t=="function")return H0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===u0)return 11;if(t===d0)return 14}return 2}function po(t,e){var n=t.alternate;return n===null?(n=Ir(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sp(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")H0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sl:return xa(n.children,s,i,e);case c0:o=8,s|=8;break;case Jy:return t=Ir(12,n,e,s|2),t.elementType=Jy,t.lanes=i,t;case e_:return t=Ir(13,n,e,s),t.elementType=e_,t.lanes=i,t;case t_:return t=Ir(19,n,e,s),t.elementType=t_,t.lanes=i,t;case cA:return hg(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aA:o=10;break e;case lA:o=9;break e;case u0:o=11;break e;case d0:o=14;break e;case $i:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Ir(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xa(t,e,n,r){return t=Ir(7,t,r,e),t.lanes=n,t}function hg(t,e,n,r){return t=Ir(22,t,r,e),t.elementType=cA,t.lanes=n,t.stateNode={isHidden:!1},t}function ly(t,e,n){return t=Ir(6,t,null,e),t.lanes=n,t}function cy(t,e,n){return e=Ir(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function O4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zv(0),this.expirationTimes=zv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function q0(t,e,n,r,s,i,o,a,l){return t=new O4(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ir(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},A0(i),t}function D4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eP(t){if(!t)return bo;t=t._reactInternals;e:{if(Qa(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(er(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(er(n))return ek(t,n,e)}return e}function tP(t,e,n,r,s,i,o,a,l){return t=q0(n,r,!0,t,s,i,o,a,l),t.context=eP(null),n=t.current,r=Un(),s=fo(n),i=hi(r,s),i.callback=e??null,uo(n,i,s),t.current.lanes=s,_h(t,s,r),tr(t,r),t}function fg(t,e,n,r){var s=e.current,i=Un(),o=fo(s);return n=eP(n),e.context===null?e.context=n:e.pendingContext=n,e=hi(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=uo(s,e,o),t!==null&&(ss(t,s,o,i),Xf(t,s,o)),o}function qp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function K0(t,e){lb(t,e),(t=t.alternate)&&lb(t,e)}function M4(){return null}var nP=typeof reportError=="function"?reportError:function(t){console.error(t)};function G0(t){this._internalRoot=t}pg.prototype.render=G0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));fg(t,e,null,null)};pg.prototype.unmount=G0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ka(function(){fg(null,t,null,null)}),e[vi]=null}};function pg(t){this._internalRoot=t}pg.prototype.unstable_scheduleHydration=function(t){if(t){var e=OA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zi.length&&e!==0&&e<zi[n].priority;n++);zi.splice(n,0,t),n===0&&MA(t)}};function Q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cb(){}function L4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=qp(o);i.call(c)}}var o=tP(e,r,t,0,null,!1,!1,"",cb);return t._reactRootContainer=o,t[vi]=o.current,_d(t.nodeType===8?t.parentNode:t),ka(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=qp(l);a.call(c)}}var l=q0(t,0,!1,null,null,!1,!1,"",cb);return t._reactRootContainer=l,t[vi]=l.current,_d(t.nodeType===8?t.parentNode:t),ka(function(){fg(e,l,n,r)}),l}function gg(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=qp(o);a.call(l)}}fg(e,o,t,s)}else o=L4(n,e,t,s,r);return qp(o)}PA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ku(e.pendingLanes);n!==0&&(p0(e,n|1),tr(e,Lt()),!(Xe&6)&&(gc=Lt()+500,Go()))}break;case 13:ka(function(){var r=yi(t,1);if(r!==null){var s=Un();ss(r,t,1,s)}}),K0(t,1)}};m0=function(t){if(t.tag===13){var e=yi(t,134217728);if(e!==null){var n=Un();ss(e,t,134217728,n)}K0(t,134217728)}};NA=function(t){if(t.tag===13){var e=fo(t),n=yi(t,e);if(n!==null){var r=Un();ss(n,t,e,r)}K0(t,e)}};OA=function(){return ot};DA=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};d_=function(t,e,n){switch(e){case"input":if(s_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=og(r);if(!s)throw Error(J(90));dA(r),s_(r,s)}}}break;case"textarea":fA(t,n);break;case"select":e=n.value,e!=null&&jl(t,!!n.multiple,e,!1)}};wA=B0;EA=ka;var V4={usingClientEntryPoint:!1,Events:[Eh,Rl,og,yA,_A,B0]},_u={findFiberByHostInstance:ua,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F4={bundleType:_u.bundleType,version:_u.version,rendererPackageName:_u.rendererPackageName,rendererConfig:_u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SA(t),t===null?null:t.stateNode},findFiberByHostInstance:_u.findFiberByHostInstance||M4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{ng=If.inject(F4),ks=If}catch{}}vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V4;vr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q0(e))throw Error(J(200));return D4(t,e,null,n)};vr.createRoot=function(t,e){if(!Q0(t))throw Error(J(299));var n=!1,r="",s=nP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=q0(t,1,!1,null,null,n,!1,r,s),t[vi]=e.current,_d(t.nodeType===8?t.parentNode:t),new G0(e)};vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=SA(e),t=t===null?null:t.stateNode,t};vr.flushSync=function(t){return ka(t)};vr.hydrate=function(t,e,n){if(!mg(e))throw Error(J(200));return gg(null,t,e,!0,n)};vr.hydrateRoot=function(t,e,n){if(!Q0(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=nP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tP(e,null,t,1,n??null,s,!1,i,o),t[vi]=e.current,_d(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new pg(e)};vr.render=function(t,e,n){if(!mg(e))throw Error(J(200));return gg(null,t,e,!1,n)};vr.unmountComponentAtNode=function(t){if(!mg(t))throw Error(J(40));return t._reactRootContainer?(ka(function(){gg(null,null,t,!1,function(){t._reactRootContainer=null,t[vi]=null})}),!0):!1};vr.unstable_batchedUpdates=B0;vr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mg(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return gg(t,e,n,!1,r)};vr.version="18.3.1-next-f1338f8080-20240426";function rP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rP)}catch(t){console.error(t)}}rP(),rA.exports=vr;var Ya=rA.exports;const sP=WR(Ya);var iP,ub=Ya;iP=ub.createRoot,ub.hydrateRoot;const j4=1,U4=1e6;let uy=0;function $4(){return uy=(uy+1)%Number.MAX_SAFE_INTEGER,uy.toString()}const dy=new Map,db=t=>{if(dy.has(t))return;const e=setTimeout(()=>{dy.delete(t),Zu({type:"REMOVE_TOAST",toastId:t})},U4);dy.set(t,e)},B4=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,j4)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?db(n):t.toasts.forEach(r=>{db(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ip=[];let op={toasts:[]};function Zu(t){op=B4(op,t),ip.forEach(e=>{e(op)})}function z4({...t}){const e=$4(),n=s=>Zu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Zu({type:"DISMISS_TOAST",toastId:e});return Zu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function jc(){const[t,e]=y.useState(op);return y.useEffect(()=>(ip.push(e),()=>{const n=ip.indexOf(e);n>-1&&ip.splice(n,1)}),[t]),{...t,toast:z4,dismiss:n=>Zu({type:"DISMISS_TOAST",toastId:n})}}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function hb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function oP(...t){return e=>{let n=!1;const r=t.map(s=>{const i=hb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():hb(t[s],null)}}}}function Je(...t){return y.useCallback(oP(...t),t)}function W4(t,e){const n=y.createContext(e),r=i=>{const{children:o,...a}=i,l=y.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=y.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function zs(t,e=[]){let n=[];function r(i,o){const a=y.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:m,...T}=h,v=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,x=y.useMemo(()=>T,Object.values(T));return p.jsx(v.Provider,{value:x,children:m})};c.displayName=i+"Provider";function d(h,f){var v;const m=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,T=y.useContext(m);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=n.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,H4(s,...e)]}function H4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Co=y.forwardRef((t,e)=>{const{children:n,...r}=t,s=y.Children.toArray(n),i=s.find(q4);if(i){const o=i.props.children,a=s.map(l=>l===i?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:l);return p.jsx(W_,{...r,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,a):null})}return p.jsx(W_,{...r,ref:e,children:n})});Co.displayName="Slot";var W_=y.forwardRef((t,e)=>{const{children:n,...r}=t;if(y.isValidElement(n)){const s=G4(n),i=K4(r,n.props);return n.type!==y.Fragment&&(i.ref=e?oP(e,s):s),y.cloneElement(n,i)}return y.Children.count(n)>1?y.Children.only(null):null});W_.displayName="SlotClone";var aP=({children:t})=>p.jsx(p.Fragment,{children:t});function q4(t){return y.isValidElement(t)&&t.type===aP}function K4(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function G4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Y0(t){const e=t+"CollectionProvider",[n,r]=zs(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:T,children:v}=m,x=W.useRef(null),E=W.useRef(new Map).current;return p.jsx(s,{scope:T,itemMap:E,collectionRef:x,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=W.forwardRef((m,T)=>{const{scope:v,children:x}=m,E=i(a,v),_=Je(T,E.collectionRef);return p.jsx(Co,{ref:_,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",d="data-radix-collection-item",h=W.forwardRef((m,T)=>{const{scope:v,children:x,...E}=m,_=W.useRef(null),S=Je(T,_),O=i(c,v);return W.useEffect(()=>(O.itemMap.set(_,{ref:_,...E}),()=>void O.itemMap.delete(_))),p.jsx(Co,{[d]:"",ref:S,children:x})});h.displayName=c;function f(m){const T=i(t+"CollectionConsumer",m);return W.useCallback(()=>{const x=T.collectionRef.current;if(!x)return[];const E=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(T.itemMap.values()).sort((O,D)=>E.indexOf(O.ref.current)-E.indexOf(D.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,r]}var Q4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ce=Q4.reduce((t,e)=>{const n=y.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?Co:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function lP(t,e){t&&Ya.flushSync(()=>t.dispatchEvent(e))}function Vt(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Y4(t,e=globalThis==null?void 0:globalThis.document){const n=Vt(t);y.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Z4="DismissableLayer",H_="dismissableLayer.update",X4="dismissableLayer.pointerDownOutside",J4="dismissableLayer.focusOutside",fb,cP=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xh=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=y.useContext(cP),[d,h]=y.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=y.useState({}),T=Je(e,I=>h(I)),v=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(x),_=d?v.indexOf(d):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,O=_>=E,D=tU(I=>{const b=I.target,C=[...c.branches].some(A=>A.contains(b));!O||C||(s==null||s(I),o==null||o(I),I.defaultPrevented||a==null||a())},f),L=nU(I=>{const b=I.target;[...c.branches].some(A=>A.contains(b))||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},f);return Y4(I=>{_===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},f),y.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(fb=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),pb(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=fb)}},[d,f,n,c]),y.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),pb())},[d,c]),y.useEffect(()=>{const I=()=>m({});return document.addEventListener(H_,I),()=>document.removeEventListener(H_,I)},[]),p.jsx(Ce.div,{...l,ref:T,style:{pointerEvents:S?O?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,L.onFocusCapture),onBlurCapture:me(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,D.onPointerDownCapture)})});xh.displayName=Z4;var eU="DismissableLayerBranch",uP=y.forwardRef((t,e)=>{const n=y.useContext(cP),r=y.useRef(null),s=Je(e,r);return y.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(Ce.div,{...t,ref:s})});uP.displayName=eU;function tU(t,e=globalThis==null?void 0:globalThis.document){const n=Vt(t),r=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){dP(X4,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function nU(t,e=globalThis==null?void 0:globalThis.document){const n=Vt(t),r=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!r.current&&dP(J4,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function pb(){const t=new CustomEvent(H_);document.dispatchEvent(t)}function dP(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?lP(s,i):s.dispatchEvent(i)}var rU=xh,sU=uP,gn=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},iU="Portal",vg=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=y.useState(!1);gn(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?sP.createPortal(p.jsx(Ce.div,{...r,ref:e}),o):null});vg.displayName=iU;function oU(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Vr=t=>{const{present:e,children:n}=t,r=aU(e),s=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),i=Je(r.ref,lU(s));return typeof n=="function"||r.isPresent?y.cloneElement(s,{ref:i}):null};Vr.displayName="Presence";function aU(t){const[e,n]=y.useState(),r=y.useRef({}),s=y.useRef(t),i=y.useRef("none"),o=t?"mounted":"unmounted",[a,l]=oU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=Rf(r.current);i.current=a==="mounted"?c:"none"},[a]),gn(()=>{const c=r.current,d=s.current;if(d!==t){const f=i.current,m=Rf(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),gn(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const v=Rf(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=m=>{m.target===e&&(i.current=Rf(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Rf(t){return(t==null?void 0:t.animationName)||"none"}function lU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Pa({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=cU({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Vt(n),l=y.useCallback(c=>{if(i){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else s(c)},[i,t,s,a]);return[o,l]}function cU({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,s=y.useRef(r),i=Vt(e);return y.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var uU="VisuallyHidden",Sh=y.forwardRef((t,e)=>p.jsx(Ce.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Sh.displayName=uU;var dU=Sh,Z0="ToastProvider",[X0,hU,fU]=Y0("Toast"),[hP,ote]=zs("Toast",[fU]),[pU,yg]=hP(Z0),fP=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=y.useState(null),[c,d]=y.useState(0),h=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Z0}\`. Expected non-empty \`string\`.`),p.jsx(X0.Provider,{scope:e,children:p.jsx(pU,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:y.useCallback(()=>d(m=>m+1),[]),onToastRemove:y.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};fP.displayName=Z0;var pP="ToastViewport",mU=["F8"],q_="toast.viewportPause",K_="toast.viewportResume",mP=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=mU,label:s="Notifications ({hotkey})",...i}=t,o=yg(pP,n),a=hU(n),l=y.useRef(null),c=y.useRef(null),d=y.useRef(null),h=y.useRef(null),f=Je(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=o.toastCount>0;y.useEffect(()=>{const x=E=>{var S;r.length!==0&&r.every(O=>E[O]||E.code===O)&&((S=h.current)==null||S.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),y.useEffect(()=>{const x=l.current,E=h.current;if(T&&x&&E){const _=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(q_);E.dispatchEvent(L),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(K_);E.dispatchEvent(L),o.isClosePausedRef.current=!1}},O=L=>{!x.contains(L.relatedTarget)&&S()},D=()=>{x.contains(document.activeElement)||S()};return x.addEventListener("focusin",_),x.addEventListener("focusout",O),x.addEventListener("pointermove",_),x.addEventListener("pointerleave",D),window.addEventListener("blur",_),window.addEventListener("focus",S),()=>{x.removeEventListener("focusin",_),x.removeEventListener("focusout",O),x.removeEventListener("pointermove",_),x.removeEventListener("pointerleave",D),window.removeEventListener("blur",_),window.removeEventListener("focus",S)}}},[T,o.isClosePausedRef]);const v=y.useCallback(({tabbingDirection:x})=>{const _=a().map(S=>{const O=S.ref.current,D=[O,...RU(O)];return x==="forwards"?D:D.reverse()});return(x==="forwards"?_.reverse():_).flat()},[a]);return y.useEffect(()=>{const x=h.current;if(x){const E=_=>{var D,L,I;const S=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!S){const b=document.activeElement,C=_.shiftKey;if(_.target===x&&C){(D=c.current)==null||D.focus();return}const k=v({tabbingDirection:C?"backwards":"forwards"}),R=k.findIndex(F=>F===b);hy(k.slice(R+1))?_.preventDefault():C?(L=c.current)==null||L.focus():(I=d.current)==null||I.focus()}};return x.addEventListener("keydown",E),()=>x.removeEventListener("keydown",E)}},[a,v]),p.jsxs(sU,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&p.jsx(G_,{ref:c,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});hy(x)}}),p.jsx(X0.Slot,{scope:n,children:p.jsx(Ce.ol,{tabIndex:-1,...i,ref:f})}),T&&p.jsx(G_,{ref:d,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});hy(x)}})]})});mP.displayName=pP;var gP="ToastFocusProxy",G_=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=yg(gP,n);return p.jsx(Sh,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});G_.displayName=gP;var _g="Toast",gU="toast.swipeStart",vU="toast.swipeMove",yU="toast.swipeCancel",_U="toast.swipeEnd",vP=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=Pa({prop:r,defaultProp:s,onChange:i});return p.jsx(Vr,{present:n||a,children:p.jsx(TU,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Vt(t.onPause),onResume:Vt(t.onResume),onSwipeStart:me(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:me(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});vP.displayName=_g;var[wU,EU]=hP(_g,{onClose(){}}),TU=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...T}=t,v=yg(_g,n),[x,E]=y.useState(null),_=Je(e,F=>E(F)),S=y.useRef(null),O=y.useRef(null),D=s||v.duration,L=y.useRef(0),I=y.useRef(D),b=y.useRef(0),{onToastAdd:C,onToastRemove:A}=v,N=Vt(()=>{var G;(x==null?void 0:x.contains(document.activeElement))&&((G=v.viewport)==null||G.focus()),o()}),k=y.useCallback(F=>{!F||F===1/0||(window.clearTimeout(b.current),L.current=new Date().getTime(),b.current=window.setTimeout(N,F))},[N]);y.useEffect(()=>{const F=v.viewport;if(F){const G=()=>{k(I.current),c==null||c()},K=()=>{const Q=new Date().getTime()-L.current;I.current=I.current-Q,window.clearTimeout(b.current),l==null||l()};return F.addEventListener(q_,K),F.addEventListener(K_,G),()=>{F.removeEventListener(q_,K),F.removeEventListener(K_,G)}}},[v.viewport,D,l,c,k]),y.useEffect(()=>{i&&!v.isClosePausedRef.current&&k(D)},[i,D,v.isClosePausedRef,k]),y.useEffect(()=>(C(),()=>A()),[C,A]);const R=y.useMemo(()=>x?SP(x):null,[x]);return v.viewport?p.jsxs(p.Fragment,{children:[R&&p.jsx(xU,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),p.jsx(wU,{scope:n,onClose:N,children:Ya.createPortal(p.jsx(X0.ItemSlot,{scope:n,children:p.jsx(rU,{asChild:!0,onEscapeKeyDown:me(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||N(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...T,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,F=>{F.key==="Escape"&&(a==null||a(F.nativeEvent),F.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:me(t.onPointerDown,F=>{F.button===0&&(S.current={x:F.clientX,y:F.clientY})}),onPointerMove:me(t.onPointerMove,F=>{if(!S.current)return;const G=F.clientX-S.current.x,K=F.clientY-S.current.y,Q=!!O.current,U=["left","right"].includes(v.swipeDirection),B=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,ee=U?B(0,G):0,pe=U?0:B(0,K),le=F.pointerType==="touch"?10:2,he={x:ee,y:pe},ye={originalEvent:F,delta:he};Q?(O.current=he,Af(vU,h,ye,{discrete:!1})):mb(he,v.swipeDirection,le)?(O.current=he,Af(gU,d,ye,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(G)>le||Math.abs(K)>le)&&(S.current=null)}),onPointerUp:me(t.onPointerUp,F=>{const G=O.current,K=F.target;if(K.hasPointerCapture(F.pointerId)&&K.releasePointerCapture(F.pointerId),O.current=null,S.current=null,G){const Q=F.currentTarget,U={originalEvent:F,delta:G};mb(G,v.swipeDirection,v.swipeThreshold)?Af(_U,m,U,{discrete:!0}):Af(yU,f,U,{discrete:!0}),Q.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),xU=t=>{const{__scopeToast:e,children:n,...r}=t,s=yg(_g,e),[i,o]=y.useState(!1),[a,l]=y.useState(!1);return CU(()=>o(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:p.jsx(vg,{asChild:!0,children:p.jsx(Sh,{...r,children:i&&p.jsxs(p.Fragment,{children:[s.label," ",n]})})})},SU="ToastTitle",yP=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Ce.div,{...r,ref:e})});yP.displayName=SU;var bU="ToastDescription",_P=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Ce.div,{...r,ref:e})});_P.displayName=bU;var wP="ToastAction",EP=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(xP,{altText:n,asChild:!0,children:p.jsx(J0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${wP}\`. Expected non-empty \`string\`.`),null)});EP.displayName=wP;var TP="ToastClose",J0=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=EU(TP,n);return p.jsx(xP,{asChild:!0,children:p.jsx(Ce.button,{type:"button",...r,ref:e,onClick:me(t.onClick,s.onClose)})})});J0.displayName=TP;var xP=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return p.jsx(Ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function SP(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),IU(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...SP(r))}}),e}function Af(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?lP(s,i):s.dispatchEvent(i)}var mb=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function CU(t=()=>{}){const e=Vt(t);gn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function IU(t){return t.nodeType===t.ELEMENT_NODE}function RU(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function hy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var AU=fP,bP=mP,CP=vP,IP=yP,RP=_P,AP=EP,kP=J0;function PP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=PP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function NP(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=PP(t))&&(r&&(r+=" "),r+=e);return r}const gb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,vb=NP,eE=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return vb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=n==null?void 0:n[c],h=i==null?void 0:i[c];if(d===null)return null;const f=gb(d)||gb(h);return s[c][f]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(T=>{let[v,x]=T;return Array.isArray(x)?x.includes({...i,...a}[v]):{...i,...a}[v]===x})?[...c,h,f]:c},[]);return vb(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OP=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>y.createElement("svg",{ref:l,...PU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:OP("lucide",s),...a},[...o.map(([c,d])=>y.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=(t,e)=>{const n=y.forwardRef(({className:r,...s},i)=>y.createElement(NU,{ref:i,iconNode:e,className:OP(`lucide-${kU(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=fs("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=fs("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=fs("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=fs("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=fs("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=fs("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=fs("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=fs("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=fs("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=fs("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=fs("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tE="-",LU=t=>{const e=FU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(tE);return a[0]===""&&a.length!==1&&a.shift(),jP(a,e)||VU(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},jP=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?jP(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(tE);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},wb=/^\[(.+)\]$/,VU=t=>{if(wb.test(t)){const e=wb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},FU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return UU(Object.entries(t.classGroups),n).forEach(([i,o])=>{Q_(o,r,i,e)}),r},Q_=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Eb(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(jU(s)){Q_(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Q_(o,Eb(e,i),n,r)})})},Eb=(t,e)=>{let n=t;return e.split(tE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},jU=t=>t.isThemeGetter,UU=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,$U=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},UP="!",BU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let x=0;x<a.length;x++){let E=a[x];if(c===0){if(E===s&&(r||a.slice(x,x+i)===e)){l.push(a.slice(d,x)),d=x+i;continue}if(E==="/"){h=x;continue}}E==="["?c++:E==="]"&&c--}const f=l.length===0?a:a.substring(d),m=f.startsWith(UP),T=m?f.substring(1):f,v=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:T,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},zU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},WU=t=>({cache:$U(t.cacheSize),parseClassName:BU(t),...LU(t)}),HU=/\s+/,qU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(HU);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(c);let T=!!m,v=r(T?f.substring(0,m):f);if(!v){if(!T){a=c+(a.length>0?" "+a:a);continue}if(v=r(f),!v){a=c+(a.length>0?" "+a:a);continue}T=!1}const x=zU(d).join(":"),E=h?x+UP:x,_=E+v;if(i.includes(_))continue;i.push(_);const S=s(v,T);for(let O=0;O<S.length;++O){const D=S[O];i.push(E+D)}a=c+(a.length>0?" "+a:a)}return a};function KU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=$P(e))&&(r&&(r+=" "),r+=n);return r}const $P=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=$P(t[r]))&&(n&&(n+=" "),n+=e);return n};function GU(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return n=WU(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=qU(l,n);return s(l,d),d}return function(){return i(KU.apply(null,arguments))}}const mt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},BP=/^\[(?:([a-z-]+):)?(.+)\]$/i,QU=/^\d+\/\d+$/,YU=new Set(["px","full","screen"]),ZU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,XU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,e$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,t$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xs=t=>Hl(t)||YU.has(t)||QU.test(t),Li=t=>Uc(t,"length",c$),Hl=t=>!!t&&!Number.isNaN(Number(t)),fy=t=>Uc(t,"number",Hl),wu=t=>!!t&&Number.isInteger(Number(t)),n$=t=>t.endsWith("%")&&Hl(t.slice(0,-1)),Le=t=>BP.test(t),Vi=t=>ZU.test(t),r$=new Set(["length","size","percentage"]),s$=t=>Uc(t,r$,zP),i$=t=>Uc(t,"position",zP),o$=new Set(["image","url"]),a$=t=>Uc(t,o$,d$),l$=t=>Uc(t,"",u$),Eu=()=>!0,Uc=(t,e,n)=>{const r=BP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},c$=t=>XU.test(t)&&!JU.test(t),zP=()=>!1,u$=t=>e$.test(t),d$=t=>t$.test(t),h$=()=>{const t=mt("colors"),e=mt("spacing"),n=mt("blur"),r=mt("brightness"),s=mt("borderColor"),i=mt("borderRadius"),o=mt("borderSpacing"),a=mt("borderWidth"),l=mt("contrast"),c=mt("grayscale"),d=mt("hueRotate"),h=mt("invert"),f=mt("gap"),m=mt("gradientColorStops"),T=mt("gradientColorStopPositions"),v=mt("inset"),x=mt("margin"),E=mt("opacity"),_=mt("padding"),S=mt("saturate"),O=mt("scale"),D=mt("sepia"),L=mt("skew"),I=mt("space"),b=mt("translate"),C=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Le,e],k=()=>[Le,e],R=()=>["",Xs,Li],F=()=>["auto",Hl,Le],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",Le],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],pe=()=>[Hl,Le];return{cacheSize:500,separator:":",theme:{colors:[Eu],spacing:[Xs,Li],blur:["none","",Vi,Le],brightness:pe(),borderColor:[t],borderRadius:["none","","full",Vi,Le],borderSpacing:k(),borderWidth:R(),contrast:pe(),grayscale:B(),hueRotate:pe(),invert:B(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[n$,Li],inset:N(),margin:N(),opacity:pe(),padding:k(),saturate:pe(),scale:pe(),sepia:B(),skew:pe(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[Vi]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),Le]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wu,Le]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",wu,Le]}],"grid-cols":[{"grid-cols":[Eu]}],"col-start-end":[{col:["auto",{span:["full",wu,Le]},Le]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Eu]}],"row-start-end":[{row:["auto",{span:[wu,Le]},Le]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,e]}],"min-w":[{"min-w":[Le,e,"min","max","fit"]}],"max-w":[{"max-w":[Le,e,"none","full","min","max","fit","prose",{screen:[Vi]},Vi]}],h:[{h:[Le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Vi,Li]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fy]}],"font-family":[{font:[Eu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",Hl,fy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xs,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xs,Li]}],"underline-offset":[{"underline-offset":["auto",Xs,Le]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),i$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",s$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},a$]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Xs,Le]}],"outline-w":[{outline:[Xs,Li]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Xs,Li]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Vi,l$]}],"shadow-color":[{shadow:[Eu]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Vi,Le]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:pe()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:pe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[wu,Le]}],"translate-x":[{"translate-x":[b]}],"translate-y":[{"translate-y":[b]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Xs,Li,fy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},f$=GU(h$);function De(...t){return f$(NP(t))}const p$=AU,WP=y.forwardRef(({className:t,...e},n)=>p.jsx(bP,{ref:n,className:De("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));WP.displayName=bP.displayName;const m$=eE("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),HP=y.forwardRef(({className:t,variant:e,...n},r)=>p.jsx(CP,{ref:r,className:De(m$({variant:e}),t),...n}));HP.displayName=CP.displayName;const g$=y.forwardRef(({className:t,...e},n)=>p.jsx(AP,{ref:n,className:De("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));g$.displayName=AP.displayName;const qP=y.forwardRef(({className:t,...e},n)=>p.jsx(kP,{ref:n,className:De("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(FP,{className:"h-4 w-4"})}));qP.displayName=kP.displayName;const KP=y.forwardRef(({className:t,...e},n)=>p.jsx(IP,{ref:n,className:De("text-sm font-semibold",t),...e}));KP.displayName=IP.displayName;const GP=y.forwardRef(({className:t,...e},n)=>p.jsx(RP,{ref:n,className:De("text-sm opacity-90",t),...e}));GP.displayName=RP.displayName;function QP(){const{toasts:t}=jc();return p.jsxs(p$,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return p.jsxs(HP,{...i,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(KP,{children:n}),r&&p.jsx(GP,{children:r})]}),s,p.jsx(qP,{})]},e)}),p.jsx(WP,{})]})}var Tb=["light","dark"],v$="(prefers-color-scheme: dark)",y$=y.createContext(void 0),_$={setTheme:t=>{},themes:[]},w$=()=>{var t;return(t=y.useContext(y$))!=null?t:_$};y.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Tb.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(T,v=!1,x=!0)=>{let E=o?o[T]:T,_=v?T+"|| ''":`'${E}'`,S="";return s&&x&&!v&&Tb.includes(T)&&(S+=`d.style.colorScheme = '${T}';`),n==="class"?v||E?S+=`c.add(${_})`:S+="null":E&&(S+=`d[s](n,${_})`),S},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${v$}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return y.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var E$=t=>{switch(t){case"success":return S$;case"info":return C$;case"warning":return b$;case"error":return I$;default:return null}},T$=Array(12).fill(0),x$=({visible:t,className:e})=>W.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},W.createElement("div",{className:"sonner-spinner"},T$.map((n,r)=>W.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),S$=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),b$=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),C$=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),I$=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),R$=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},W.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),W.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),A$=()=>{let[t,e]=W.useState(document.hidden);return W.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Y_=1,k$=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Y_++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async l=>{if(i=["resolve",l],W.isValidElement(l))s=!1,this.create({id:n,type:"default",message:l});else if(N$(l)&&!l.ok){s=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:d})}else if(e.success!==void 0){s=!1;let c=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:d})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let c=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:d})}}).finally(()=>{var l;s&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>i[0]==="reject"?c(i[1]):l(i[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Y_++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qn=new k$,P$=(t,e)=>{let n=(e==null?void 0:e.id)||Y_++;return Qn.addToast({title:t,...e,id:n}),n},N$=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",O$=P$,D$=()=>Qn.toasts,M$=()=>Qn.getActiveToasts(),py=Object.assign(O$,{success:Qn.success,info:Qn.info,warning:Qn.warning,error:Qn.error,custom:Qn.custom,message:Qn.message,promise:Qn.promise,dismiss:Qn.dismiss,loading:Qn.loading},{getHistory:D$,getToasts:M$});function L$(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}L$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function kf(t){return t.label!==void 0}var V$=3,F$="32px",j$="16px",xb=4e3,U$=356,$$=14,B$=20,z$=200;function zr(...t){return t.filter(Boolean).join(" ")}function W$(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var H$=t=>{var e,n,r,s,i,o,a,l,c,d,h;let{invert:f,toast:m,unstyled:T,interacting:v,setHeights:x,visibleToasts:E,heights:_,index:S,toasts:O,expanded:D,removeToast:L,defaultRichColors:I,closeButton:b,style:C,cancelButtonStyle:A,actionButtonStyle:N,className:k="",descriptionClassName:R="",duration:F,position:G,gap:K,loadingIcon:Q,expandByDefault:U,classNames:B,icons:ee,closeButtonAriaLabel:pe="Close toast",pauseWhenPageIsHidden:le}=t,[he,ye]=W.useState(null),[qe,rt]=W.useState(null),[se,Ke]=W.useState(!1),[lt,Fe]=W.useState(!1),[Pe,je]=W.useState(!1),[Et,Bt]=W.useState(!1),[_r,wr]=W.useState(!1),[gs,M]=W.useState(0),[j,z]=W.useState(0),ie=W.useRef(m.duration||F||xb),ne=W.useRef(null),Z=W.useRef(null),ge=S===0,ke=S+1<=E,xe=m.type,Me=m.dismissible!==!1,On=m.className||"",al=m.descriptionClassName||"",jr=W.useMemo(()=>_.findIndex(Ie=>Ie.toastId===m.id)||0,[_,m.id]),ea=W.useMemo(()=>{var Ie;return(Ie=m.closeButton)!=null?Ie:b},[m.closeButton,b]),vs=W.useMemo(()=>m.duration||F||xb,[m.duration,F]),Ks=W.useRef(0),Ur=W.useRef(0),Gs=W.useRef(0),Pi=W.useRef(null),[Sv,tu]=G.split("-"),nu=W.useMemo(()=>_.reduce((Ie,Ze,ct)=>ct>=jr?Ie:Ie+Ze.height,0),[_,jr]),ru=A$(),ta=m.invert||f,na=xe==="loading";Ur.current=W.useMemo(()=>jr*K+nu,[jr,nu]),W.useEffect(()=>{ie.current=vs},[vs]),W.useEffect(()=>{Ke(!0)},[]),W.useEffect(()=>{let Ie=Z.current;if(Ie){let Ze=Ie.getBoundingClientRect().height;return z(Ze),x(ct=>[{toastId:m.id,height:Ze,position:m.position},...ct]),()=>x(ct=>ct.filter(nn=>nn.toastId!==m.id))}},[x,m.id]),W.useLayoutEffect(()=>{if(!se)return;let Ie=Z.current,Ze=Ie.style.height;Ie.style.height="auto";let ct=Ie.getBoundingClientRect().height;Ie.style.height=Ze,z(ct),x(nn=>nn.find(Hn=>Hn.toastId===m.id)?nn.map(Hn=>Hn.toastId===m.id?{...Hn,height:ct}:Hn):[{toastId:m.id,height:ct,position:m.position},...nn])},[se,m.title,m.description,x,m.id]);let Er=W.useCallback(()=>{Fe(!0),M(Ur.current),x(Ie=>Ie.filter(Ze=>Ze.toastId!==m.id)),setTimeout(()=>{L(m)},z$)},[m,L,x,Ur]);W.useEffect(()=>{if(m.promise&&xe==="loading"||m.duration===1/0||m.type==="loading")return;let Ie;return D||v||le&&ru?(()=>{if(Gs.current<Ks.current){let Ze=new Date().getTime()-Ks.current;ie.current=ie.current-Ze}Gs.current=new Date().getTime()})():ie.current!==1/0&&(Ks.current=new Date().getTime(),Ie=setTimeout(()=>{var Ze;(Ze=m.onAutoClose)==null||Ze.call(m,m),Er()},ie.current)),()=>clearTimeout(Ie)},[D,v,m,xe,le,ru,Er]),W.useEffect(()=>{m.delete&&Er()},[Er,m.delete]);function Qs(){var Ie,Ze,ct;return ee!=null&&ee.loading?W.createElement("div",{className:zr(B==null?void 0:B.loader,(Ie=m==null?void 0:m.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":xe==="loading"},ee.loading):Q?W.createElement("div",{className:zr(B==null?void 0:B.loader,(Ze=m==null?void 0:m.classNames)==null?void 0:Ze.loader,"sonner-loader"),"data-visible":xe==="loading"},Q):W.createElement(x$,{className:zr(B==null?void 0:B.loader,(ct=m==null?void 0:m.classNames)==null?void 0:ct.loader),visible:xe==="loading"})}return W.createElement("li",{tabIndex:0,ref:Z,className:zr(k,On,B==null?void 0:B.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,B==null?void 0:B.default,B==null?void 0:B[xe],(n=m==null?void 0:m.classNames)==null?void 0:n[xe]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:I,"data-styled":!(m.jsx||m.unstyled||T),"data-mounted":se,"data-promise":!!m.promise,"data-swiped":_r,"data-removed":lt,"data-visible":ke,"data-y-position":Sv,"data-x-position":tu,"data-index":S,"data-front":ge,"data-swiping":Pe,"data-dismissible":Me,"data-type":xe,"data-invert":ta,"data-swipe-out":Et,"data-swipe-direction":qe,"data-expanded":!!(D||U&&se),style:{"--index":S,"--toasts-before":S,"--z-index":O.length-S,"--offset":`${lt?gs:Ur.current}px`,"--initial-height":U?"auto":`${j}px`,...C,...m.style},onDragEnd:()=>{je(!1),ye(null),Pi.current=null},onPointerDown:Ie=>{na||!Me||(ne.current=new Date,M(Ur.current),Ie.target.setPointerCapture(Ie.pointerId),Ie.target.tagName!=="BUTTON"&&(je(!0),Pi.current={x:Ie.clientX,y:Ie.clientY}))},onPointerUp:()=>{var Ie,Ze,ct,nn;if(Et||!Me)return;Pi.current=null;let Hn=Number(((Ie=Z.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yt=Number(((Ze=Z.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ys=new Date().getTime()-((ct=ne.current)==null?void 0:ct.getTime()),rn=he==="x"?Hn:yt,qn=Math.abs(rn)/ys;if(Math.abs(rn)>=B$||qn>.11){M(Ur.current),(nn=m.onDismiss)==null||nn.call(m,m),rt(he==="x"?Hn>0?"right":"left":yt>0?"down":"up"),Er(),Bt(!0),wr(!1);return}je(!1),ye(null)},onPointerMove:Ie=>{var Ze,ct,nn,Hn;if(!Pi.current||!Me||((Ze=window.getSelection())==null?void 0:Ze.toString().length)>0)return;let yt=Ie.clientY-Pi.current.y,ys=Ie.clientX-Pi.current.x,rn=(ct=t.swipeDirections)!=null?ct:W$(G);!he&&(Math.abs(ys)>1||Math.abs(yt)>1)&&ye(Math.abs(ys)>Math.abs(yt)?"x":"y");let qn={x:0,y:0};he==="y"?(rn.includes("top")||rn.includes("bottom"))&&(rn.includes("top")&&yt<0||rn.includes("bottom")&&yt>0)&&(qn.y=yt):he==="x"&&(rn.includes("left")||rn.includes("right"))&&(rn.includes("left")&&ys<0||rn.includes("right")&&ys>0)&&(qn.x=ys),(Math.abs(qn.x)>0||Math.abs(qn.y)>0)&&wr(!0),(nn=Z.current)==null||nn.style.setProperty("--swipe-amount-x",`${qn.x}px`),(Hn=Z.current)==null||Hn.style.setProperty("--swipe-amount-y",`${qn.y}px`)}},ea&&!m.jsx?W.createElement("button",{"aria-label":pe,"data-disabled":na,"data-close-button":!0,onClick:na||!Me?()=>{}:()=>{var Ie;Er(),(Ie=m.onDismiss)==null||Ie.call(m,m)},className:zr(B==null?void 0:B.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=ee==null?void 0:ee.close)!=null?i:R$):null,m.jsx||y.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:W.createElement(W.Fragment,null,xe||m.icon||m.promise?W.createElement("div",{"data-icon":"",className:zr(B==null?void 0:B.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Qs():null,m.type!=="loading"?m.icon||(ee==null?void 0:ee[xe])||E$(xe):null):null,W.createElement("div",{"data-content":"",className:zr(B==null?void 0:B.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},W.createElement("div",{"data-title":"",className:zr(B==null?void 0:B.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?W.createElement("div",{"data-description":"",className:zr(R,al,B==null?void 0:B.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),y.isValidElement(m.cancel)?m.cancel:m.cancel&&kf(m.cancel)?W.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:Ie=>{var Ze,ct;kf(m.cancel)&&Me&&((ct=(Ze=m.cancel).onClick)==null||ct.call(Ze,Ie),Er())},className:zr(B==null?void 0:B.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,y.isValidElement(m.action)?m.action:m.action&&kf(m.action)?W.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||N,onClick:Ie=>{var Ze,ct;kf(m.action)&&((ct=(Ze=m.action).onClick)==null||ct.call(Ze,Ie),!Ie.defaultPrevented&&Er())},className:zr(B==null?void 0:B.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function Sb(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function q$(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?j$:F$;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var K$=y.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:c,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:T=V$,toastOptions:v,dir:x=Sb(),gap:E=$$,loadingIcon:_,icons:S,containerAriaLabel:O="Notifications",pauseWhenPageIsHidden:D}=t,[L,I]=W.useState([]),b=W.useMemo(()=>Array.from(new Set([r].concat(L.filter(le=>le.position).map(le=>le.position)))),[L,r]),[C,A]=W.useState([]),[N,k]=W.useState(!1),[R,F]=W.useState(!1),[G,K]=W.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=W.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=W.useRef(null),ee=W.useRef(!1),pe=W.useCallback(le=>{I(he=>{var ye;return(ye=he.find(qe=>qe.id===le.id))!=null&&ye.delete||Qn.dismiss(le.id),he.filter(({id:qe})=>qe!==le.id)})},[]);return W.useEffect(()=>Qn.subscribe(le=>{if(le.dismiss){I(he=>he.map(ye=>ye.id===le.id?{...ye,delete:!0}:ye));return}setTimeout(()=>{sP.flushSync(()=>{I(he=>{let ye=he.findIndex(qe=>qe.id===le.id);return ye!==-1?[...he.slice(0,ye),{...he[ye],...le},...he.slice(ye+1)]:[le,...he]})})})}),[]),W.useEffect(()=>{if(d!=="system"){K(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window>"u")return;let le=window.matchMedia("(prefers-color-scheme: dark)");try{le.addEventListener("change",({matches:he})=>{K(he?"dark":"light")})}catch{le.addListener(({matches:ye})=>{try{K(ye?"dark":"light")}catch(qe){console.error(qe)}})}},[d]),W.useEffect(()=>{L.length<=1&&k(!1)},[L]),W.useEffect(()=>{let le=he=>{var ye,qe;s.every(rt=>he[rt]||he.code===rt)&&(k(!0),(ye=Q.current)==null||ye.focus()),he.code==="Escape"&&(document.activeElement===Q.current||(qe=Q.current)!=null&&qe.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",le),()=>document.removeEventListener("keydown",le)},[s]),W.useEffect(()=>{if(Q.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,ee.current=!1)}},[Q.current]),W.createElement("section",{ref:e,"aria-label":`${O} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},b.map((le,he)=>{var ye;let[qe,rt]=le.split("-");return L.length?W.createElement("ol",{key:le,dir:x==="auto"?Sb():x,tabIndex:-1,ref:Q,className:a,"data-sonner-toaster":!0,"data-theme":G,"data-y-position":qe,"data-lifted":N&&L.length>1&&!i,"data-x-position":rt,style:{"--front-toast-height":`${((ye=C[0])==null?void 0:ye.height)||0}px`,"--width":`${U$}px`,"--gap":`${E}px`,...m,...q$(l,c)},onBlur:se=>{ee.current&&!se.currentTarget.contains(se.relatedTarget)&&(ee.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,B.current=se.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{R||k(!1)},onDragEnd:()=>k(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},L.filter(se=>!se.position&&he===0||se.position===le).map((se,Ke)=>{var lt,Fe;return W.createElement(H$,{key:se.id,icons:S,index:Ke,toast:se,defaultRichColors:h,duration:(lt=v==null?void 0:v.duration)!=null?lt:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:T,closeButton:(Fe=v==null?void 0:v.closeButton)!=null?Fe:o,interacting:R,position:le,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:pe,toasts:L.filter(Pe=>Pe.position==se.position),heights:C.filter(Pe=>Pe.position==se.position),setHeights:A,expandByDefault:i,gap:E,loadingIcon:_,expanded:N,pauseWhenPageIsHidden:D,swipeDirections:t.swipeDirections})})):null}))});const G$=({...t})=>{const{theme:e="system"}=w$();return p.jsx(K$,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Q$=tA.useId||(()=>{}),Y$=0;function mo(t){const[e,n]=y.useState(Q$());return gn(()=>{n(r=>r??String(Y$++))},[t]),e?`radix-${e}`:""}const Z$=["top","right","bottom","left"],Io=Math.min,ar=Math.max,Kp=Math.round,Pf=Math.floor,Ns=t=>({x:t,y:t}),X$={left:"right",right:"left",bottom:"top",top:"bottom"},J$={start:"end",end:"start"};function Z_(t,e,n){return ar(t,Io(e,n))}function wi(t,e){return typeof t=="function"?t(e):t}function Ei(t){return t.split("-")[0]}function $c(t){return t.split("-")[1]}function nE(t){return t==="x"?"y":"x"}function rE(t){return t==="y"?"height":"width"}function Ro(t){return["top","bottom"].includes(Ei(t))?"y":"x"}function sE(t){return nE(Ro(t))}function e9(t,e,n){n===void 0&&(n=!1);const r=$c(t),s=sE(t),i=rE(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Gp(o)),[o,Gp(o)]}function t9(t){const e=Gp(t);return[X_(t),e,X_(e)]}function X_(t){return t.replace(/start|end/g,e=>J$[e])}function n9(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function r9(t,e,n,r){const s=$c(t);let i=n9(Ei(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(X_)))),i}function Gp(t){return t.replace(/left|right|bottom|top/g,e=>X$[e])}function s9(t){return{top:0,right:0,bottom:0,left:0,...t}}function YP(t){return typeof t!="number"?s9(t):{top:t,right:t,bottom:t,left:t}}function Qp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function bb(t,e,n){let{reference:r,floating:s}=t;const i=Ro(e),o=sE(e),a=rE(o),l=Ei(e),c=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch($c(e)){case"start":m[o]-=f*(n&&c?-1:1);break;case"end":m[o]+=f*(n&&c?-1:1);break}return m}const i9=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=bb(c,r,l),f=r,m={},T=0;for(let v=0;v<a.length;v++){const{name:x,fn:E}=a[v],{x:_,y:S,data:O,reset:D}=await E({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=_??d,h=S??h,m={...m,[x]:{...m[x],...O}},D&&T<=50&&(T++,typeof D=="object"&&(D.placement&&(f=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:d,y:h}=bb(c,f,l)),v=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Rd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=wi(e,t),T=YP(m),x=a[f?h==="floating"?"reference":"floating":h],E=Qp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),O=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},D=Qp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:S,strategy:l}):_);return{top:(E.top-D.top+T.top)/O.y,bottom:(D.bottom-E.bottom+T.bottom)/O.y,left:(E.left-D.left+T.left)/O.x,right:(D.right-E.right+T.right)/O.x}}const o9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=wi(t,e)||{};if(c==null)return{};const h=YP(d),f={x:n,y:r},m=sE(s),T=rE(m),v=await o.getDimensions(c),x=m==="y",E=x?"top":"left",_=x?"bottom":"right",S=x?"clientHeight":"clientWidth",O=i.reference[T]+i.reference[m]-f[m]-i.floating[T],D=f[m]-i.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=L?L[S]:0;(!I||!await(o.isElement==null?void 0:o.isElement(L)))&&(I=a.floating[S]||i.floating[T]);const b=O/2-D/2,C=I/2-v[T]/2-1,A=Io(h[E],C),N=Io(h[_],C),k=A,R=I-v[T]-N,F=I/2-v[T]/2+b,G=Z_(k,F,R),K=!l.arrow&&$c(s)!=null&&F!==G&&i.reference[T]/2-(F<k?A:N)-v[T]/2<0,Q=K?F<k?F-k:F-R:0;return{[m]:f[m]+Q,data:{[m]:G,centerOffset:F-G-Q,...K&&{alignmentOffset:Q}},reset:K}}}),a9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:v=!0,...x}=wi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=Ei(s),_=Ro(a),S=Ei(a)===a,O=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=f||(S||!v?[Gp(a)]:t9(a)),L=T!=="none";!f&&L&&D.push(...r9(a,v,T,O));const I=[a,...D],b=await Rd(e,x),C=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&C.push(b[E]),h){const F=e9(s,o,O);C.push(b[F[0]],b[F[1]])}if(A=[...A,{placement:s,overflows:C}],!C.every(F=>F<=0)){var N,k;const F=(((N=i.flip)==null?void 0:N.index)||0)+1,G=I[F];if(G)return{data:{index:F,overflows:A},reset:{placement:G}};let K=(k=A.filter(Q=>Q.overflows[0]<=0).sort((Q,U)=>Q.overflows[1]-U.overflows[1])[0])==null?void 0:k.placement;if(!K)switch(m){case"bestFit":{var R;const Q=(R=A.filter(U=>{if(L){const B=Ro(U.placement);return B===_||B==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(B=>B>0).reduce((B,ee)=>B+ee,0)]).sort((U,B)=>U[1]-B[1])[0])==null?void 0:R[0];Q&&(K=Q);break}case"initialPlacement":K=a;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function Cb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ib(t){return Z$.some(e=>t[e]>=0)}const l9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=wi(t,e);switch(r){case"referenceHidden":{const i=await Rd(e,{...s,elementContext:"reference"}),o=Cb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Ib(o)}}}case"escaped":{const i=await Rd(e,{...s,altBoundary:!0}),o=Cb(i,n.floating);return{data:{escapedOffsets:o,escaped:Ib(o)}}}default:return{}}}}};async function c9(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ei(n),a=$c(n),l=Ro(n)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=wi(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:T}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof T=="number"&&(m=a==="end"?T*-1:T),l?{x:m*d,y:f*c}:{x:f*c,y:m*d}}const u9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await c9(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},d9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:E,y:_}=x;return{x:E,y:_}}},...l}=wi(t,e),c={x:n,y:r},d=await Rd(e,l),h=Ro(Ei(s)),f=nE(h);let m=c[f],T=c[h];if(i){const x=f==="y"?"top":"left",E=f==="y"?"bottom":"right",_=m+d[x],S=m-d[E];m=Z_(_,m,S)}if(o){const x=h==="y"?"top":"left",E=h==="y"?"bottom":"right",_=T+d[x],S=T-d[E];T=Z_(_,T,S)}const v=a.fn({...e,[f]:m,[h]:T});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[f]:i,[h]:o}}}}}},h9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=wi(t,e),d={x:n,y:r},h=Ro(s),f=nE(h);let m=d[f],T=d[h];const v=wi(a,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const S=f==="y"?"height":"width",O=i.reference[f]-i.floating[S]+x.mainAxis,D=i.reference[f]+i.reference[S]-x.mainAxis;m<O?m=O:m>D&&(m=D)}if(c){var E,_;const S=f==="y"?"width":"height",O=["top","left"].includes(Ei(s)),D=i.reference[h]-i.floating[S]+(O&&((E=o.offset)==null?void 0:E[h])||0)+(O?0:x.crossAxis),L=i.reference[h]+i.reference[S]+(O?0:((_=o.offset)==null?void 0:_[h])||0)-(O?x.crossAxis:0);T<D?T=D:T>L&&(T=L)}return{[f]:m,[h]:T}}}},f9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=wi(t,e),d=await Rd(e,c),h=Ei(s),f=$c(s),m=Ro(s)==="y",{width:T,height:v}=i.floating;let x,E;h==="top"||h==="bottom"?(x=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,x=f==="end"?"top":"bottom");const _=v-d.top-d.bottom,S=T-d.left-d.right,O=Io(v-d[x],_),D=Io(T-d[E],S),L=!e.middlewareData.shift;let I=O,b=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(b=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=_),L&&!f){const A=ar(d.left,0),N=ar(d.right,0),k=ar(d.top,0),R=ar(d.bottom,0);m?b=T-2*(A!==0||N!==0?A+N:ar(d.left,d.right)):I=v-2*(k!==0||R!==0?k+R:ar(d.top,d.bottom))}await l({...e,availableWidth:b,availableHeight:I});const C=await o.getDimensions(a.floating);return T!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Eg(){return typeof window<"u"}function Bc(t){return ZP(t)?(t.nodeName||"").toLowerCase():"#document"}function fr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ws(t){var e;return(e=(ZP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ZP(t){return Eg()?t instanceof Node||t instanceof fr(t).Node:!1}function ls(t){return Eg()?t instanceof Element||t instanceof fr(t).Element:!1}function Fs(t){return Eg()?t instanceof HTMLElement||t instanceof fr(t).HTMLElement:!1}function Rb(t){return!Eg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fr(t).ShadowRoot}function bh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=cs(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function p9(t){return["table","td","th"].includes(Bc(t))}function Tg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function iE(t){const e=oE(),n=ls(t)?cs(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function m9(t){let e=Ao(t);for(;Fs(e)&&!vc(e);){if(iE(e))return e;if(Tg(e))return null;e=Ao(e)}return null}function oE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vc(t){return["html","body","#document"].includes(Bc(t))}function cs(t){return fr(t).getComputedStyle(t)}function xg(t){return ls(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ao(t){if(Bc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Rb(t)&&t.host||Ws(t);return Rb(e)?e.host:e}function XP(t){const e=Ao(t);return vc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Fs(e)&&bh(e)?e:XP(e)}function Ad(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=XP(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=fr(s);if(i){const a=J_(o);return e.concat(o,o.visualViewport||[],bh(s)?s:[],a&&n?Ad(a):[])}return e.concat(s,Ad(s,[],n))}function J_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function JP(t){const e=cs(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Fs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Kp(n)!==i||Kp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function aE(t){return ls(t)?t:t.contextElement}function ql(t){const e=aE(t);if(!Fs(e))return Ns(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=JP(e);let o=(i?Kp(n.width):n.width)/r,a=(i?Kp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const g9=Ns(0);function e1(t){const e=fr(t);return!oE()||!e.visualViewport?g9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function v9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==fr(t)?!1:e}function Na(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=aE(t);let o=Ns(1);e&&(r?ls(r)&&(o=ql(r)):o=ql(t));const a=v9(i,n,r)?e1(i):Ns(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=fr(i),m=r&&ls(r)?fr(r):r;let T=f,v=J_(T);for(;v&&r&&m!==T;){const x=ql(v),E=v.getBoundingClientRect(),_=cs(v),S=E.left+(v.clientLeft+parseFloat(_.paddingLeft))*x.x,O=E.top+(v.clientTop+parseFloat(_.paddingTop))*x.y;l*=x.x,c*=x.y,d*=x.x,h*=x.y,l+=S,c+=O,T=fr(v),v=J_(T)}}return Qp({width:d,height:h,x:l,y:c})}function lE(t,e){const n=xg(t).scrollLeft;return e?e.left+n:Na(Ws(t)).left+n}function t1(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:lE(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function y9(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ws(r),a=e?Tg(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Ns(1);const d=Ns(0),h=Fs(r);if((h||!h&&!i)&&((Bc(r)!=="body"||bh(o))&&(l=xg(r)),Fs(r))){const m=Na(r);c=ql(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?t1(o,l,!0):Ns(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+f.x,y:n.y*c.y-l.scrollTop*c.y+d.y+f.y}}function _9(t){return Array.from(t.getClientRects())}function w9(t){const e=Ws(t),n=xg(t),r=t.ownerDocument.body,s=ar(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ar(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+lE(t);const a=-n.scrollTop;return cs(r).direction==="rtl"&&(o+=ar(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function E9(t,e){const n=fr(t),r=Ws(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=oE();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function T9(t,e){const n=Na(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Fs(t)?ql(t):Ns(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function Ab(t,e,n){let r;if(e==="viewport")r=E9(t,n);else if(e==="document")r=w9(Ws(t));else if(ls(e))r=T9(e,n);else{const s=e1(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Qp(r)}function n1(t,e){const n=Ao(t);return n===e||!ls(n)||vc(n)?!1:cs(n).position==="fixed"||n1(n,e)}function x9(t,e){const n=e.get(t);if(n)return n;let r=Ad(t,[],!1).filter(a=>ls(a)&&Bc(a)!=="body"),s=null;const i=cs(t).position==="fixed";let o=i?Ao(t):t;for(;ls(o)&&!vc(o);){const a=cs(o),l=iE(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||bh(o)&&!l&&n1(t,o))?r=r.filter(d=>d!==o):s=a,o=Ao(o)}return e.set(t,r),r}function S9(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Tg(e)?[]:x9(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=Ab(e,d,s);return c.top=ar(h.top,c.top),c.right=Io(h.right,c.right),c.bottom=Io(h.bottom,c.bottom),c.left=ar(h.left,c.left),c},Ab(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function b9(t){const{width:e,height:n}=JP(t);return{width:e,height:n}}function C9(t,e,n){const r=Fs(e),s=Ws(e),i=n==="fixed",o=Na(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ns(0);if(r||!r&&!i)if((Bc(e)!=="body"||bh(s))&&(a=xg(e)),r){const f=Na(e,!0,i,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&(l.x=lE(s));const c=s&&!r&&!i?t1(s,a):Ns(0),d=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:d,y:h,width:o.width,height:o.height}}function my(t){return cs(t).position==="static"}function kb(t,e){if(!Fs(t)||cs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ws(t)===n&&(n=n.ownerDocument.body),n}function r1(t,e){const n=fr(t);if(Tg(t))return n;if(!Fs(t)){let s=Ao(t);for(;s&&!vc(s);){if(ls(s)&&!my(s))return s;s=Ao(s)}return n}let r=kb(t,e);for(;r&&p9(r)&&my(r);)r=kb(r,e);return r&&vc(r)&&my(r)&&!iE(r)?n:r||m9(t)||n}const I9=async function(t){const e=this.getOffsetParent||r1,n=this.getDimensions,r=await n(t.floating);return{reference:C9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function R9(t){return cs(t).direction==="rtl"}const A9={convertOffsetParentRelativeRectToViewportRelativeRect:y9,getDocumentElement:Ws,getClippingRect:S9,getOffsetParent:r1,getElementRects:I9,getClientRects:_9,getDimensions:b9,getScale:ql,isElement:ls,isRTL:R9};function s1(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function k9(t,e){let n=null,r;const s=Ws(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=c;if(a||e(),!f||!m)return;const T=Pf(h),v=Pf(s.clientWidth-(d+f)),x=Pf(s.clientHeight-(h+m)),E=Pf(d),S={rootMargin:-T+"px "+-v+"px "+-x+"px "+-E+"px",threshold:ar(0,Io(1,l))||1};let O=!0;function D(L){const I=L[0].intersectionRatio;if(I!==l){if(!O)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!s1(c,t.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(D,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,S)}n.observe(t)}return o(!0),i}function P9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=aE(t),d=s||i?[...c?Ad(c):[],...Ad(e)]:[];d.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const h=c&&a?k9(c,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(E=>{let[_]=E;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let T,v=l?Na(t):null;l&&x();function x(){const E=Na(t);v&&!s1(v,E)&&n(),v=E,T=requestAnimationFrame(x)}return n(),()=>{var E;d.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(E=m)==null||E.disconnect(),m=null,l&&cancelAnimationFrame(T)}}const N9=u9,O9=d9,D9=a9,M9=f9,L9=l9,Pb=o9,V9=h9,F9=(t,e,n)=>{const r=new Map,s={platform:A9,...n},i={...s.platform,_c:r};return i9(t,e,{...s,platform:i})};var ap=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Yp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Yp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Yp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function i1(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Nb(t,e){const n=i1(t);return Math.round(e*n)/n}function gy(t){const e=y.useRef(t);return ap(()=>{e.current=t}),e}function j9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=y.useState(r);Yp(f,r)||m(r);const[T,v]=y.useState(null),[x,E]=y.useState(null),_=y.useCallback(U=>{U!==L.current&&(L.current=U,v(U))},[]),S=y.useCallback(U=>{U!==I.current&&(I.current=U,E(U))},[]),O=i||T,D=o||x,L=y.useRef(null),I=y.useRef(null),b=y.useRef(d),C=l!=null,A=gy(l),N=gy(s),k=gy(c),R=y.useCallback(()=>{if(!L.current||!I.current)return;const U={placement:e,strategy:n,middleware:f};N.current&&(U.platform=N.current),F9(L.current,I.current,U).then(B=>{const ee={...B,isPositioned:k.current!==!1};F.current&&!Yp(b.current,ee)&&(b.current=ee,Ya.flushSync(()=>{h(ee)}))})},[f,e,n,N,k]);ap(()=>{c===!1&&b.current.isPositioned&&(b.current.isPositioned=!1,h(U=>({...U,isPositioned:!1})))},[c]);const F=y.useRef(!1);ap(()=>(F.current=!0,()=>{F.current=!1}),[]),ap(()=>{if(O&&(L.current=O),D&&(I.current=D),O&&D){if(A.current)return A.current(O,D,R);R()}},[O,D,R,A,C]);const G=y.useMemo(()=>({reference:L,floating:I,setReference:_,setFloating:S}),[_,S]),K=y.useMemo(()=>({reference:O,floating:D}),[O,D]),Q=y.useMemo(()=>{const U={position:n,left:0,top:0};if(!K.floating)return U;const B=Nb(K.floating,d.x),ee=Nb(K.floating,d.y);return a?{...U,transform:"translate("+B+"px, "+ee+"px)",...i1(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:ee}},[n,a,K.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:R,refs:G,elements:K,floatingStyles:Q}),[d,R,G,K,Q])}const U9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Pb({element:r.current,padding:s}).fn(n):{}:r?Pb({element:r,padding:s}).fn(n):{}}}},$9=(t,e)=>({...N9(t),options:[t,e]}),B9=(t,e)=>({...O9(t),options:[t,e]}),z9=(t,e)=>({...V9(t),options:[t,e]}),W9=(t,e)=>({...D9(t),options:[t,e]}),H9=(t,e)=>({...M9(t),options:[t,e]}),q9=(t,e)=>({...L9(t),options:[t,e]}),K9=(t,e)=>({...U9(t),options:[t,e]});var G9="Arrow",o1=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return p.jsx(Ce.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});o1.displayName=G9;var Q9=o1;function a1(t){const[e,n]=y.useState(void 0);return gn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var cE="Popper",[l1,Sg]=zs(cE),[Y9,c1]=l1(cE),u1=t=>{const{__scopePopper:e,children:n}=t,[r,s]=y.useState(null);return p.jsx(Y9,{scope:e,anchor:r,onAnchorChange:s,children:n})};u1.displayName=cE;var d1="PopperAnchor",h1=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=c1(d1,n),o=y.useRef(null),a=Je(e,o);return y.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:p.jsx(Ce.div,{...s,ref:a})});h1.displayName=d1;var uE="PopperContent",[Z9,X9]=l1(uE),f1=y.forwardRef((t,e)=>{var se,Ke,lt,Fe,Pe,je;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:T,...v}=t,x=c1(uE,n),[E,_]=y.useState(null),S=Je(e,Et=>_(Et)),[O,D]=y.useState(null),L=a1(O),I=(L==null?void 0:L.width)??0,b=(L==null?void 0:L.height)??0,C=r+(i!=="center"?"-"+i:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},N=Array.isArray(c)?c:[c],k=N.length>0,R={padding:A,boundary:N.filter(e5),altBoundary:k},{refs:F,floatingStyles:G,placement:K,isPositioned:Q,middlewareData:U}=j9({strategy:"fixed",placement:C,whileElementsMounted:(...Et)=>P9(...Et,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[$9({mainAxis:s+b,alignmentAxis:o}),l&&B9({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?z9():void 0,...R}),l&&W9({...R}),H9({...R,apply:({elements:Et,rects:Bt,availableWidth:_r,availableHeight:wr})=>{const{width:gs,height:M}=Bt.reference,j=Et.floating.style;j.setProperty("--radix-popper-available-width",`${_r}px`),j.setProperty("--radix-popper-available-height",`${wr}px`),j.setProperty("--radix-popper-anchor-width",`${gs}px`),j.setProperty("--radix-popper-anchor-height",`${M}px`)}}),O&&K9({element:O,padding:a}),t5({arrowWidth:I,arrowHeight:b}),f&&q9({strategy:"referenceHidden",...R})]}),[B,ee]=g1(K),pe=Vt(T);gn(()=>{Q&&(pe==null||pe())},[Q,pe]);const le=(se=U.arrow)==null?void 0:se.x,he=(Ke=U.arrow)==null?void 0:Ke.y,ye=((lt=U.arrow)==null?void 0:lt.centerOffset)!==0,[qe,rt]=y.useState();return gn(()=>{E&&rt(window.getComputedStyle(E).zIndex)},[E]),p.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:Q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:qe,"--radix-popper-transform-origin":[(Fe=U.transformOrigin)==null?void 0:Fe.x,(Pe=U.transformOrigin)==null?void 0:Pe.y].join(" "),...((je=U.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(Z9,{scope:n,placedSide:B,onArrowChange:D,arrowX:le,arrowY:he,shouldHideArrow:ye,children:p.jsx(Ce.div,{"data-side":B,"data-align":ee,...v,ref:S,style:{...v.style,animation:Q?void 0:"none"}})})})});f1.displayName=uE;var p1="PopperArrow",J9={top:"bottom",right:"left",bottom:"top",left:"right"},m1=y.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=X9(p1,r),o=J9[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(Q9,{...s,ref:n,style:{...s.style,display:"block"}})})});m1.displayName=p1;function e5(t){return t!==null}var t5=t=>({name:"transformOrigin",options:t,fn(e){var x,E,_;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=g1(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,m=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let T="",v="";return c==="bottom"?(T=o?h:`${f}px`,v=`${-l}px`):c==="top"?(T=o?h:`${f}px`,v=`${r.floating.height+l}px`):c==="right"?(T=`${-l}px`,v=o?h:`${m}px`):c==="left"&&(T=`${r.floating.width+l}px`,v=o?h:`${m}px`),{data:{x:T,y:v}}}});function g1(t){const[e,n="center"]=t.split("-");return[e,n]}var n5=u1,v1=h1,y1=f1,_1=m1,[bg,ate]=zs("Tooltip",[Sg]),dE=Sg(),w1="TooltipProvider",r5=700,Ob="tooltip.open",[s5,E1]=bg(w1),T1=t=>{const{__scopeTooltip:e,delayDuration:n=r5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=y.useState(!0),l=y.useRef(!1),c=y.useRef(0);return y.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),p.jsx(s5,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:y.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:y.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};T1.displayName=w1;var x1="Tooltip",[lte,Cg]=bg(x1),ew="TooltipTrigger",i5=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Cg(ew,n),i=E1(ew,n),o=dE(n),a=y.useRef(null),l=Je(e,a,s.onTriggerChange),c=y.useRef(!1),d=y.useRef(!1),h=y.useCallback(()=>c.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(v1,{asChild:!0,...o,children:p.jsx(Ce.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:me(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:me(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:me(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});i5.displayName=ew;var o5="TooltipPortal",[cte,a5]=bg(o5,{forceMount:void 0}),yc="TooltipContent",S1=y.forwardRef((t,e)=>{const n=a5(yc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Cg(yc,t.__scopeTooltip);return p.jsx(Vr,{present:r||o.open,children:o.disableHoverableContent?p.jsx(b1,{side:s,...i,ref:e}):p.jsx(l5,{side:s,...i,ref:e})})}),l5=y.forwardRef((t,e)=>{const n=Cg(yc,t.__scopeTooltip),r=E1(yc,t.__scopeTooltip),s=y.useRef(null),i=Je(e,s),[o,a]=y.useState(null),{trigger:l,onClose:c}=n,d=s.current,{onPointerInTransitChange:h}=r,f=y.useCallback(()=>{a(null),h(!1)},[h]),m=y.useCallback((T,v)=>{const x=T.currentTarget,E={x:T.clientX,y:T.clientY},_=h5(E,x.getBoundingClientRect()),S=f5(E,_),O=p5(v.getBoundingClientRect()),D=g5([...S,...O]);a(D),h(!0)},[h]);return y.useEffect(()=>()=>f(),[f]),y.useEffect(()=>{if(l&&d){const T=x=>m(x,d),v=x=>m(x,l);return l.addEventListener("pointerleave",T),d.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",T),d.removeEventListener("pointerleave",v)}}},[l,d,m,f]),y.useEffect(()=>{if(o){const T=v=>{const x=v.target,E={x:v.clientX,y:v.clientY},_=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),S=!m5(E,o);_?f():S&&(f(),c())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[l,d,o,c,f]),p.jsx(b1,{...t,ref:i})}),[c5,u5]=bg(x1,{isInside:!1}),b1=y.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Cg(yc,n),c=dE(n),{onClose:d}=l;return y.useEffect(()=>(document.addEventListener(Ob,d),()=>document.removeEventListener(Ob,d)),[d]),y.useEffect(()=>{if(l.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),p.jsx(xh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:p.jsxs(y1,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(aP,{children:r}),p.jsx(c5,{scope:n,isInside:!0,children:p.jsx(dU,{id:l.contentId,role:"tooltip",children:s||r})})]})})});S1.displayName=yc;var C1="TooltipArrow",d5=y.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=dE(n);return u5(C1,n).isInside?null:p.jsx(_1,{...s,...r,ref:e})});d5.displayName=C1;function h5(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function f5(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function p5(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function m5(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,d=e[o].y;l>r!=d>r&&n<(c-a)*(r-l)/(d-l)+a&&(s=!s)}return s}function g5(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),v5(e)}function v5(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var y5=T1,I1=S1;const _5=y5,w5=y.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(I1,{ref:r,sideOffset:e,className:De("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));w5.displayName=I1.displayName;var Ig=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rg=typeof window>"u"||"Deno"in globalThis;function qr(){}function E5(t,e){return typeof t=="function"?t(e):t}function T5(t){return typeof t=="number"&&t>=0&&t!==1/0}function x5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Db(t,e){return typeof t=="function"?t(e):t}function S5(t,e){return typeof t=="function"?t(e):t}function Mb(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==hE(o,e.options))return!1}else if(!Pd(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Lb(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(kd(e.options.mutationKey)!==kd(i))return!1}else if(!Pd(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function hE(t,e){return((e==null?void 0:e.queryKeyHashFn)||kd)(t)}function kd(t){return JSON.stringify(t,(e,n)=>tw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Pd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Pd(t[n],e[n])):!1}function R1(t,e){if(t===e)return t;const n=Vb(t)&&Vb(e);if(n||tw(t)&&tw(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const d=n?c:i[c];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=R1(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function Vb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function tw(t){if(!Fb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Fb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Fb(t){return Object.prototype.toString.call(t)==="[object Object]"}function b5(t){return new Promise(e=>{setTimeout(e,t)})}function C5(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?R1(t,e):e}function I5(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function R5(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var fE=Symbol();function A1(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===fE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var va,Yi,tc,LR,A5=(LR=class extends Ig{constructor(){super();tt(this,va);tt(this,Yi);tt(this,tc);Ne(this,tc,e=>{if(!Rg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,Yi)||this.setEventListener(H(this,tc))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,Yi))==null||e.call(this),Ne(this,Yi,void 0))}setEventListener(e){var n;Ne(this,tc,e),(n=H(this,Yi))==null||n.call(this),Ne(this,Yi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){H(this,va)!==e&&(Ne(this,va,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof H(this,va)=="boolean"?H(this,va):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},va=new WeakMap,Yi=new WeakMap,tc=new WeakMap,LR),k1=new A5,nc,Zi,rc,VR,k5=(VR=class extends Ig{constructor(){super();tt(this,nc,!0);tt(this,Zi);tt(this,rc);Ne(this,rc,e=>{if(!Rg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,Zi)||this.setEventListener(H(this,rc))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,Zi))==null||e.call(this),Ne(this,Zi,void 0))}setEventListener(e){var n;Ne(this,rc,e),(n=H(this,Zi))==null||n.call(this),Ne(this,Zi,e(this.setOnline.bind(this)))}setOnline(e){H(this,nc)!==e&&(Ne(this,nc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return H(this,nc)}},nc=new WeakMap,Zi=new WeakMap,rc=new WeakMap,VR),Zp=new k5;function P5(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function N5(t){return Math.min(1e3*2**t,3e4)}function P1(t){return(t??"online")==="online"?Zp.isOnline():!0}var N1=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function vy(t){return t instanceof N1}function O1(t){let e=!1,n=0,r=!1,s;const i=P5(),o=v=>{var x;r||(f(new N1(v)),(x=t.abort)==null||x.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>k1.isFocused()&&(t.networkMode==="always"||Zp.isOnline())&&t.canRun(),d=()=>P1(t.networkMode)&&t.canRun(),h=v=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,v),s==null||s(),i.resolve(v))},f=v=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,v),s==null||s(),i.reject(v))},m=()=>new Promise(v=>{var x;s=E=>{(r||c())&&v(E)},(x=t.onPause)==null||x.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),T=()=>{if(r)return;let v;const x=n===0?t.initialPromise:void 0;try{v=x??t.fn()}catch(E){v=Promise.reject(E)}Promise.resolve(v).then(h).catch(E=>{var L;if(r)return;const _=t.retry??(Rg?0:3),S=t.retryDelay??N5,O=typeof S=="function"?S(n,E):S,D=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,E);if(e||!D){f(E);return}n++,(L=t.onFail)==null||L.call(t,n,E),b5(O).then(()=>c()?void 0:m()).then(()=>{e?f(E):T()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?T():m().then(T),i)}}function O5(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Vn=O5(),ya,FR,D1=(FR=class{constructor(){tt(this,ya)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),T5(this.gcTime)&&Ne(this,ya,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Rg?1/0:5*60*1e3))}clearGcTimeout(){H(this,ya)&&(clearTimeout(H(this,ya)),Ne(this,ya,void 0))}},ya=new WeakMap,FR),sc,ic,Tr,_a,bn,gh,wa,Kr,ei,jR,D5=(jR=class extends D1{constructor(n){super();tt(this,Kr);tt(this,sc);tt(this,ic);tt(this,Tr);tt(this,_a);tt(this,bn);tt(this,gh);tt(this,wa);Ne(this,wa,!1),Ne(this,gh,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ne(this,_a,n.client),Ne(this,Tr,H(this,_a).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ne(this,sc,L5(this.options)),this.state=n.state??H(this,sc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=H(this,bn))==null?void 0:n.promise}setOptions(n){this.options={...H(this,gh),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Tr).remove(this)}setData(n,r){const s=C5(this.state.data,n,this.options);return En(this,Kr,ei).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){En(this,Kr,ei).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=H(this,bn))==null?void 0:s.promise;return(i=H(this,bn))==null||i.cancel(n),r?r.then(qr).catch(qr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,sc))}isActive(){return this.observers.some(n=>S5(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!x5(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,bn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,bn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),H(this,Tr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(H(this,bn)&&(H(this,wa)?H(this,bn).cancel({revert:!0}):H(this,bn).cancelRetry()),this.scheduleGc()),H(this,Tr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||En(this,Kr,ei).call(this,{type:"invalidate"})}fetch(n,r){var c,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,bn))return H(this,bn).continueRetry(),H(this,bn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Ne(this,wa,!0),s.signal)})},o=()=>{const f=A1(this.options,r),m={client:H(this,_a),queryKey:this.queryKey,meta:this.meta};return i(m),Ne(this,wa,!1),this.options.persister?this.options.persister(f,m,this):f(m)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,_a),state:this.state,fetchFn:o};i(a),(c=this.options.behavior)==null||c.onFetch(a,this),Ne(this,ic,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&En(this,Kr,ei).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const l=f=>{var m,T,v,x;vy(f)&&f.silent||En(this,Kr,ei).call(this,{type:"error",error:f}),vy(f)||((T=(m=H(this,Tr).config).onError)==null||T.call(m,f,this),(x=(v=H(this,Tr).config).onSettled)==null||x.call(v,this.state.data,f,this)),this.scheduleGc()};return Ne(this,bn,O1({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var m,T,v,x;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(E){l(E);return}(T=(m=H(this,Tr).config).onSuccess)==null||T.call(m,f,this),(x=(v=H(this,Tr).config).onSettled)==null||x.call(v,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,m)=>{En(this,Kr,ei).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{En(this,Kr,ei).call(this,{type:"pause"})},onContinue:()=>{En(this,Kr,ei).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),H(this,bn).start()}},sc=new WeakMap,ic=new WeakMap,Tr=new WeakMap,_a=new WeakMap,bn=new WeakMap,gh=new WeakMap,wa=new WeakMap,Kr=new WeakSet,ei=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...M5(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return vy(i)&&i.revert&&H(this,ic)?{...H(this,ic),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Vn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,Tr).notify({query:this,type:"updated",action:n})})},jR);function M5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:P1(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function L5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ts,UR,V5=(UR=class extends Ig{constructor(e={}){super();tt(this,Ts);this.config=e,Ne(this,Ts,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??hE(s,n);let o=this.get(i);return o||(o=new D5({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){H(this,Ts).has(e.queryHash)||(H(this,Ts).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=H(this,Ts).get(e.queryHash);n&&(e.destroy(),n===e&&H(this,Ts).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return H(this,Ts).get(e)}getAll(){return[...H(this,Ts).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Mb(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Mb(e,r)):n}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ts=new WeakMap,UR),xs,Dn,Ea,Ss,ji,$R,F5=($R=class extends D1{constructor(n){super();tt(this,Ss);tt(this,xs);tt(this,Dn);tt(this,Ea);this.mutationId=n.mutationId,Ne(this,Dn,n.mutationCache),Ne(this,xs,[]),this.state=n.state||j5(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){H(this,xs).includes(n)||(H(this,xs).push(n),this.clearGcTimeout(),H(this,Dn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ne(this,xs,H(this,xs).filter(r=>r!==n)),this.scheduleGc(),H(this,Dn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){H(this,xs).length||(this.state.status==="pending"?this.scheduleGc():H(this,Dn).remove(this))}continue(){var n;return((n=H(this,Ea))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,a,l,c,d,h,f,m,T,v,x,E,_,S,O,D,L,I,b;Ne(this,Ea,O1({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,A)=>{En(this,Ss,ji).call(this,{type:"failed",failureCount:C,error:A})},onPause:()=>{En(this,Ss,ji).call(this,{type:"pause"})},onContinue:()=>{En(this,Ss,ji).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,Dn).canRun(this)}));const r=this.state.status==="pending",s=!H(this,Ea).canStart();try{if(!r){En(this,Ss,ji).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=H(this,Dn).config).onMutate)==null?void 0:o.call(i,n,this));const A=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,n));A!==this.state.context&&En(this,Ss,ji).call(this,{type:"pending",context:A,variables:n,isPaused:s})}const C=await H(this,Ea).start();return await((d=(c=H(this,Dn).config).onSuccess)==null?void 0:d.call(c,C,n,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,C,n,this.state.context)),await((T=(m=H(this,Dn).config).onSettled)==null?void 0:T.call(m,C,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,C,null,n,this.state.context)),En(this,Ss,ji).call(this,{type:"success",data:C}),C}catch(C){try{throw await((_=(E=H(this,Dn).config).onError)==null?void 0:_.call(E,C,n,this.state.context,this)),await((O=(S=this.options).onError)==null?void 0:O.call(S,C,n,this.state.context)),await((L=(D=H(this,Dn).config).onSettled)==null?void 0:L.call(D,void 0,C,this.state.variables,this.state.context,this)),await((b=(I=this.options).onSettled)==null?void 0:b.call(I,void 0,C,n,this.state.context)),C}finally{En(this,Ss,ji).call(this,{type:"error",error:C})}}finally{H(this,Dn).runNext(this)}}},xs=new WeakMap,Dn=new WeakMap,Ea=new WeakMap,Ss=new WeakSet,ji=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Vn.batch(()=>{H(this,xs).forEach(s=>{s.onMutationUpdate(n)}),H(this,Dn).notify({mutation:this,type:"updated",action:n})})},$R);function j5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ii,Gr,vh,BR,U5=(BR=class extends Ig{constructor(e={}){super();tt(this,ii);tt(this,Gr);tt(this,vh);this.config=e,Ne(this,ii,new Set),Ne(this,Gr,new Map),Ne(this,vh,0)}build(e,n,r){const s=new F5({mutationCache:this,mutationId:++uf(this,vh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){H(this,ii).add(e);const n=Nf(e);if(typeof n=="string"){const r=H(this,Gr).get(n);r?r.push(e):H(this,Gr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(H(this,ii).delete(e)){const n=Nf(e);if(typeof n=="string"){const r=H(this,Gr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&H(this,Gr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Nf(e);if(typeof n=="string"){const r=H(this,Gr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Nf(e);if(typeof n=="string"){const s=(r=H(this,Gr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Vn.batch(()=>{H(this,ii).forEach(e=>{this.notify({type:"removed",mutation:e})}),H(this,ii).clear(),H(this,Gr).clear()})}getAll(){return Array.from(H(this,ii))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Lb(n,r))}findAll(e={}){return this.getAll().filter(n=>Lb(e,n))}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Vn.batch(()=>Promise.all(e.map(n=>n.continue().catch(qr))))}},ii=new WeakMap,Gr=new WeakMap,vh=new WeakMap,BR);function Nf(t){var e;return(e=t.options.scope)==null?void 0:e.id}function jb(t){return{onFetch:(e,n)=>{var d,h,f,m,T;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const x=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},E=A1(e.options,e.fetchOptions),_=async(S,O,D)=>{if(v)return Promise.reject();if(O==null&&S.pages.length)return Promise.resolve(S);const L={client:e.client,queryKey:e.queryKey,pageParam:O,direction:D?"backward":"forward",meta:e.options.meta};x(L);const I=await E(L),{maxPages:b}=e.options,C=D?R5:I5;return{pages:C(S.pages,I,b),pageParams:C(S.pageParams,O,b)}};if(s&&i.length){const S=s==="backward",O=S?$5:Ub,D={pages:i,pageParams:o},L=O(r,D);a=await _(D,L,S)}else{const S=t??i.length;do{const O=l===0?o[0]??r.initialPageParam:Ub(r,a);if(l>0&&O==null)break;a=await _(a,O),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Ub(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function $5(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var At,Xi,Ji,oc,ac,eo,lc,cc,zR,B5=(zR=class{constructor(t={}){tt(this,At);tt(this,Xi);tt(this,Ji);tt(this,oc);tt(this,ac);tt(this,eo);tt(this,lc);tt(this,cc);Ne(this,At,t.queryCache||new V5),Ne(this,Xi,t.mutationCache||new U5),Ne(this,Ji,t.defaultOptions||{}),Ne(this,oc,new Map),Ne(this,ac,new Map),Ne(this,eo,0)}mount(){uf(this,eo)._++,H(this,eo)===1&&(Ne(this,lc,k1.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,At).onFocus())})),Ne(this,cc,Zp.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,At).onOnline())})))}unmount(){var t,e;uf(this,eo)._--,H(this,eo)===0&&((t=H(this,lc))==null||t.call(this),Ne(this,lc,void 0),(e=H(this,cc))==null||e.call(this),Ne(this,cc,void 0))}isFetching(t){return H(this,At).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,Xi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,At).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=H(this,At).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Db(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return H(this,At).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=H(this,At).get(r.queryHash),i=s==null?void 0:s.state.data,o=E5(e,i);if(o!==void 0)return H(this,At).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Vn.batch(()=>H(this,At).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,At).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=H(this,At);Vn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=H(this,At);return Vn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Vn.batch(()=>H(this,At).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(qr).catch(qr)}invalidateQueries(t,e={}){return Vn.batch(()=>(H(this,At).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Vn.batch(()=>H(this,At).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(qr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(qr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=H(this,At).build(this,e);return n.isStaleByTime(Db(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(qr).catch(qr)}fetchInfiniteQuery(t){return t.behavior=jb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(qr).catch(qr)}ensureInfiniteQueryData(t){return t.behavior=jb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Zp.isOnline()?H(this,Xi).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,At)}getMutationCache(){return H(this,Xi)}getDefaultOptions(){return H(this,Ji)}setDefaultOptions(t){Ne(this,Ji,t)}setQueryDefaults(t,e){H(this,oc).set(kd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...H(this,oc).values()],n={};return e.forEach(r=>{Pd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){H(this,ac).set(kd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...H(this,ac).values()],n={};return e.forEach(r=>{Pd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...H(this,Ji).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===fE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,Ji).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,At).clear(),H(this,Xi).clear()}},At=new WeakMap,Xi=new WeakMap,Ji=new WeakMap,oc=new WeakMap,ac=new WeakMap,eo=new WeakMap,lc=new WeakMap,cc=new WeakMap,zR),z5=y.createContext(void 0),W5=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(z5.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}var ro;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ro||(ro={}));const $b="popstate";function H5(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return nw("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:L1(s)}return K5(e,n,null,t)}function $t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function M1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function q5(){return Math.random().toString(36).substr(2,8)}function Bb(t,e){return{usr:t.state,key:t.key,idx:e}}function nw(t,e,n,r){return n===void 0&&(n=null),Nd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zc(e):e,{state:n,key:e&&e.key||r||q5()})}function L1(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function K5(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ro.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Nd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ro.Pop;let x=d(),E=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:E})}function f(x,E){a=ro.Push;let _=nw(v.location,x,E);c=d()+1;let S=Bb(_,c),O=v.createHref(_);try{o.pushState(S,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(O)}i&&l&&l({action:a,location:v.location,delta:1})}function m(x,E){a=ro.Replace;let _=nw(v.location,x,E);c=d();let S=Bb(_,c),O=v.createHref(_);o.replaceState(S,"",O),i&&l&&l({action:a,location:v.location,delta:0})}function T(x){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof x=="string"?x:L1(x);return _=_.replace(/ $/,"%20"),$t(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let v={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener($b,h),l=x,()=>{s.removeEventListener($b,h),l=null}},createHref(x){return e(s,x)},createURL:T,encodeLocation(x){let E=T(x);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:m,go(x){return o.go(x)}};return v}var zb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zb||(zb={}));function G5(t,e,n){return n===void 0&&(n="/"),Q5(t,e,n)}function Q5(t,e,n,r){let s=typeof e=="string"?zc(e):e,i=j1(s.pathname||"/",n);if(i==null)return null;let o=V1(t);Y5(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=lB(i);a=iB(o[l],c)}return a}function V1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&($t(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Sa([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&($t(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),V1(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:rB(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of F1(i.path))s(i,o,l)}),e}function F1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=F1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Y5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sB(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Z5=/^:[\w-]+$/,X5=3,J5=2,eB=1,tB=10,nB=-2,Wb=t=>t==="*";function rB(t,e){let n=t.split("/"),r=n.length;return n.some(Wb)&&(r+=nB),e&&(r+=J5),n.filter(s=>!Wb(s)).reduce((s,i)=>s+(Z5.test(i)?X5:i===""?eB:tB),r)}function sB(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iB(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=oB({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Sa([i,h.pathname]),pathnameBase:hB(Sa([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Sa([i,h.pathnameBase]))}return o}function oB(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aB(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let v=a[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const T=a[h];return m&&!T?c[f]=void 0:c[f]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function aB(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),M1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function j1(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cB(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?zc(t):t;return{pathname:n?n.startsWith("/")?n:uB(n,e):e,search:fB(r),hash:pB(s)}}function uB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function yy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dB(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function U1(t,e){let n=dB(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $1(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=zc(t):(s=Nd({},t),$t(!s.pathname||!s.pathname.includes("?"),yy("?","pathname","search",s)),$t(!s.pathname||!s.pathname.includes("#"),yy("#","pathname","hash",s)),$t(!s.search||!s.search.includes("#"),yy("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=cB(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Sa=t=>t.join("/").replace(/\/\/+/g,"/"),hB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const B1=["post","put","patch","delete"];new Set(B1);const gB=["get",...B1];new Set(gB);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(this,arguments)}const pE=y.createContext(null),vB=y.createContext(null),Ch=y.createContext(null),Ag=y.createContext(null),Za=y.createContext({outlet:null,matches:[],isDataRoute:!1}),z1=y.createContext(null);function Ih(){return y.useContext(Ag)!=null}function Rh(){return Ih()||$t(!1),y.useContext(Ag).location}function W1(t){y.useContext(Ch).static||y.useLayoutEffect(t)}function H1(){let{isDataRoute:t}=y.useContext(Za);return t?kB():yB()}function yB(){Ih()||$t(!1);let t=y.useContext(pE),{basename:e,future:n,navigator:r}=y.useContext(Ch),{matches:s}=y.useContext(Za),{pathname:i}=Rh(),o=JSON.stringify(U1(s,n.v7_relativeSplatPath)),a=y.useRef(!1);return W1(()=>{a.current=!0}),y.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=$1(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Sa([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function _B(t,e){return wB(t,e)}function wB(t,e,n,r){Ih()||$t(!1);let{navigator:s,static:i}=y.useContext(Ch),{matches:o}=y.useContext(Za),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Rh(),h;if(e){var f;let E=typeof e=="string"?zc(e):e;c==="/"||(f=E.pathname)!=null&&f.startsWith(c)||$t(!1),h=E}else h=d;let m=h.pathname||"/",T=m;if(c!=="/"){let E=c.replace(/^\//,"").split("/");T="/"+m.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=G5(t,{pathname:T}),x=bB(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Sa([c,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Sa([c,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return e&&x?y.createElement(Ag.Provider,{value:{location:Od({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ro.Pop}},x):x}function EB(){let t=AB(),e=mB(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,null)}const TB=y.createElement(EB,null);class xB extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(Za.Provider,{value:this.props.routeContext},y.createElement(z1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SB(t){let{routeContext:e,match:n,children:r}=t,s=y.useContext(pE);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Za.Provider,{value:e},r)}function bB(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||$t(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,T=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||T){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,T=!1,v=null,x=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||TB,l&&(c<0&&f===0?(PB("route-fallback"),T=!0,x=null):c===f&&(T=!0,x=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),_=()=>{let S;return m?S=v:T?S=x:h.route.Component?S=y.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=d,y.createElement(SB,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(xB,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var q1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(q1||{}),K1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(K1||{});function CB(t){let e=y.useContext(pE);return e||$t(!1),e}function IB(t){let e=y.useContext(vB);return e||$t(!1),e}function RB(t){let e=y.useContext(Za);return e||$t(!1),e}function G1(t){let e=RB(),n=e.matches[e.matches.length-1];return n.route.id||$t(!1),n.route.id}function AB(){var t;let e=y.useContext(z1),n=IB(),r=G1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kB(){let{router:t}=CB(q1.UseNavigateStable),e=G1(K1.UseNavigateStable),n=y.useRef(!1);return W1(()=>{n.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Od({fromRouteId:e},i)))},[t,e])}const Hb={};function PB(t,e,n){Hb[t]||(Hb[t]=!0)}function NB(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Q1(t){let{to:e,replace:n,state:r,relative:s}=t;Ih()||$t(!1);let{future:i,static:o}=y.useContext(Ch),{matches:a}=y.useContext(Za),{pathname:l}=Rh(),c=H1(),d=$1(e,U1(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return y.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function Nu(t){$t(!1)}function OB(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ro.Pop,navigator:i,static:o=!1,future:a}=t;Ih()&&$t(!1);let l=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:l,navigator:i,static:o,future:Od({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=zc(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:T="default"}=r,v=y.useMemo(()=>{let x=j1(d,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:m,key:T},navigationType:s}},[l,d,h,f,m,T,s]);return v==null?null:y.createElement(Ch.Provider,{value:c},y.createElement(Ag.Provider,{children:n,value:v}))}function DB(t){let{children:e,location:n}=t;return _B(rw(e),n)}new Promise(()=>{});function rw(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,rw(r.props.children,i));return}r.type!==Nu&&$t(!1),!r.props.index||!r.props.children||$t(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const MB="6";try{window.__reactRouterVersion=MB}catch{}const LB="startTransition",qb=tA[LB];function VB(t){let{basename:e,children:n,future:r,window:s}=t,i=y.useRef();i.current==null&&(i.current=H5({window:s,v5Compat:!0}));let o=i.current,[a,l]=y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=y.useCallback(h=>{c&&qb?qb(()=>l(h)):l(h)},[l,c]);return y.useLayoutEffect(()=>o.listen(d),[o,d]),y.useEffect(()=>NB(r),[r]),y.createElement(OB,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Kb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Kb||(Kb={}));var Gb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gb||(Gb={}));var FB=y.createContext(void 0);function kg(t){const e=y.useContext(FB);return t||e||"ltr"}var _y="rovingFocusGroup.onEntryFocus",jB={bubbles:!1,cancelable:!0},Pg="RovingFocusGroup",[sw,Y1,UB]=Y0(Pg),[$B,Z1]=zs(Pg,[UB]),[BB,zB]=$B(Pg),X1=y.forwardRef((t,e)=>p.jsx(sw.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(sw.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(WB,{...t,ref:e})})}));X1.displayName=Pg;var WB=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=t,f=y.useRef(null),m=Je(e,f),T=kg(i),[v=null,x]=Pa({prop:o,defaultProp:a,onChange:l}),[E,_]=y.useState(!1),S=Vt(c),O=Y1(n),D=y.useRef(!1),[L,I]=y.useState(0);return y.useEffect(()=>{const b=f.current;if(b)return b.addEventListener(_y,S),()=>b.removeEventListener(_y,S)},[S]),p.jsx(BB,{scope:n,orientation:r,dir:T,loop:s,currentTabStopId:v,onItemFocus:y.useCallback(b=>x(b),[x]),onItemShiftTab:y.useCallback(()=>_(!0),[]),onFocusableItemAdd:y.useCallback(()=>I(b=>b+1),[]),onFocusableItemRemove:y.useCallback(()=>I(b=>b-1),[]),children:p.jsx(Ce.div,{tabIndex:E||L===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{D.current=!0}),onFocus:me(t.onFocus,b=>{const C=!D.current;if(b.target===b.currentTarget&&C&&!E){const A=new CustomEvent(_y,jB);if(b.currentTarget.dispatchEvent(A),!A.defaultPrevented){const N=O().filter(K=>K.focusable),k=N.find(K=>K.active),R=N.find(K=>K.id===v),G=[k,R,...N].filter(Boolean).map(K=>K.ref.current);tN(G,d)}}D.current=!1}),onBlur:me(t.onBlur,()=>_(!1))})})}),J1="RovingFocusGroupItem",eN=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=mo(),l=i||a,c=zB(J1,n),d=c.currentTabStopId===l,h=Y1(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=c;return y.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),p.jsx(sw.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:p.jsx(Ce.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:me(t.onMouseDown,T=>{r?c.onItemFocus(l):T.preventDefault()}),onFocus:me(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:me(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){c.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const v=KB(T,c.orientation,c.dir);if(v!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let E=h().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")E.reverse();else if(v==="prev"||v==="next"){v==="prev"&&E.reverse();const _=E.indexOf(T.currentTarget);E=c.loop?GB(E,_+1):E.slice(_+1)}setTimeout(()=>tN(E))}})})})});eN.displayName=J1;var HB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function KB(t,e,n){const r=qB(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return HB[r]}function tN(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function GB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var QB=X1,YB=eN,mE="Tabs",[ZB,hte]=zs(mE,[Z1]),nN=Z1(),[XB,gE]=ZB(mE),rN=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=kg(a),[h,f]=Pa({prop:r,onChange:s,defaultProp:i});return p.jsx(XB,{scope:n,baseId:mo(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:l,children:p.jsx(Ce.div,{dir:d,"data-orientation":o,...c,ref:e})})});rN.displayName=mE;var sN="TabsList",iN=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=gE(sN,n),o=nN(n);return p.jsx(QB,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(Ce.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});iN.displayName=sN;var oN="TabsTrigger",aN=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=gE(oN,n),a=nN(n),l=uN(o.baseId,r),c=dN(o.baseId,r),d=r===o.value;return p.jsx(YB,{asChild:!0,...a,focusable:!s,active:d,children:p.jsx(Ce.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:me(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:me(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:me(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});aN.displayName=oN;var lN="TabsContent",cN=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=gE(lN,n),l=uN(a.baseId,r),c=dN(a.baseId,r),d=r===a.value,h=y.useRef(d);return y.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),p.jsx(Vr,{present:s||d,children:({present:f})=>p.jsx(Ce.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});cN.displayName=lN;function uN(t,e){return`${t}-trigger-${e}`}function dN(t,e){return`${t}-content-${e}`}var JB=rN,hN=iN,fN=aN,pN=cN;const mN=JB,vE=y.forwardRef(({className:t,...e},n)=>p.jsx(hN,{ref:n,className:De("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));vE.displayName=hN.displayName;const Xp=y.forwardRef(({className:t,...e},n)=>p.jsx(fN,{ref:n,className:De("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Xp.displayName=fN.displayName;const Jp=y.forwardRef(({className:t,...e},n)=>p.jsx(pN,{ref:n,className:De("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Jp.displayName=pN.displayName;const yE=y.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:De("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));yE.displayName="Card";const gN=y.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:De("flex flex-col space-y-1.5 p-6",t),...e}));gN.displayName="CardHeader";const vN=y.forwardRef(({className:t,...e},n)=>p.jsx("h3",{ref:n,className:De("text-2xl font-semibold leading-none tracking-tight",t),...e}));vN.displayName="CardTitle";const e3=y.forwardRef(({className:t,...e},n)=>p.jsx("p",{ref:n,className:De("text-sm text-muted-foreground",t),...e}));e3.displayName="CardDescription";const _E=y.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:De("p-6 pt-0",t),...e}));_E.displayName="CardContent";const t3=y.forwardRef(({className:t,...e},n)=>p.jsx("div",{ref:n,className:De("flex items-center p-6 pt-0",t),...e}));t3.displayName="CardFooter";const n3=eE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Pt=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Co:"button";return p.jsx(o,{className:De(n3({variant:e,size:n,className:t})),ref:i,...s})});Pt.displayName="Button";const Qb=t=>{let e;const n=new Set,r=(c,d)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const f=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(m=>m(e,f))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,s,a);return a},r3=t=>t?Qb(t):Qb,s3=t=>t;function i3(t,e=s3){const n=W.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return W.useDebugValue(n),n}const o3=t=>{const e=r3(t),n=r=>i3(e,r);return Object.assign(n,e),n},a3=t=>o3;function l3(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=l=>l===null?null:JSON.parse(l,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const iw=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return iw(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return iw(r)(n)}}}},c3=(t,e)=>(n,r,s)=>{let i={storage:l3(()=>localStorage),partialize:v=>v,version:0,merge:(v,x)=>({...x,...v}),...e},o=!1;const a=new Set,l=new Set;let c=i.storage;if(!c)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...v)},r,s);const d=()=>{const v=i.partialize({...r()});return c.setItem(i.name,{state:v,version:i.version})},h=s.setState;s.setState=(v,x)=>{h(v,x),d()};const f=t((...v)=>{n(...v),d()},r,s);s.getInitialState=()=>f;let m;const T=()=>{var v,x;if(!c)return;o=!1,a.forEach(_=>{var S;return _((S=r())!=null?S:f)});const E=((x=i.onRehydrateStorage)==null?void 0:x.call(i,(v=r())!=null?v:f))||void 0;return iw(c.getItem.bind(c))(i.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==i.version){if(i.migrate){const S=i.migrate(_.state,_.version);return S instanceof Promise?S.then(O=>[!0,O]):[!0,S]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var S;const[O,D]=_;if(m=i.merge(D,(S=r())!=null?S:f),n(m,!0),O)return d()}).then(()=>{E==null||E(m,void 0),m=r(),o=!0,l.forEach(_=>_(m))}).catch(_=>{E==null||E(void 0,_)})};return s.persist={setOptions:v=>{i={...i,...v},v.storage&&(c=v.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>T(),hasHydrated:()=>o,onHydrate:v=>(a.add(v),()=>{a.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},i.skipHydration||T(),m||f},u3=c3,wE=a3()(u3((t,e)=>({items:[],addToCart:n=>{t(r=>r.items.find(i=>i.nome===n.nome)?{items:r.items.map(i=>i.nome===n.nome?{...i,quantidade:i.quantidade+1}:i)}:{items:[...r.items,{...n,quantidade:1}]})},removeFromCart:n=>{t(r=>{const s=r.items.find(i=>i.nome===n.nome);return s?s.quantidade===1?{items:r.items.filter(i=>i.nome!==n.nome)}:{items:r.items.map(i=>i.nome===n.nome?{...i,quantidade:i.quantidade-1}:i)}:r})},getQuantity:n=>{const r=e().items.find(s=>s.nome===n.nome);return(r==null?void 0:r.quantidade)||0},clearCart:()=>t({items:[]})}),{name:"cart-storage"}));function d3({produtos:t}){const{addToCart:e,removeFromCart:n,getQuantity:r}=wE(),s=t.reduce((i,o)=>{const a=o.tipo||"Outros",l=o.subtipo||"Geral";return i[a]||(i[a]={}),i[a][l]||(i[a][l]=[]),i[a][l].push(o),i},{});return p.jsx("div",{className:"space-y-8",children:Object.entries(s).map(([i,o])=>p.jsx("div",{className:"space-y-4",children:Object.entries(o).map(([a,l])=>p.jsxs("div",{className:"",children:[p.jsx("h3",{className:"text-xl font-semibold",children:a}),p.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 mt-2",children:l.map(c=>p.jsx(yE,{className:"overflow-hidden shadow-[0px_0px_0px_1px_rgba(0,0,0,0.06),0px_1px_1px_-0.5px_rgba(0,0,0,0.06),0px_3px_3px_-1.5px_rgba(0,0,0,0.06),_0px_6px_6px_-3px_rgba(0,0,0,0.05),0px_12px_12px_-6px_rgba(0,0,0,0.04),0px_24px_24px_-12px_rgba(0,0,0,0.03)] border-none",children:p.jsx(_E,{className:"p-4",children:p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"flex justify-between items-start",children:p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-lg",children:c.nome}),p.jsx("p",{className:"text-sm text-muted-foreground",children:c.descricao})]})}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"font-semibold",children:`R$ ${Number(c.valor).toFixed(2).replace(".",",")}`}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Pt,{variant:"outline",size:"icon",onClick:()=>n(c),disabled:r(c)===0,children:p.jsx(LP,{className:"h-4 w-4"})}),p.jsx("span",{className:"w-8 text-center",children:r(c)}),p.jsx(Pt,{variant:"outline",size:"icon",onClick:()=>e(c),children:p.jsx(wg,{className:"h-4 w-4"})})]})]})]})})},c.nome))})]},a))},i))})}function h3({menuData:t}){return p.jsxs(mN,{defaultValue:t.tiposProdutos[0],className:"w-full",children:[p.jsx(vE,{className:"w-full flex justify-start gap-4 mb-10 bg-transparent mt-8",children:t.tiposProdutos.map(e=>p.jsxs(Xp,{value:e,className:"flex flex-col items-center gap-2 p-0 group data-[state=active]:shadow-none",children:[p.jsx("div",{className:"w-16 h-16 rounded-full border-primary bg-zinc-100 flex items-center justify-center group-data-[state=active]:bg-neutral-900",children:p.jsx("img",{src:`/${e.toLowerCase()}.svg`,alt:e,width:32,height:32,className:"w-8 h-8"})}),p.jsx("span",{className:"text-sm",children:e==="hamburguer"?"Hamburguer":e==="bebida"?"Bebidas":e==="porcao"?"Pores":e==="sobremesa"?"Sobremesas":e})]},e))}),t.tiposProdutos.map(e=>p.jsx(Jp,{value:e,className:"mt-0",children:p.jsx(d3,{produtos:t.produtos.filter(n=>n.tipo===e)})},e))]})}var wy="focusScope.autoFocusOnMount",Ey="focusScope.autoFocusOnUnmount",Yb={bubbles:!1,cancelable:!0},f3="FocusScope",EE=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=y.useState(null),c=Vt(s),d=Vt(i),h=y.useRef(null),f=Je(e,v=>l(v)),m=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let v=function(S){if(m.paused||!a)return;const O=S.target;a.contains(O)?h.current=O:Ui(h.current,{select:!0})},x=function(S){if(m.paused||!a)return;const O=S.relatedTarget;O!==null&&(a.contains(O)||Ui(h.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const D of S)D.removedNodes.length>0&&Ui(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const _=new MutationObserver(E);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),_.disconnect()}}},[r,a,m.paused]),y.useEffect(()=>{if(a){Xb.add(m);const v=document.activeElement;if(!a.contains(v)){const E=new CustomEvent(wy,Yb);a.addEventListener(wy,c),a.dispatchEvent(E),E.defaultPrevented||(p3(_3(yN(a)),{select:!0}),document.activeElement===v&&Ui(a))}return()=>{a.removeEventListener(wy,c),setTimeout(()=>{const E=new CustomEvent(Ey,Yb);a.addEventListener(Ey,d),a.dispatchEvent(E),E.defaultPrevented||Ui(v??document.body,{select:!0}),a.removeEventListener(Ey,d),Xb.remove(m)},0)}}},[a,c,d,m]);const T=y.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,E=document.activeElement;if(x&&E){const _=v.currentTarget,[S,O]=m3(_);S&&O?!v.shiftKey&&E===O?(v.preventDefault(),n&&Ui(S,{select:!0})):v.shiftKey&&E===S&&(v.preventDefault(),n&&Ui(O,{select:!0})):E===_&&v.preventDefault()}},[n,r,m.paused]);return p.jsx(Ce.div,{tabIndex:-1,...o,ref:f,onKeyDown:T})});EE.displayName=f3;function p3(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ui(r,{select:e}),document.activeElement!==n)return}function m3(t){const e=yN(t),n=Zb(e,t),r=Zb(e.reverse(),t);return[n,r]}function yN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Zb(t,e){for(const n of t)if(!g3(n,{upTo:e}))return n}function g3(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function v3(t){return t instanceof HTMLInputElement&&"select"in t}function Ui(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&v3(t)&&e&&t.select()}}var Xb=y3();function y3(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Jb(t,e),t.unshift(e)},remove(e){var n;t=Jb(t,e),(n=t[0])==null||n.resume()}}}function Jb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function _3(t){return t.filter(e=>e.tagName!=="A")}var Ty=0;function _N(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??eC()),document.body.insertAdjacentElement("beforeend",t[1]??eC()),Ty++,()=>{Ty===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ty--}},[])}function eC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Cs=function(){return Cs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cs.apply(this,arguments)};function Ah(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function w3(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var lp="right-scroll-bar-position",cp="width-before-scroll-bar",E3="with-scroll-bars-hidden",T3="--removed-body-scroll-bar-size";function xy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function x3(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var S3=typeof window<"u"?y.useLayoutEffect:y.useEffect,tC=new WeakMap;function b3(t,e){var n=x3(null,function(r){return t.forEach(function(s){return xy(s,r)})});return S3(function(){var r=tC.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||xy(a,null)}),i.forEach(function(a){s.has(a)||xy(a,o)})}tC.set(n,t)},[t]),n}function C3(t){return t}function I3(t,e){e===void 0&&(e=C3);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return s}function R3(t){t===void 0&&(t={});var e=I3(null);return e.options=Cs({async:!0,ssr:!1},t),e}var wN=function(t){var e=t.sideCar,n=Ah(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Cs({},n))};wN.isSideCarExport=!0;function A3(t,e){return t.useMedium(e),wN}var EN=R3(),Sy=function(){},Ng=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:Sy,onWheelCapture:Sy,onTouchMoveCapture:Sy}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noIsolation,T=t.inert,v=t.allowPinchZoom,x=t.as,E=x===void 0?"div":x,_=t.gapMode,S=Ah(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=f,D=b3([n,e]),L=Cs(Cs({},S),s);return y.createElement(y.Fragment,null,d&&y.createElement(O,{sideCar:EN,removeScrollBar:c,shards:h,noIsolation:m,inert:T,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:_}),o?y.cloneElement(y.Children.only(a),Cs(Cs({},L),{ref:D})):y.createElement(E,Cs({},L,{className:l,ref:D}),a))});Ng.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ng.classNames={fullWidth:cp,zeroRight:lp};var k3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function P3(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=k3();return e&&t.setAttribute("nonce",e),t}function N3(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function O3(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var D3=function(){var t=0,e=null;return{add:function(n){t==0&&(e=P3())&&(N3(e,n),O3(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},M3=function(){var t=D3();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},TN=function(){var t=M3(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},L3={left:0,top:0,right:0,gap:0},by=function(t){return parseInt(t||"",10)||0},V3=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[by(n),by(r),by(s)]},F3=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return L3;var e=V3(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},j3=TN(),Kl="data-scroll-locked",U3=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(E3,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Kl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(cp,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(lp," .").concat(lp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(cp," .").concat(cp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Kl,`] {
    `).concat(T3,": ").concat(a,`px;
  }
`)},nC=function(){var t=parseInt(document.body.getAttribute(Kl)||"0",10);return isFinite(t)?t:0},$3=function(){y.useEffect(function(){return document.body.setAttribute(Kl,(nC()+1).toString()),function(){var t=nC()-1;t<=0?document.body.removeAttribute(Kl):document.body.setAttribute(Kl,t.toString())}},[])},B3=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;$3();var i=y.useMemo(function(){return F3(s)},[s]);return y.createElement(j3,{styles:U3(i,!e,s,n?"":"!important")})},ow=!1;if(typeof window<"u")try{var Of=Object.defineProperty({},"passive",{get:function(){return ow=!0,!0}});window.addEventListener("test",Of,Of),window.removeEventListener("test",Of,Of)}catch{ow=!1}var fl=ow?{passive:!1}:!1,z3=function(t){return t.tagName==="TEXTAREA"},xN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!z3(t)&&n[e]==="visible")},W3=function(t){return xN(t,"overflowY")},H3=function(t){return xN(t,"overflowX")},rC=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=SN(t,r);if(s){var i=bN(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},q3=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},K3=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},SN=function(t,e){return t==="v"?W3(e):H3(e)},bN=function(t,e){return t==="v"?q3(e):K3(e)},G3=function(t,e){return t==="h"&&e==="rtl"?-1:1},Q3=function(t,e,n,r,s){var i=G3(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{var m=bN(t,a),T=m[0],v=m[1],x=m[2],E=v-x-i*T;(T||E)&&SN(t,a)&&(h+=E,f+=T),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(c=!0),c},Df=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},sC=function(t){return[t.deltaX,t.deltaY]},iC=function(t){return t&&"current"in t?t.current:t},Y3=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Z3=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},X3=0,pl=[];function J3(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),s=y.useState(X3++)[0],i=y.useState(TN)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=w3([t.lockRef.current],(t.shards||[]).map(iC),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var E=Df(v),_=n.current,S="deltaX"in v?v.deltaX:_[0]-E[0],O="deltaY"in v?v.deltaY:_[1]-E[1],D,L=v.target,I=Math.abs(S)>Math.abs(O)?"h":"v";if("touches"in v&&I==="h"&&L.type==="range")return!1;var b=rC(I,L);if(!b)return!0;if(b?D=I:(D=I==="v"?"h":"v",b=rC(I,L)),!b)return!1;if(!r.current&&"changedTouches"in v&&(S||O)&&(r.current=D),!D)return!0;var C=r.current||D;return Q3(C,x,v,C==="h"?S:O)},[]),l=y.useCallback(function(v){var x=v;if(!(!pl.length||pl[pl.length-1]!==i)){var E="deltaY"in x?sC(x):Df(x),_=e.current.filter(function(D){return D.name===x.type&&(D.target===x.target||x.target===D.shadowParent)&&Y3(D.delta,E)})[0];if(_&&_.should){x.cancelable&&x.preventDefault();return}if(!_){var S=(o.current.shards||[]).map(iC).filter(Boolean).filter(function(D){return D.contains(x.target)}),O=S.length>0?a(x,S[0]):!o.current.noIsolation;O&&x.cancelable&&x.preventDefault()}}},[]),c=y.useCallback(function(v,x,E,_){var S={name:v,delta:x,target:E,should:_,shadowParent:ez(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(O){return O!==S})},1)},[]),d=y.useCallback(function(v){n.current=Df(v),r.current=void 0},[]),h=y.useCallback(function(v){c(v.type,sC(v),v.target,a(v,t.lockRef.current))},[]),f=y.useCallback(function(v){c(v.type,Df(v),v.target,a(v,t.lockRef.current))},[]);y.useEffect(function(){return pl.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,fl),document.addEventListener("touchmove",l,fl),document.addEventListener("touchstart",d,fl),function(){pl=pl.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,fl),document.removeEventListener("touchmove",l,fl),document.removeEventListener("touchstart",d,fl)}},[]);var m=t.removeScrollBar,T=t.inert;return y.createElement(y.Fragment,null,T?y.createElement(i,{styles:Z3(s)}):null,m?y.createElement(B3,{gapMode:t.gapMode}):null)}function ez(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const tz=A3(EN,J3);var TE=y.forwardRef(function(t,e){return y.createElement(Ng,Cs({},t,{ref:e,sideCar:tz}))});TE.classNames=Ng.classNames;var nz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ml=new WeakMap,Mf=new WeakMap,Lf={},Cy=0,CN=function(t){return t&&(t.host||CN(t.parentNode))},rz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=CN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},sz=function(t,e,n,r){var s=rz(e,Array.isArray(t)?t:[t]);Lf[n]||(Lf[n]=new WeakMap);var i=Lf[n],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),T=m!==null&&m!=="false",v=(ml.get(f)||0)+1,x=(i.get(f)||0)+1;ml.set(f,v),i.set(f,x),o.push(f),v===1&&T&&Mf.set(f,!0),x===1&&f.setAttribute(n,"true"),T||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return d(e),a.clear(),Cy++,function(){o.forEach(function(h){var f=ml.get(h)-1,m=i.get(h)-1;ml.set(h,f),i.set(h,m),f||(Mf.has(h)||h.removeAttribute(r),Mf.delete(h)),m||h.removeAttribute(n)}),Cy--,Cy||(ml=new WeakMap,ml=new WeakMap,Mf=new WeakMap,Lf={})}},IN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=nz(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),sz(r,s,n,"aria-hidden")):function(){return null}},xE="Dialog",[RN,fte]=zs(xE),[iz,ps]=RN(xE),AN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=y.useRef(null),l=y.useRef(null),[c=!1,d]=Pa({prop:r,defaultProp:s,onChange:i});return p.jsx(iz,{scope:e,triggerRef:a,contentRef:l,contentId:mo(),titleId:mo(),descriptionId:mo(),open:c,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};AN.displayName=xE;var kN="DialogTrigger",PN=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(kN,n),i=Je(e,s.triggerRef);return p.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":CE(s.open),...r,ref:i,onClick:me(t.onClick,s.onOpenToggle)})});PN.displayName=kN;var SE="DialogPortal",[oz,NN]=RN(SE,{forceMount:void 0}),ON=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ps(SE,e);return p.jsx(oz,{scope:e,forceMount:n,children:y.Children.map(r,o=>p.jsx(Vr,{present:n||i.open,children:p.jsx(vg,{asChild:!0,container:s,children:o})}))})};ON.displayName=SE;var em="DialogOverlay",DN=y.forwardRef((t,e)=>{const n=NN(em,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ps(em,t.__scopeDialog);return i.modal?p.jsx(Vr,{present:r||i.open,children:p.jsx(az,{...s,ref:e})}):null});DN.displayName=em;var az=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(em,n);return p.jsx(TE,{as:Co,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(Ce.div,{"data-state":CE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Oa="DialogContent",MN=y.forwardRef((t,e)=>{const n=NN(Oa,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ps(Oa,t.__scopeDialog);return p.jsx(Vr,{present:r||i.open,children:i.modal?p.jsx(lz,{...s,ref:e}):p.jsx(cz,{...s,ref:e})})});MN.displayName=Oa;var lz=y.forwardRef((t,e)=>{const n=ps(Oa,t.__scopeDialog),r=y.useRef(null),s=Je(e,n.contentRef,r);return y.useEffect(()=>{const i=r.current;if(i)return IN(i)},[]),p.jsx(LN,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault())})}),cz=y.forwardRef((t,e)=>{const n=ps(Oa,t.__scopeDialog),r=y.useRef(!1),s=y.useRef(!1);return p.jsx(LN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),LN=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ps(Oa,n),l=y.useRef(null),c=Je(e,l);return _N(),p.jsxs(p.Fragment,{children:[p.jsx(EE,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(xh,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":CE(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(uz,{titleId:a.titleId}),p.jsx(hz,{contentRef:l,descriptionId:a.descriptionId})]})]})}),bE="DialogTitle",VN=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(bE,n);return p.jsx(Ce.h2,{id:s.titleId,...r,ref:e})});VN.displayName=bE;var FN="DialogDescription",jN=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(FN,n);return p.jsx(Ce.p,{id:s.descriptionId,...r,ref:e})});jN.displayName=FN;var UN="DialogClose",$N=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ps(UN,n);return p.jsx(Ce.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});$N.displayName=UN;function CE(t){return t?"open":"closed"}var BN="DialogTitleWarning",[pte,zN]=W4(BN,{contentName:Oa,titleName:bE,docsSlug:"dialog"}),uz=({titleId:t})=>{const e=zN(BN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},dz="DialogDescriptionWarning",hz=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zN(dz).contentName}}.`;return y.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},fz=AN,pz=PN,mz=ON,WN=DN,HN=MN,qN=VN,KN=jN,gz=$N;const Da=fz,IE=pz,vz=mz,GN=y.forwardRef(({className:t,...e},n)=>p.jsx(WN,{ref:n,className:De("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));GN.displayName=WN.displayName;const ko=y.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(vz,{children:[p.jsx(GN,{}),p.jsxs(HN,{ref:r,className:De("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,p.jsxs(gz,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(FP,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ko.displayName=HN.displayName;const Po=({className:t,...e})=>p.jsx("div",{className:De("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Po.displayName="DialogHeader";const No=y.forwardRef(({className:t,...e},n)=>p.jsx(qN,{ref:n,className:De("text-lg font-semibold leading-none tracking-tight",t),...e}));No.displayName=qN.displayName;const yz=y.forwardRef(({className:t,...e},n)=>p.jsx(KN,{ref:n,className:De("text-sm text-muted-foreground",t),...e}));yz.displayName=KN.displayName;var _z="Separator",oC="horizontal",wz=["horizontal","vertical"],QN=y.forwardRef((t,e)=>{const{decorative:n,orientation:r=oC,...s}=t,i=Ez(r)?r:oC,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(Ce.div,{"data-orientation":i,...a,...s,ref:e})});QN.displayName=_z;function Ez(t){return wz.includes(t)}var YN=QN;const ZN=y.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>p.jsx(YN,{ref:s,decorative:n,orientation:e,className:De("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));ZN.displayName=YN.displayName;function aw(t,[e,n]){return Math.min(n,Math.max(e,t))}function Tz(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var RE="ScrollArea",[XN,mte]=zs(RE),[xz,Fr]=XN(RE),JN=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,l]=y.useState(null),[c,d]=y.useState(null),[h,f]=y.useState(null),[m,T]=y.useState(null),[v,x]=y.useState(null),[E,_]=y.useState(0),[S,O]=y.useState(0),[D,L]=y.useState(!1),[I,b]=y.useState(!1),C=Je(e,N=>l(N)),A=kg(s);return p.jsx(xz,{scope:n,type:r,dir:A,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:T,scrollbarXEnabled:D,onScrollbarXEnabledChange:L,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:I,onScrollbarYEnabledChange:b,onCornerWidthChange:_,onCornerHeightChange:O,children:p.jsx(Ce.div,{dir:A,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});JN.displayName=RE;var eO="ScrollAreaViewport",tO=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=Fr(eO,n),a=y.useRef(null),l=Je(e,a,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),p.jsx(Ce.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});tO.displayName=eO;var Hs="ScrollAreaScrollbar",AE=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Fr(Hs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return y.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?p.jsx(Sz,{...r,ref:e,forceMount:n}):s.type==="scroll"?p.jsx(bz,{...r,ref:e,forceMount:n}):s.type==="auto"?p.jsx(nO,{...r,ref:e,forceMount:n}):s.type==="always"?p.jsx(kE,{...r,ref:e}):null});AE.displayName=Hs;var Sz=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Fr(Hs,t.__scopeScrollArea),[i,o]=y.useState(!1);return y.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),p.jsx(Vr,{present:n||i,children:p.jsx(nO,{"data-state":i?"visible":"hidden",...r,ref:e})})}),bz=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Fr(Hs,t.__scopeScrollArea),i=t.orientation==="horizontal",o=Dg(()=>l("SCROLL_END"),100),[a,l]=Tz("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),y.useEffect(()=>{const c=s.viewport,d=i?"scrollLeft":"scrollTop";if(c){let h=c[d];const f=()=>{const m=c[d];h!==m&&(l("SCROLL"),o()),h=m};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[s.viewport,i,l,o]),p.jsx(Vr,{present:n||a!=="hidden",children:p.jsx(kE,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:me(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:me(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),nO=y.forwardRef((t,e)=>{const n=Fr(Hs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=y.useState(!1),a=t.orientation==="horizontal",l=Dg(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:d)}},10);return _c(n.viewport,l),_c(n.content,l),p.jsx(Vr,{present:r||i,children:p.jsx(kE,{"data-state":i?"visible":"hidden",...s,ref:e})})}),kE=y.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Fr(Hs,t.__scopeScrollArea),i=y.useRef(null),o=y.useRef(0),[a,l]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=aO(a.viewport,a.content),d={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return Pz(f,o.current,a,m)}return n==="horizontal"?p.jsx(Cz,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,m=aC(f,a,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?p.jsx(Iz,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,m=aC(f,a);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),Cz=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Fr(Hs,t.__scopeScrollArea),[o,a]=y.useState(),l=y.useRef(null),c=Je(e,l,i.onScrollbarXChange);return y.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(sO,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Og(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),cO(f,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:nm(o.paddingLeft),paddingEnd:nm(o.paddingRight)}})}})}),Iz=y.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Fr(Hs,t.__scopeScrollArea),[o,a]=y.useState(),l=y.useRef(null),c=Je(e,l,i.onScrollbarYChange);return y.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(sO,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Og(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),cO(f,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:nm(o.paddingTop),paddingEnd:nm(o.paddingBottom)}})}})}),[Rz,rO]=XN(Hs),sO=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:h,...f}=t,m=Fr(Hs,n),[T,v]=y.useState(null),x=Je(e,C=>v(C)),E=y.useRef(null),_=y.useRef(""),S=m.viewport,O=r.content-r.viewport,D=Vt(d),L=Vt(l),I=Dg(h,10);function b(C){if(E.current){const A=C.clientX-E.current.left,N=C.clientY-E.current.top;c({x:A,y:N})}}return y.useEffect(()=>{const C=A=>{const N=A.target;(T==null?void 0:T.contains(N))&&D(A,O)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[S,T,O,D]),y.useEffect(L,[r,L]),_c(T,I),_c(m.content,I),p.jsx(Rz,{scope:n,scrollbar:T,hasThumb:s,onThumbChange:Vt(i),onThumbPointerUp:Vt(o),onThumbPositionChange:L,onThumbPointerDown:Vt(a),children:p.jsx(Ce.div,{...f,ref:x,style:{position:"absolute",...f.style},onPointerDown:me(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),E.current=T.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),b(C))}),onPointerMove:me(t.onPointerMove,b),onPointerUp:me(t.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=_.current,m.viewport&&(m.viewport.style.scrollBehavior=""),E.current=null})})})}),tm="ScrollAreaThumb",iO=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=rO(tm,t.__scopeScrollArea);return p.jsx(Vr,{present:n||s.hasThumb,children:p.jsx(Az,{ref:e,...r})})}),Az=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Fr(tm,n),o=rO(tm,n),{onThumbPositionChange:a}=o,l=Je(e,h=>o.onThumbChange(h)),c=y.useRef(void 0),d=Dg(()=>{c.current&&(c.current(),c.current=void 0)},100);return y.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!c.current){const m=Nz(h,a);c.current=m,a()}};return a(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,a]),p.jsx(Ce.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),T=h.clientX-m.left,v=h.clientY-m.top;o.onThumbPointerDown({x:T,y:v})}),onPointerUp:me(t.onPointerUp,o.onThumbPointerUp)})});iO.displayName=tm;var PE="ScrollAreaCorner",oO=y.forwardRef((t,e)=>{const n=Fr(PE,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(kz,{...t,ref:e}):null});oO.displayName=PE;var kz=y.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Fr(PE,n),[i,o]=y.useState(0),[a,l]=y.useState(0),c=!!(i&&a);return _c(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),l(d)}),_c(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),c?p.jsx(Ce.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function nm(t){return t?parseInt(t,10):0}function aO(t,e){const n=t/e;return isNaN(n)?0:n}function Og(t){const e=aO(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Pz(t,e,n,r="ltr"){const s=Og(n),i=s/2,o=e||i,a=s-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return lO([l,c],h)(t)}function aC(t,e,n="ltr"){const r=Og(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,l=n==="ltr"?[0,o]:[o*-1,0],c=aw(t,l);return lO([0,o],[0,a])(c)}function lO(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function cO(t,e){return t>0&&t<e}var Nz=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Dg(t,e){const n=Vt(t),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function _c(t,e){const n=Vt(e);gn(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var uO=JN,Oz=tO,Dz=oO;const dO=y.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(uO,{ref:r,className:De("relative overflow-hidden",t),...n,children:[p.jsx(Oz,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(hO,{}),p.jsx(Dz,{})]}));dO.displayName=uO.displayName;const hO=y.forwardRef(({className:t,orientation:e="vertical",...n},r)=>p.jsx(AE,{ref:r,orientation:e,className:De("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:p.jsx(iO,{className:"relative flex-1 rounded-full bg-border"})}));hO.displayName=AE.displayName;const Mz=()=>{};var lC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te=function(t,e){if(!t)throw Wc(e)},Wc=function(t){return new Error("Firebase Database ("+fO.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Lz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},NE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Lz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new Vz;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const T=c<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mO=function(t){const e=pO(t);return NE.encodeByteArray(e,!0)},rm=function(t){return mO(t).replace(/\./g,"")},sm=function(t){try{return NE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(t){return gO(void 0,t)}function gO(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!jz(n)||(t[n]=gO(t[n],e[n]));return t}function jz(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=()=>Uz().__FIREBASE_DEFAULTS__,Bz=()=>{if(typeof process>"u"||typeof lC>"u")return;const t=lC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sm(t[1]);return e&&JSON.parse(e)},Mg=()=>{try{return Mz()||$z()||Bz()||zz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vO=t=>{var e,n;return(n=(e=Mg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yO=t=>{const e=vO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_O=()=>{var t;return(t=Mg())===null||t===void 0?void 0:t.config},wO=t=>{var e;return(e=Mg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rm(JSON.stringify(n)),rm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function Wz(){var t;const e=(t=Mg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Hz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qz(){const t=Pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Kz(){return fO.NODE_ADMIN===!0}function Gz(){return!Wz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SO(){try{return typeof indexedDB=="object"}catch{return!1}}function bO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function Qz(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz="FirebaseError";class ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Yz,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Zz(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ms(s,a,r)}}function Zz(t,e){return t.replace(Xz,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Xz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){return JSON.parse(t)}function qt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Dd(sm(i[0])||""),n=Dd(sm(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Jz=function(t){const e=CO(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},e6=function(t){const e=CO(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function lw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function im(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Ti(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(cC(i)&&cC(o)){if(!Ti(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function cC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ou(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Du(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=a^i&(o^a),d=1518500249):(c=i^o^a,d=1859775393):h<60?(c=i&o|a&(i|o),d=2400959708):(c=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+c+l+d+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function n6(t,e){const n=new r6(t,e);return n.subscribe.bind(n)}class r6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Iy),s.error===void 0&&(s.error=Iy),s.complete===void 0&&(s.complete=Iy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Iy(){}function Lg(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,te(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Vg=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=1e3,a6=2,l6=4*60*60*1e3,c6=.5;function uC(t,e=o6,n=a6){const r=e*Math.pow(n,t),s=Math.round(c6*r*(Math.random()-.5)*2);return Math.min(l6,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kh;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h6(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:d6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d6(t){return t===la?void 0:t}function h6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new u6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const p6={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},m6=$e.INFO,g6={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},v6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=g6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ph{constructor(e){this.name=e,this._logLevel=m6,this._logHandler=v6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const y6=(t,e)=>e.some(n=>t instanceof n);let dC,hC;function _6(){return dC||(dC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function w6(){return hC||(hC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IO=new WeakMap,cw=new WeakMap,RO=new WeakMap,Ry=new WeakMap,DE=new WeakMap;function E6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(go(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IO.set(n,t)}).catch(()=>{}),DE.set(e,t),e}function T6(t){if(cw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});cw.set(t,e)}let uw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||RO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return go(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x6(t){uw=t(uw)}function S6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ay(this),e,...n);return RO.set(r,e.sort?e.sort():[e]),go(r)}:w6().includes(t)?function(...e){return t.apply(Ay(this),e),go(IO.get(this))}:function(...e){return go(t.apply(Ay(this),e))}}function b6(t){return typeof t=="function"?S6(t):(t instanceof IDBTransaction&&T6(t),y6(t,_6())?new Proxy(t,uw):t)}function go(t){if(t instanceof IDBRequest)return E6(t);if(Ry.has(t))return Ry.get(t);const e=b6(t);return e!==t&&(Ry.set(t,e),DE.set(e,t)),e}const Ay=t=>DE.get(t);function AO(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=go(o);return r&&o.addEventListener("upgradeneeded",l=>{r(go(o.result),l.oldVersion,l.newVersion,go(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const C6=["get","getKey","getAll","getAllKeys","count"],I6=["put","add","delete","clear"],ky=new Map;function fC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ky.get(e))return ky.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=I6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||C6.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ky.set(e,i),i}x6(t=>({...t,get:(e,n,r)=>fC(e,n)||t.get(e,n,r),has:(e,n)=>!!fC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(A6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function A6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dw="@firebase/app",pC="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Ph("@firebase/app"),k6="@firebase/app-compat",P6="@firebase/analytics-compat",N6="@firebase/analytics",O6="@firebase/app-check-compat",D6="@firebase/app-check",M6="@firebase/auth",L6="@firebase/auth-compat",V6="@firebase/database",F6="@firebase/data-connect",j6="@firebase/database-compat",U6="@firebase/functions",$6="@firebase/functions-compat",B6="@firebase/installations",z6="@firebase/installations-compat",W6="@firebase/messaging",H6="@firebase/messaging-compat",q6="@firebase/performance",K6="@firebase/performance-compat",G6="@firebase/remote-config",Q6="@firebase/remote-config-compat",Y6="@firebase/storage",Z6="@firebase/storage-compat",X6="@firebase/firestore",J6="@firebase/vertexai",eW="@firebase/firestore-compat",tW="firebase",nW="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="[DEFAULT]",rW={[dw]:"fire-core",[k6]:"fire-core-compat",[N6]:"fire-analytics",[P6]:"fire-analytics-compat",[D6]:"fire-app-check",[O6]:"fire-app-check-compat",[M6]:"fire-auth",[L6]:"fire-auth-compat",[V6]:"fire-rtdb",[F6]:"fire-data-connect",[j6]:"fire-rtdb-compat",[U6]:"fire-fn",[$6]:"fire-fn-compat",[B6]:"fire-iid",[z6]:"fire-iid-compat",[W6]:"fire-fcm",[H6]:"fire-fcm-compat",[q6]:"fire-perf",[K6]:"fire-perf-compat",[G6]:"fire-rc",[Q6]:"fire-rc-compat",[Y6]:"fire-gcs",[Z6]:"fire-gcs-compat",[X6]:"fire-fst",[eW]:"fire-fst-compat",[J6]:"fire-vertex","fire-js":"fire-js",[tW]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om=new Map,sW=new Map,fw=new Map;function mC(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function us(t){const e=t.name;if(fw.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;fw.set(e,t);for(const n of om.values())mC(n,t);for(const n of sW.values())mC(n,t);return!0}function Qo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vo=new Xa("app","Firebase",iW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=nW;function kO(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hw,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw vo.create("bad-app-name",{appName:String(s)});if(n||(n=_O()),!n)throw vo.create("no-options");const i=om.get(s);if(i){if(Ti(n,i.options)&&Ti(r,i.config))return i;throw vo.create("duplicate-app",{appName:s})}const o=new f6(s);for(const l of fw.values())o.addComponent(l);const a=new oW(n,r,o);return om.set(s,a),a}function Fg(t=hw){const e=om.get(t);if(!e&&t===hw&&_O())return kO();if(!e)throw vo.create("no-app",{appName:t});return e}function nr(t,e,n){var r;let s=(r=rW[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(a.join(" "));return}us(new Mr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW="firebase-heartbeat-database",lW=1,Md="firebase-heartbeat-store";let Py=null;function PO(){return Py||(Py=AO(aW,lW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Md)}catch(n){console.warn(n)}}}}).catch(t=>{throw vo.create("idb-open",{originalErrorMessage:t.message})})),Py}async function cW(t){try{const n=(await PO()).transaction(Md),r=await n.objectStore(Md).get(NO(t));return await n.done,r}catch(e){if(e instanceof ms)xi.warn(e.message);else{const n=vo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function gC(t,e){try{const r=(await PO()).transaction(Md,"readwrite");await r.objectStore(Md).put(e,NO(t)),await r.done}catch(n){if(n instanceof ms)xi.warn(n.message);else{const r=vo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(r.message)}}}function NO(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=1024,dW=30;class hW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>dW){const o=mW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vC(),{heartbeatsToSend:r,unsentEntries:s}=fW(this._heartbeatsCache.heartbeats),i=rm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xi.warn(n),""}}}function vC(){return new Date().toISOString().substring(0,10)}function fW(t,e=uW){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),yC(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),yC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SO()?bO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cW(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return gC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return gC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yC(t){return rm(JSON.stringify({version:2,heartbeats:t})).length}function mW(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gW(t){us(new Mr("platform-logger",e=>new R6(e),"PRIVATE")),us(new Mr("heartbeat",e=>new hW(e),"PRIVATE")),nr(dw,pC,t),nr(dw,pC,"esm2017"),nr("fire-js","")}gW("");var _C={};const wC="@firebase/database",EC="1.0.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OO="";function vW(t){OO=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),qt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Dd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return qs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yW(e)}}catch{}return new _W},fa=DO("localStorage"),wW=DO("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new Ph("@firebase/database"),EW=function(){let t=1;return function(){return t++}}(),MO=function(t){const e=i6(t),n=new t6;n.update(e);const r=n.digest();return NE.encodeByteArray(r)},Nh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Nh.apply(null,r):typeof r=="object"?e+=qt(r):e+=r,e+=" "}return e};let Xu=null,TC=!0;const TW=function(t,e){te(!0,"Can't turn on custom loggers persistently."),Gl.logLevel=$e.VERBOSE,Xu=Gl.log.bind(Gl)},ln=function(...t){if(TC===!0&&(TC=!1,Xu===null&&wW.get("logging_enabled")===!0&&TW()),Xu){const e=Nh.apply(null,t);Xu(e)}},Oh=function(t){return function(...e){ln(t,...e)}},pw=function(...t){const e="FIREBASE INTERNAL ERROR: "+Nh(...t);Gl.error(e)},Si=function(...t){const e=`FIREBASE FATAL ERROR: ${Nh(...t)}`;throw Gl.error(e),new Error(e)},$n=function(...t){const e="FIREBASE WARNING: "+Nh(...t);Gl.warn(e)},xW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ME=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},SW=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ec="[MIN_NAME]",Ma="[MAX_NAME]",el=function(t,e){if(t===e)return 0;if(t===Ec||e===Ma)return-1;if(e===Ec||t===Ma)return 1;{const n=xC(t),r=xC(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},bW=function(t,e){return t===e?0:t<e?-1:1},Tu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+qt(e))},LE=function(t){if(typeof t!="object"||t===null)return qt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=qt(e[r]),n+=":",n+=LE(t[e[r]]);return n+="}",n},LO=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function vn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const VO=function(t){te(!ME(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(s?1:0),c.reverse();const d=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},CW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},IW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function RW(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const AW=new RegExp("^-?(0*)\\d{1,10}$"),kW=-2147483648,PW=2147483647,xC=function(t){if(AW.test(t)){const e=Number(t);if(e>=kW&&e<=PW)return e}return null},qc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw $n("Exception was thrown by user callback.",n),e},Math.floor(0))}},NW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ju=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,lr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ln("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(e)}}class up{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}up.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="5",FO="v",jO="s",UO="r",$O="f",BO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zO="ls",WO="p",mw="ac",HO="websocket",qO="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function MW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function GO(t,e,n){te(typeof e=="string","typeof type must == string"),te(typeof n=="object","typeof params must == object");let r;if(e===HO)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===qO)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);MW(t)&&(n.ns=t.namespace);const s=[];return vn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(){this.counters_={}}incrementCounter(e,n=1){qs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Fz(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny={},Oy={};function FE(t){const e=t.toString();return Ny[e]||(Ny[e]=new LW),Ny[e]}function VW(t,e){const n=t.toString();return Oy[n]||(Oy[n]=e()),Oy[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&qc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="start",jW="close",UW="pLPCommand",$W="pRTLPCB",QO="id",YO="pw",ZO="ser",BW="cb",zW="seg",WW="ts",HW="d",qW="dframe",XO=1870,JO=30,KW=XO-JO,GW=25e3,QW=3e4;class Ml{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Oh(e),this.stats_=FE(n),this.urlFn=l=>(this.appCheckToken&&(l[mw]=this.appCheckToken),GO(n,qO,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new FW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(QW)),SW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jE((...i)=>{const[o,a,l,c,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===SC)this.id=a,this.password=l;else if(o===jW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[SC]="t",r[ZO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[BW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[FO]=VE,this.transportSessionId&&(r[jO]=this.transportSessionId),this.lastSessionId&&(r[zO]=this.lastSessionId),this.applicationId&&(r[WO]=this.applicationId),this.appCheckToken&&(r[mw]=this.appCheckToken),typeof location<"u"&&location.hostname&&BO.test(location.hostname)&&(r[UO]=$O);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ml.forceAllow_=!0}static forceDisallow(){Ml.forceDisallow_=!0}static isAvailable(){return Ml.forceAllow_?!0:!Ml.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!CW()&&!IW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=qt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=mO(n),s=LO(r,KW);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[qW]="t",r[QO]=e,r[YO]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=qt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class jE{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=EW(),window[UW+this.uniqueCallbackIdentifier]=e,window[$W+this.uniqueCallbackIdentifier]=n,this.myIFrame=jE.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ln("frame writing exception"),a.stack&&ln(a.stack),ln(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ln("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[QO]=this.myID,e[YO]=this.myPW,e[ZO]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+JO+r.length<=XO;){const o=this.pendingSegs.shift();r=r+"&"+zW+s+"="+o.seg+"&"+WW+s+"="+o.ts+"&"+HW+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(GW)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ln("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW=16384,ZW=45e3;let am=null;typeof MozWebSocket<"u"?am=MozWebSocket:typeof WebSocket<"u"&&(am=WebSocket);class Zr{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Oh(this.connId),this.stats_=FE(n),this.connURL=Zr.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[FO]=VE,typeof location<"u"&&location.hostname&&BO.test(location.hostname)&&(o[UO]=$O),n&&(o[jO]=n),r&&(o[zO]=r),s&&(o[mw]=s),i&&(o[WO]=i),GO(e,HO,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fa.set("previous_websocket_failure",!0);try{let r;Kz(),this.mySock=new am(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Zr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&am!==null&&!Zr.forceDisallow_}static previouslyFailed(){return fa.isInMemoryStorage||fa.get("previous_websocket_failure")===!0}markConnectionHealthy(){fa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Dd(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(te(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=qt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=LO(n,YW);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ZW))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Zr.responsesRequiredToBeHealthy=2;Zr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{static get ALL_TRANSPORTS(){return[Ml,Zr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Zr&&Zr.isAvailable();let r=n&&!Zr.previouslyFailed();if(e.webSocketOnly&&(n||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Zr];else{const s=this.transports_=[];for(const i of Ld.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Ld.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ld.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW=6e4,JW=5e3,eH=10*1024,tH=100*1024,Dy="t",bC="d",nH="s",CC="r",rH="e",IC="o",RC="a",AC="n",kC="p",sH="h";class iH{constructor(e,n,r,s,i,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Oh("c:"+this.id+":"),this.transportManager_=new Ld(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ju(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Dy in e){const n=e[Dy];n===RC?this.upgradeIfSecondaryHealthy_():n===CC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===IC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Tu("t",e),r=Tu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:kC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:RC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:AC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Tu("t",e),r=Tu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Tu(Dy,e);if(bC in e){const r=e[bC];if(n===sH){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===AC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===nH?this.onConnectionShutdown_(r):n===CC?this.onReset_(r):n===rH?pw("Server Error: "+r):n===IC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pw("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),VE!==r&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ju(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(XW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ju(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(JW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:kC,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.allowedEvents_=e,this.listeners_={},te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){te(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm extends tD{static getInstance(){return new lm}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!OE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return te(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=32,NC=768;class at{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function nt(){return new at("")}function We(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Oo(t){return t.pieces_.length-t.pieceNum_}function ht(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new at(t.pieces_,e)}function UE(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function oH(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Vd(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nD(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new at(e,0)}function Nt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof at)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new at(n,0)}function Be(t){return t.pieceNum_>=t.pieces_.length}function Fn(t,e){const n=We(t),r=We(e);if(n===null)return e;if(n===r)return Fn(ht(t),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function aH(t,e){const n=Vd(t,0),r=Vd(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=el(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function rD(t,e){if(Oo(t)!==Oo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Rr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Oo(t)>Oo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class lH{constructor(e,n){this.errorPrefix_=n,this.parts_=Vd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Vg(this.parts_[r]);sD(this)}}function cH(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Vg(e),sD(t)}function uH(t){const e=t.parts_.pop();t.byteLength_-=Vg(e),t.parts_.length>0&&(t.byteLength_-=1)}function sD(t){if(t.byteLength_>NC)throw new Error(t.errorPrefix_+"has a key path longer than "+NC+" bytes ("+t.byteLength_+").");if(t.parts_.length>PC)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+PC+") or object contains a cycle "+ca(t))}function ca(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends tD{static getInstance(){return new $E}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return te(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=1e3,dH=60*5*1e3,OC=30*1e3,hH=1.3,fH=3e4,pH="server_kill",DC=3;class fi extends eD{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=fi.nextPersistentConnectionId_++,this.log_=Oh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xu,this.maxReconnectDelay_=dH,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$E.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&lm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(qt(i)),te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new kh,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),te(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,c=a.s;fi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&qs(e,"w")){const r=wc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||e6(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=OC)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Jz(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+qt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):pw("Unrecognized action received from server: "+qt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fH&&(this.reconnectDelay_=xu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hH)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+fi.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){te(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?ln("getToken() completed but was canceled"):(ln("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new iH(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{$n(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(pH)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&$n(h),l())}}}interrupt(e){ln("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ln("Resuming connection for reason: "+e),delete this.interruptReasons_[e],lw(this.interruptReasons_)&&(this.reconnectDelay_=xu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>LE(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new at(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ln("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=DC&&(this.reconnectDelay_=OC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ln("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=DC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+OO.replace(/\./g,"-")]=1,OE()?e["framework.cordova"]=1:xO()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=lm.getInstance().currentlyOnline();return lw(this.interruptReasons_)&&e}}fi.nextPersistentConnectionId_=0;fi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ue(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ue(Ec,e),s=new Ue(Ec,n);return this.compare(r,s)!==0}minPost(){return Ue.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf;class iD extends jg{static get __EMPTY_NODE(){return Vf}static set __EMPTY_NODE(e){Vf=e}compare(e,n){return el(e.name,n.name)}isDefinedOn(e){throw Wc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ue.MIN}maxPost(){return new Ue(Ma,Vf)}makePost(e,n){return te(typeof e=="string","KeyIndex indexValue must always be a string."),new Ue(e,Vf)}toString(){return".key"}}const Ql=new iD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff=class{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},or=class Mu{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Mu.RED,this.left=s??Rs.EMPTY_NODE,this.right=i??Rs.EMPTY_NODE}copy(e,n,r,s,i){return new Mu(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Rs.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Mu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Mu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};or.RED=!0;or.BLACK=!1;class mH{copy(e,n,r,s,i){return this}insert(e,n,r){return new or(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Rs=class dp{constructor(e,n=dp.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new dp(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,or.BLACK,null,null))}remove(e){return new dp(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,or.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ff(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ff(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ff(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ff(this.root_,null,this.comparator_,!0,e)}};Rs.EMPTY_NODE=new mH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(t,e){return el(t.name,e.name)}function BE(t,e){return el(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gw;function vH(t){gw=t}const oD=function(t){return typeof t=="number"?"number:"+VO(t):"string:"+t},aD=function(t){if(t.isLeafNode()){const e=t.val();te(typeof e=="string"||typeof e=="number"||typeof e=="object"&&qs(e,".sv"),"Priority must be a string or number.")}else te(t===gw||t.isEmpty(),"priority of unexpected type.");te(t===gw||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MC;class Zt{static set __childrenNodeConstructor(e){MC=e}static get __childrenNodeConstructor(){return MC}constructor(e,n=Zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aD(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Zt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Zt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Be(e)?this:We(e)===".priority"?this.priorityNode_:Zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=We(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(te(r!==".priority"||Oo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oD(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=VO(this.value_):e+=this.value_,this.lazyHash_=MO(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Zt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Zt.__childrenNodeConstructor?-1:(te(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Zt.VALUE_TYPE_ORDER.indexOf(n),i=Zt.VALUE_TYPE_ORDER.indexOf(r);return te(s>=0,"Unknown leaf type: "+n),te(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lD,cD;function yH(t){lD=t}function _H(t){cD=t}class wH extends jg{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?el(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ue.MIN}maxPost(){return new Ue(Ma,new Zt("[PRIORITY-POST]",cD))}makePost(e,n){const r=lD(e);return new Ue(n,new Zt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ot=new wH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH=Math.log(2);class TH{constructor(e){const n=i=>parseInt(Math.log(i)/EH,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cm=function(t,e,n,r){t.sort(e);const s=function(l,c){const d=c-l;let h,f;if(d===0)return null;if(d===1)return h=t[l],f=n?n(h):h,new or(f,h.node,or.BLACK,null,null);{const m=parseInt(d/2,10)+l,T=s(l,m),v=s(m+1,c);return h=t[m],f=n?n(h):h,new or(f,h.node,or.BLACK,T,v)}},i=function(l){let c=null,d=null,h=t.length;const f=function(T,v){const x=h-T,E=h;h-=T;const _=s(x+1,E),S=t[x],O=n?n(S):S;m(new or(O,S.node,v,null,_))},m=function(T){c?(c.left=T,c=T):(d=T,c=T)};for(let T=0;T<l.count;++T){const v=l.nextBitIsOne(),x=Math.pow(2,l.count-(T+1));v?f(x,or.BLACK):(f(x,or.BLACK),f(x,or.RED))}return d},o=new TH(t.length),a=i(o);return new Rs(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let My;const gl={};class li{static get Default(){return te(gl&&Ot,"ChildrenNode.ts has not been loaded"),My=My||new li({".priority":gl},{".priority":Ot}),My}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=wc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Rs?n:null}hasIndex(e){return qs(this.indexSet_,e.toString())}addIndex(e,n){te(e!==Ql,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Ue.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=cm(r,e.getCompare()):a=gl;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new li(d,c)}addToIndexes(e,n){const r=im(this.indexes_,(s,i)=>{const o=wc(this.indexSet_,i);if(te(o,"Missing index implementation for "+i),s===gl)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ue.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),cm(a,o.getCompare())}else return gl;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Ue(e.name,a))),l.insert(e,e.node)}});return new li(r,this.indexSet_)}removeFromIndexes(e,n){const r=im(this.indexes_,s=>{if(s===gl)return s;{const i=n.get(e.name);return i?s.remove(new Ue(e.name,i)):s}});return new li(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su;class Ee{static get EMPTY_NODE(){return Su||(Su=new Ee(new Rs(BE),null,li.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aD(this.priorityNode_),this.children_.isEmpty()&&te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Su}updatePriority(e){return this.children_.isEmpty()?this:new Ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Su:n}}getChild(e){const n=We(e);return n===null?this:this.getImmediateChild(n).getChild(ht(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(te(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ue(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Su:this.priorityNode_;return new Ee(s,o,i)}}updateChild(e,n){const r=We(e);if(r===null)return n;{te(We(e)!==".priority"||Oo(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ht(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Ot,(o,a)=>{n[o]=a.val(e),r++,i&&Ee.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+oD(this.getPriority().val())+":"),this.forEachChild(Ot,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":MO(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Ue(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ue(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ue(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ue.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ue.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Dh?-1:0}withIndex(e){if(e===Ql||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ql||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ot),s=n.getIterator(Ot);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ql?null:this.indexMap_.get(e.toString())}}Ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class xH extends Ee{constructor(){super(new Rs(BE),Ee.EMPTY_NODE,li.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ee.EMPTY_NODE}isEmpty(){return!1}}const Dh=new xH;Object.defineProperties(Ue,{MIN:{value:new Ue(Ec,Ee.EMPTY_NODE)},MAX:{value:new Ue(Ma,Dh)}});iD.__EMPTY_NODE=Ee.EMPTY_NODE;Zt.__childrenNodeConstructor=Ee;vH(Dh);_H(Dh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH=!0;function Ht(t,e=null){if(t===null)return Ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),te(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Zt(n,Ht(e))}if(!(t instanceof Array)&&SH){const n=[];let r=!1;if(vn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ht(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ue(o,l)))}}),n.length===0)return Ee.EMPTY_NODE;const i=cm(n,gH,o=>o.name,BE);if(r){const o=cm(n,Ot.getCompare());return new Ee(i,Ht(e),new li({".priority":o},{".priority":Ot}))}else return new Ee(i,Ht(e),li.Default)}else{let n=Ee.EMPTY_NODE;return vn(t,(r,s)=>{if(qs(t,r)&&r.substring(0,1)!=="."){const i=Ht(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ht(e))}}yH(Ht);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH extends jg{constructor(e){super(),this.indexPath_=e,te(!Be(e)&&We(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?el(e.name,n.name):i}makePost(e,n){const r=Ht(e),s=Ee.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ue(n,s)}maxPost(){const e=Ee.EMPTY_NODE.updateChild(this.indexPath_,Dh);return new Ue(Ma,e)}toString(){return Vd(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH extends jg{compare(e,n){const r=e.node.compareTo(n.node);return r===0?el(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ue.MIN}maxPost(){return Ue.MAX}makePost(e,n){const r=Ht(e);return new Ue(n,r)}toString(){return".value"}}const IH=new CH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){return{type:"value",snapshotNode:t}}function Tc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Fd(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jd(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function RH(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){te(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Fd(n,a)):te(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Tc(n,r)):o.trackChildChange(jd(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ot,(s,i)=>{n.hasChild(s)||r.trackChildChange(Fd(s,i))}),n.isLeafNode()||n.forEachChild(Ot,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(jd(s,i,o))}else r.trackChildChange(Tc(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.indexedFilter_=new zE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ud.getStartPost_(e),this.endPost_=Ud.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Ue(n,r))||(r=Ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ee.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Ee.EMPTY_NODE);const i=this;return n.forEachChild(Ot,(o,a)=>{i.matches(new Ue(o,a))||(s=s.updateImmediateChild(o,Ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ud(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Ue(n,r))||(r=Ee.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Ee.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Ee.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,Ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,m)=>h(m,f)}else o=this.index_.getCompare();const a=e;te(a.numChildren()===this.limit_,"");const l=new Ue(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,l);if(d&&!r.isEmpty()&&m>=0)return i!=null&&i.trackChildChange(jd(n,r,h)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Fd(n,h));const v=a.updateImmediateChild(n,Ee.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Tc(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}}else return r.isEmpty()?e:d&&o(c,l)>=0?(i!=null&&(i.trackChildChange(Fd(c.name,c.node)),i.trackChildChange(Tc(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,Ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ot}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ec}hasEnd(){return this.endSet_}getIndexEndValue(){return te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ma}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ot}copy(){const e=new WE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kH(t){return t.loadsAllData()?new zE(t.getIndex()):t.hasLimit()?new AH(t):new Ud(t)}function LC(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ot?n="$priority":t.index_===IH?n="$value":t.index_===Ql?n="$key":(te(t.index_ instanceof bH,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=qt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=qt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+qt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=qt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+qt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function VC(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ot&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends eD{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Oh("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=um.getListenId_(e,r),a={};this.listens_[o]=a;const l=LC(e._queryParams);this.restRequest_(i+".json",l,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(i,h,!1,r),wc(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(e,n){const r=um.getListenId_(e,n);delete this.listens_[r]}get(e){const n=LC(e._queryParams),r=e._path.toString(),s=new kh;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Hc(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Dd(a.responseText)}catch{$n("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&$n("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(){this.rootNode_=Ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(){return{value:null,children:new Map}}function dD(t,e,n){if(Be(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=We(e);t.children.has(r)||t.children.set(r,dm());const s=t.children.get(r);e=ht(e),dD(s,e,n)}}function vw(t,e,n){t.value!==null?n(e,t.value):NH(t,(r,s)=>{const i=new at(e.toString()+"/"+r);vw(s,i,n)})}function NH(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&vn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=10*1e3,DH=30*1e3,MH=5*60*1e3;class LH{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new OH(e);const r=FC+(DH-FC)*Math.random();Ju(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;vn(e,(s,i)=>{i>0&&qs(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Ju(this.reportStats_.bind(this),Math.floor(Math.random()*2*MH))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var es;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(es||(es={}));function HE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function KE(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=es.ACK_USER_WRITE,this.source=HE()}operationForChild(e){if(Be(this.path)){if(this.affectedTree.value!=null)return te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new at(e));return new hm(nt(),n,this.revert)}}else return te(We(this.path)===e,"operationForChild called for unrelated child."),new hm(ht(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.source=e,this.path=n,this.type=es.LISTEN_COMPLETE}operationForChild(e){return Be(this.path)?new $d(this.source,nt()):new $d(this.source,ht(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=es.OVERWRITE}operationForChild(e){return Be(this.path)?new La(this.source,nt(),this.snap.getImmediateChild(e)):new La(this.source,ht(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=es.MERGE}operationForChild(e){if(Be(this.path)){const n=this.children.subtree(new at(e));return n.isEmpty()?null:n.value?new La(this.source,nt(),n.value):new xc(this.source,nt(),n)}else return te(We(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xc(this.source,ht(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Be(e))return this.isFullyInitialized()&&!this.filtered_;const n=We(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function FH(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(RH(o.childName,o.snapshotNode))}),bu(t,s,"child_removed",e,r,n),bu(t,s,"child_added",e,r,n),bu(t,s,"child_moved",i,r,n),bu(t,s,"child_changed",e,r,n),bu(t,s,"value",e,r,n),s}function bu(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>UH(t,a,l)),o.forEach(a=>{const l=jH(t,a,i);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function jH(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function UH(t,e,n){if(e.childName==null||n.childName==null)throw Wc("Should only compare child_ events.");const r=new Ue(e.childName,e.snapshotNode),s=new Ue(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e){return{eventCache:t,serverCache:e}}function ed(t,e,n,r){return Ug(new Do(e,n,r),t.serverCache)}function hD(t,e,n,r){return Ug(t.eventCache,new Do(e,n,r))}function fm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Va(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ly;const $H=()=>(Ly||(Ly=new Rs(bW)),Ly);class dt{static fromObject(e){let n=new dt(null);return vn(e,(r,s)=>{n=n.set(new at(r),s)}),n}constructor(e,n=$H()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:nt(),value:this.value};if(Be(e))return null;{const r=We(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ht(e),n);return i!=null?{path:Nt(new at(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Be(e))return this;{const n=We(e),r=this.children.get(n);return r!==null?r.subtree(ht(e)):new dt(null)}}set(e,n){if(Be(e))return new dt(n,this.children);{const r=We(e),i=(this.children.get(r)||new dt(null)).set(ht(e),n),o=this.children.insert(r,i);return new dt(this.value,o)}}remove(e){if(Be(e))return this.children.isEmpty()?new dt(null):new dt(null,this.children);{const n=We(e),r=this.children.get(n);if(r){const s=r.remove(ht(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new dt(null):new dt(this.value,i)}else return this}}get(e){if(Be(e))return this.value;{const n=We(e),r=this.children.get(n);return r?r.get(ht(e)):null}}setTree(e,n){if(Be(e))return n;{const r=We(e),i=(this.children.get(r)||new dt(null)).setTree(ht(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new dt(this.value,o)}}fold(e){return this.fold_(nt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Nt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,nt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Be(e))return null;{const i=We(e),o=this.children.get(i);return o?o.findOnPath_(ht(e),Nt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,nt(),n)}foreachOnPath_(e,n,r){if(Be(e))return this;{this.value&&r(n,this.value);const s=We(e),i=this.children.get(s);return i?i.foreachOnPath_(ht(e),Nt(n,s),r):new dt(null)}}foreach(e){this.foreach_(nt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Nt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.writeTree_=e}static empty(){return new is(new dt(null))}}function td(t,e,n){if(Be(e))return new is(new dt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Fn(s,e);return i=i.updateChild(o,n),new is(t.writeTree_.set(s,i))}else{const s=new dt(n),i=t.writeTree_.setTree(e,s);return new is(i)}}}function yw(t,e,n){let r=t;return vn(n,(s,i)=>{r=td(r,Nt(e,s),i)}),r}function jC(t,e){if(Be(e))return is.empty();{const n=t.writeTree_.setTree(e,new dt(null));return new is(n)}}function _w(t,e){return tl(t,e)!=null}function tl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Fn(n.path,e)):null}function UC(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ot,(r,s)=>{e.push(new Ue(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Ue(r,s.value))}),e}function yo(t,e){if(Be(e))return t;{const n=tl(t,e);return n!=null?new is(new dt(n)):new is(t.writeTree_.subtree(e))}}function ww(t){return t.writeTree_.isEmpty()}function Sc(t,e){return fD(nt(),t.writeTree_,e)}function fD(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(te(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=fD(Nt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Nt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t,e){return vD(e,t)}function BH(t,e,n,r,s){te(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=td(t.visibleWrites,e,n)),t.lastWriteId=r}function zH(t,e,n,r){te(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=yw(t.visibleWrites,e,n),t.lastWriteId=r}function WH(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function HH(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);te(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&qH(a,r.path)?s=!1:Rr(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return KH(t),!0;if(r.snap)t.visibleWrites=jC(t.visibleWrites,r.path);else{const a=r.children;vn(a,l=>{t.visibleWrites=jC(t.visibleWrites,Nt(r.path,l))})}return!0}else return!1}function qH(t,e){if(t.snap)return Rr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Rr(Nt(t.path,n),e))return!0;return!1}function KH(t){t.visibleWrites=pD(t.allWrites,GH,nt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function GH(t){return t.visible}function pD(t,e,n){let r=is.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Rr(n,o)?(a=Fn(n,o),r=td(r,a,i.snap)):Rr(o,n)&&(a=Fn(o,n),r=td(r,nt(),i.snap.getChild(a)));else if(i.children){if(Rr(n,o))a=Fn(n,o),r=yw(r,a,i.children);else if(Rr(o,n))if(a=Fn(o,n),Be(a))r=yw(r,nt(),i.children);else{const l=wc(i.children,We(a));if(l){const c=l.getChild(ht(a));r=td(r,nt(),c)}}}else throw Wc("WriteRecord should have .snap or .children")}}return r}function mD(t,e,n,r,s){if(!r&&!s){const i=tl(t.visibleWrites,e);if(i!=null)return i;{const o=yo(t.visibleWrites,e);if(ww(o))return n;if(n==null&&!_w(o,nt()))return null;{const a=n||Ee.EMPTY_NODE;return Sc(o,a)}}}else{const i=yo(t.visibleWrites,e);if(!s&&ww(i))return n;if(!s&&n==null&&!_w(i,nt()))return null;{const o=function(c){return(c.visible||s)&&(!r||!~r.indexOf(c.writeId))&&(Rr(c.path,e)||Rr(e,c.path))},a=pD(t.allWrites,o,e),l=n||Ee.EMPTY_NODE;return Sc(a,l)}}}function QH(t,e,n){let r=Ee.EMPTY_NODE;const s=tl(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Ot,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=yo(t.visibleWrites,e);return n.forEachChild(Ot,(o,a)=>{const l=Sc(yo(i,new at(o)),a);r=r.updateImmediateChild(o,l)}),UC(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=yo(t.visibleWrites,e);return UC(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function YH(t,e,n,r,s){te(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Nt(e,n);if(_w(t.visibleWrites,i))return null;{const o=yo(t.visibleWrites,i);return ww(o)?s.getChild(n):Sc(o,s.getChild(n))}}function ZH(t,e,n,r){const s=Nt(e,n),i=tl(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=yo(t.visibleWrites,s);return Sc(o,r.getNode().getImmediateChild(n))}else return null}function XH(t,e){return tl(t.visibleWrites,e)}function JH(t,e,n,r,s,i,o){let a;const l=yo(t.visibleWrites,e),c=tl(l,nt());if(c!=null)a=c;else if(n!=null)a=Sc(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=f.getNext();for(;m&&d.length<s;)h(m,r)!==0&&d.push(m),m=f.getNext();return d}else return[]}function eq(){return{visibleWrites:is.empty(),allWrites:[],lastWriteId:-1}}function pm(t,e,n,r){return mD(t.writeTree,t.treePath,e,n,r)}function GE(t,e){return QH(t.writeTree,t.treePath,e)}function $C(t,e,n,r){return YH(t.writeTree,t.treePath,e,n,r)}function mm(t,e){return XH(t.writeTree,Nt(t.treePath,e))}function tq(t,e,n,r,s,i){return JH(t.writeTree,t.treePath,e,n,r,s,i)}function QE(t,e,n){return ZH(t.writeTree,t.treePath,e,n)}function gD(t,e){return vD(Nt(t.treePath,e),t.writeTree)}function vD(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),te(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,jd(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Fd(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Tc(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,jd(r,e.snapshotNode,s.oldSnap));else throw Wc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const yD=new rq;class YE{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Do(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return QE(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Va(this.viewCache_),i=tq(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(t){return{filter:t}}function iq(t,e){te(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),te(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function oq(t,e,n,r,s){const i=new nq;let o,a;if(n.type===es.OVERWRITE){const c=n;c.source.fromUser?o=Ew(t,e,c.path,c.snap,r,s,i):(te(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Be(c.path),o=gm(t,e,c.path,c.snap,r,s,a,i))}else if(n.type===es.MERGE){const c=n;c.source.fromUser?o=lq(t,e,c.path,c.children,r,s,i):(te(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Tw(t,e,c.path,c.children,r,s,a,i))}else if(n.type===es.ACK_USER_WRITE){const c=n;c.revert?o=dq(t,e,c.path,r,s,i):o=cq(t,e,c.path,c.affectedTree,r,s,i)}else if(n.type===es.LISTEN_COMPLETE)o=uq(t,e,n.path,r,i);else throw Wc("Unknown operation type: "+n.type);const l=i.getChanges();return aq(e,o,l),{viewCache:o,changes:l}}function aq(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=fm(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(uD(fm(e)))}}function _D(t,e,n,r,s,i){const o=e.eventCache;if(mm(r,n)!=null)return e;{let a,l;if(Be(n))if(te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Va(e),d=c instanceof Ee?c:Ee.EMPTY_NODE,h=GE(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const c=pm(r,Va(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=We(n);if(c===".priority"){te(Oo(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=$C(r,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=ht(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=$C(r,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(d,f):h=o.getNode().getImmediateChild(c)}else h=QE(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,d,s,i):a=o.getNode()}}return ed(e,a,o.isFullyInitialized()||Be(n),t.filter.filtersNodes())}}function gm(t,e,n,r,s,i,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(Be(n))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,r);c=d.updateFullNode(l.getNode(),m,null)}else{const m=We(n);if(!l.isCompleteForPath(n)&&Oo(n)>1)return e;const T=ht(n),x=l.getNode().getImmediateChild(m).updateChild(T,r);m===".priority"?c=d.updatePriority(l.getNode(),x):c=d.updateChild(l.getNode(),m,x,T,yD,null)}const h=hD(e,c,l.isFullyInitialized()||Be(n),d.filtersNodes()),f=new YE(s,h,i);return _D(t,h,n,s,f,a)}function Ew(t,e,n,r,s,i,o){const a=e.eventCache;let l,c;const d=new YE(s,e,i);if(Be(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ed(e,c,!0,t.filter.filtersNodes());else{const h=We(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=ed(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=ht(n),m=a.getNode().getImmediateChild(h);let T;if(Be(f))T=r;else{const v=d.getCompleteChild(h);v!=null?UE(f)===".priority"&&v.getChild(nD(f)).isEmpty()?T=v:T=v.updateChild(f,r):T=Ee.EMPTY_NODE}if(m.equals(T))l=e;else{const v=t.filter.updateChild(a.getNode(),h,T,f,d,o);l=ed(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function BC(t,e){return t.eventCache.isCompleteForChild(e)}function lq(t,e,n,r,s,i,o){let a=e;return r.foreach((l,c)=>{const d=Nt(n,l);BC(e,We(d))&&(a=Ew(t,a,d,c,s,i,o))}),r.foreach((l,c)=>{const d=Nt(n,l);BC(e,We(d))||(a=Ew(t,a,d,c,s,i,o))}),a}function zC(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Tw(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Be(n)?c=r:c=new dt(null).setTree(n,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const m=e.serverCache.getNode().getImmediateChild(h),T=zC(t,m,f);l=gm(t,l,new at(h),T,s,i,o,a)}}),c.children.inorderTraversal((h,f)=>{const m=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!m){const T=e.serverCache.getNode().getImmediateChild(h),v=zC(t,T,f);l=gm(t,l,new at(h),v,s,i,o,a)}}),l}function cq(t,e,n,r,s,i,o){if(mm(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Be(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return gm(t,e,n,l.getNode().getChild(n),s,i,a,o);if(Be(n)){let c=new dt(null);return l.getNode().forEachChild(Ql,(d,h)=>{c=c.set(new at(d),h)}),Tw(t,e,n,c,s,i,a,o)}else return e}else{let c=new dt(null);return r.foreach((d,h)=>{const f=Nt(n,d);l.isCompleteForPath(f)&&(c=c.set(d,l.getNode().getChild(f)))}),Tw(t,e,n,c,s,i,a,o)}}function uq(t,e,n,r,s){const i=e.serverCache,o=hD(e,i.getNode(),i.isFullyInitialized()||Be(n),i.isFiltered());return _D(t,o,n,r,yD,s)}function dq(t,e,n,r,s,i){let o;if(mm(r,n)!=null)return e;{const a=new YE(r,e,s),l=e.eventCache.getNode();let c;if(Be(n)||We(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=pm(r,Va(e));else{const h=e.serverCache.getNode();te(h instanceof Ee,"serverChildren would be complete if leaf node"),d=GE(r,h)}d=d,c=t.filter.updateFullNode(l,d,i)}else{const d=We(n);let h=QE(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?c=t.filter.updateChild(l,d,h,ht(n),a,i):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,Ee.EMPTY_NODE,ht(n),a,i):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pm(r,Va(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||mm(r,nt())!=null,ed(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new zE(r.getIndex()),i=kH(r);this.processor_=sq(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(Ee.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(Ee.EMPTY_NODE,a.getNode(),null),d=new Do(l,o.isFullyInitialized(),s.filtersNodes()),h=new Do(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ug(h,d),this.eventGenerator_=new VH(this.query_)}get query(){return this.query_}}function fq(t){return t.viewCache_.serverCache.getNode()}function pq(t){return fm(t.viewCache_)}function mq(t,e){const n=Va(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Be(e)&&!n.getImmediateChild(We(e)).isEmpty())?n.getChild(e):null}function WC(t){return t.eventRegistrations_.length===0}function gq(t,e){t.eventRegistrations_.push(e)}function HC(t,e,n){const r=[];if(n){te(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function qC(t,e,n,r){e.type===es.MERGE&&e.source.queryId!==null&&(te(Va(t.viewCache_),"We should always have a full cache before handling merges"),te(fm(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=oq(t.processor_,s,e,n,r);return iq(t.processor_,i.viewCache),te(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,wD(t,i.changes,i.viewCache.eventCache.getNode(),null)}function vq(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ot,(i,o)=>{r.push(Tc(i,o))}),n.isFullyInitialized()&&r.push(uD(n.getNode())),wD(t,r,n.getNode(),e)}function wD(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return FH(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm;class ED{constructor(){this.views=new Map}}function yq(t){te(!vm,"__referenceConstructor has already been defined"),vm=t}function _q(){return te(vm,"Reference.ts has not been loaded"),vm}function wq(t){return t.views.size===0}function ZE(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return te(i!=null,"SyncTree gave us an op for an invalid query."),qC(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(qC(o,e,n,r));return i}}function TD(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=pm(n,s?r:null),l=!1;a?l=!0:r instanceof Ee?(a=GE(n,r),l=!1):(a=Ee.EMPTY_NODE,l=!1);const c=Ug(new Do(a,l,!1),new Do(r,s,!1));return new hq(e,c)}return o}function Eq(t,e,n,r,s,i){const o=TD(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),gq(o,n),vq(o,n)}function Tq(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Mo(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(HC(c,n,r)),WC(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||i.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(HC(l,n,r)),WC(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Mo(t)&&i.push(new(_q())(e._repo,e._path)),{removed:i,events:o}}function xD(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function _o(t,e){let n=null;for(const r of t.views.values())n=n||mq(r,e);return n}function SD(t,e){if(e._queryParams.loadsAllData())return Bg(t);{const r=e._queryIdentifier;return t.views.get(r)}}function bD(t,e){return SD(t,e)!=null}function Mo(t){return Bg(t)!=null}function Bg(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym;function xq(t){te(!ym,"__referenceConstructor has already been defined"),ym=t}function Sq(){return te(ym,"Reference.ts has not been loaded"),ym}let bq=1;class KC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new dt(null),this.pendingWriteTree_=eq(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CD(t,e,n,r,s){return BH(t.pendingWriteTree_,e,n,r,s),s?Kc(t,new La(HE(),e,n)):[]}function Cq(t,e,n,r){zH(t.pendingWriteTree_,e,n,r);const s=dt.fromObject(n);return Kc(t,new xc(HE(),e,s))}function so(t,e,n=!1){const r=WH(t.pendingWriteTree_,e);if(HH(t.pendingWriteTree_,e)){let i=new dt(null);return r.snap!=null?i=i.set(nt(),!0):vn(r.children,o=>{i=i.set(new at(o),!0)}),Kc(t,new hm(r.path,i,n))}else return[]}function Mh(t,e,n){return Kc(t,new La(qE(),e,n))}function Iq(t,e,n){const r=dt.fromObject(n);return Kc(t,new xc(qE(),e,r))}function Rq(t,e){return Kc(t,new $d(qE(),e))}function Aq(t,e,n){const r=JE(t,n);if(r){const s=eT(r),i=s.path,o=s.queryId,a=Fn(i,e),l=new $d(KE(o),a);return tT(t,i,l)}else return[]}function ID(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||bD(o,e))){const l=Tq(o,e,n,r);wq(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=l.removed;if(a=l.events,!s){const d=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(i,(f,m)=>Mo(m));if(d&&!h){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const m=Oq(f);for(let T=0;T<m.length;++T){const v=m[T],x=v.query,E=PD(t,v);t.listenProvider_.startListening(nd(x),Bd(t,x),E.hashFn,E.onComplete)}}}!h&&c.length>0&&!r&&(d?t.listenProvider_.stopListening(nd(e),null):c.forEach(f=>{const m=t.queryToTagMap.get(zg(f));t.listenProvider_.stopListening(nd(f),m)}))}Dq(t,c)}return a}function RD(t,e,n,r){const s=JE(t,r);if(s!=null){const i=eT(s),o=i.path,a=i.queryId,l=Fn(o,e),c=new La(KE(a),l,n);return tT(t,o,c)}else return[]}function kq(t,e,n,r){const s=JE(t,r);if(s){const i=eT(s),o=i.path,a=i.queryId,l=Fn(o,e),c=dt.fromObject(n),d=new xc(KE(a),l,c);return tT(t,o,d)}else return[]}function Pq(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,m)=>{const T=Fn(f,s);i=i||_o(m,T),o=o||Mo(m)});let a=t.syncPointTree_.get(s);a?(o=o||Mo(a),i=i||_o(a,nt())):(a=new ED,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=Ee.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((m,T)=>{const v=_o(T,nt());v&&(i=i.updateImmediateChild(m,v))}));const c=bD(a,e);if(!c&&!e._queryParams.loadsAllData()){const f=zg(e);te(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=Mq();t.queryToTagMap.set(f,m),t.tagToQueryMap.set(m,f)}const d=$g(t.pendingWriteTree_,s);let h=Eq(a,e,n,d,i,l);if(!c&&!o&&!r){const f=SD(a,e);h=h.concat(Lq(t,e,f))}return h}function XE(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Fn(o,e),c=_o(a,l);if(c)return c});return mD(s,e,i,n,!0)}function Nq(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{const h=Fn(c,n);r=r||_o(d,h)});let s=t.syncPointTree_.get(n);s?r=r||_o(s,nt()):(s=new ED,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Do(r,!0,!1):null,a=$g(t.pendingWriteTree_,e._path),l=TD(s,e,a,i?o.getNode():Ee.EMPTY_NODE,i);return pq(l)}function Kc(t,e){return AD(e,t.syncPointTree_,null,$g(t.pendingWriteTree_,nt()))}function AD(t,e,n,r){if(Be(t.path))return kD(t,e,n,r);{const s=e.get(nt());n==null&&s!=null&&(n=_o(s,nt()));let i=[];const o=We(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=gD(r,o);i=i.concat(AD(a,l,c,d))}return s&&(i=i.concat(ZE(s,t,r,n))),i}}function kD(t,e,n,r){const s=e.get(nt());n==null&&s!=null&&(n=_o(s,nt()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=gD(r,o),d=t.operationForChild(o);d&&(i=i.concat(kD(d,a,l,c)))}),s&&(i=i.concat(ZE(s,t,r,n))),i}function PD(t,e){const n=e.query,r=Bd(t,n);return{hashFn:()=>(fq(e)||Ee.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?Aq(t,n._path,r):Rq(t,n._path);{const i=RW(s,n);return ID(t,n,null,i)}}}}function Bd(t,e){const n=zg(e);return t.queryToTagMap.get(n)}function zg(t){return t._path.toString()+"$"+t._queryIdentifier}function JE(t,e){return t.tagToQueryMap.get(e)}function eT(t){const e=t.indexOf("$");return te(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new at(t.substr(0,e))}}function tT(t,e,n){const r=t.syncPointTree_.get(e);te(r,"Missing sync point for query tag that we're tracking");const s=$g(t.pendingWriteTree_,e);return ZE(r,n,s,null)}function Oq(t){return t.fold((e,n,r)=>{if(n&&Mo(n))return[Bg(n)];{let s=[];return n&&(s=xD(n)),vn(r,(i,o)=>{s=s.concat(o)}),s}})}function nd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Sq())(t._repo,t._path):t}function Dq(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=zg(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Mq(){return bq++}function Lq(t,e,n){const r=e._path,s=Bd(t,e),i=PD(t,n),o=t.listenProvider_.startListening(nd(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)te(!Mo(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,h)=>{if(!Be(c)&&d&&Mo(d))return[Bg(d).query];{let f=[];return d&&(f=f.concat(xD(d).map(m=>m.query))),vn(h,(m,T)=>{f=f.concat(T)}),f}});for(let c=0;c<l.length;++c){const d=l[c];t.listenProvider_.stopListening(nd(d),Bd(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new nT(n)}node(){return this.node_}}class rT{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Nt(this.path_,e);return new rT(this.syncTree_,n)}node(){return XE(this.syncTree_,this.path_)}}const Vq=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},GC=function(t,e,n){if(!t||typeof t!="object")return t;if(te(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Fq(t[".sv"],e,n);if(typeof t[".sv"]=="object")return jq(t[".sv"],e);te(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Fq=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:te(!1,"Unexpected server value: "+t)}},jq=function(t,e,n){t.hasOwnProperty("increment")||te(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&te(!1,"Unexpected increment value: "+r);const s=e.node();if(te(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},ND=function(t,e,n,r){return sT(e,new rT(n,t),r)},OD=function(t,e,n){return sT(t,new nT(e),n)};function sT(t,e,n){const r=t.getPriority().val(),s=GC(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=GC(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Zt(a,Ht(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Zt(s))),o.forEachChild(Ot,(a,l)=>{const c=sT(l,e.getImmediateChild(a),n);c!==l&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function oT(t,e){let n=e instanceof at?e:new at(e),r=t,s=We(n);for(;s!==null;){const i=wc(r.node.children,s)||{children:{},childCount:0};r=new iT(s,r,i),n=ht(n),s=We(n)}return r}function Gc(t){return t.node.value}function DD(t,e){t.node.value=e,xw(t)}function MD(t){return t.node.childCount>0}function Uq(t){return Gc(t)===void 0&&!MD(t)}function Wg(t,e){vn(t.node.children,(n,r)=>{e(new iT(n,t,r))})}function LD(t,e,n,r){n&&e(t),Wg(t,s=>{LD(s,e,!0)})}function $q(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Lh(t){return new at(t.parent===null?t.name:Lh(t.parent)+"/"+t.name)}function xw(t){t.parent!==null&&Bq(t.parent,t.name,t)}function Bq(t,e,n){const r=Uq(n),s=qs(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,xw(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,xw(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq=/[\[\].#$\/\u0000-\u001F\u007F]/,Wq=/[\[\].#$\u0000-\u001F\u007F]/,Vy=10*1024*1024,aT=function(t){return typeof t=="string"&&t.length!==0&&!zq.test(t)},VD=function(t){return typeof t=="string"&&t.length!==0&&!Wq.test(t)},Hq=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),VD(t)},qq=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ME(t)||t&&typeof t=="object"&&qs(t,".sv")},FD=function(t,e,n,r){r&&e===void 0||Hg(Lg(t,"value"),e,n)},Hg=function(t,e,n){const r=n instanceof at?new lH(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ca(r));if(typeof e=="function")throw new Error(t+"contains a function "+ca(r)+" with contents = "+e.toString());if(ME(e))throw new Error(t+"contains "+e.toString()+" "+ca(r));if(typeof e=="string"&&e.length>Vy/3&&Vg(e)>Vy)throw new Error(t+"contains a string greater than "+Vy+" utf8 bytes "+ca(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(vn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!aT(o)))throw new Error(t+" contains an invalid key ("+o+") "+ca(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cH(r,o),Hg(t,a,r),uH(r)}),s&&i)throw new Error(t+' contains ".value" child '+ca(r)+" in addition to actual children.")}},Kq=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Vd(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!aT(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(aH);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&Rr(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Gq=function(t,e,n,r){const s=Lg(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];vn(e,(o,a)=>{const l=new at(o);if(Hg(s,a,Nt(n,l)),UE(l)===".priority"&&!qq(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(l)}),Kq(s,i)},jD=function(t,e,n,r){if(!VD(n))throw new Error(Lg(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Qq=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jD(t,e,n)},lT=function(t,e){if(We(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Yq=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!aT(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Hq(n))throw new Error(Lg(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cT(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!rD(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Lr(t,e,n){cT(t,n),Xq(t,r=>Rr(r,e)||Rr(e,r))}function Xq(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Jq(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Jq(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Xu&&ln("event: "+n.toString()),qc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8="repo_interrupt",t8=25;class n8{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dm(),this.transactionQueueTree_=new iT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function r8(t,e,n){if(t.stats_=FE(t.repoInfo_),t.forceRestClient_||NW())t.server_=new um(t.repoInfo_,(r,s,i,o)=>{QC(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>YC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{qt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new fi(t.repoInfo_,e,(r,s,i,o)=>{QC(t,r,s,i,o)},r=>{YC(t,r)},r=>{s8(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=VW(t.repoInfo_,()=>new LH(t.stats_,t.server_)),t.infoData_=new PH,t.infoSyncTree_=new KC({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Mh(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),uT(t,"connected",!1),t.serverSyncTree_=new KC({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const c=o(a,l);Lr(t.eventQueue_,r._path,c)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function UD(t){const n=t.infoData_.getNode(new at(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qg(t){return Vq({timestamp:UD(t)})}function QC(t,e,n,r,s){t.dataUpdateCount++;const i=new at(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=im(n,c=>Ht(c));o=kq(t.serverSyncTree_,i,l,s)}else{const l=Ht(n);o=RD(t.serverSyncTree_,i,l,s)}else if(r){const l=im(n,c=>Ht(c));o=Iq(t.serverSyncTree_,i,l)}else{const l=Ht(n);o=Mh(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=bc(t,i)),Lr(t.eventQueue_,a,o)}function YC(t,e){uT(t,"connected",e),e===!1&&l8(t)}function s8(t,e){vn(e,(n,r)=>{uT(t,n,r)})}function uT(t,e,n){const r=new at("/.info/"+e),s=Ht(n);t.infoData_.updateSnapshot(r,s);const i=Mh(t.infoSyncTree_,r,s);Lr(t.eventQueue_,r,i)}function dT(t){return t.nextWriteId_++}function i8(t,e,n){const r=Nq(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Ht(s).withIndex(e._queryParams.getIndex());Pq(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Mh(t.serverSyncTree_,e._path,i);else{const a=Bd(t.serverSyncTree_,e);o=RD(t.serverSyncTree_,e._path,i,a)}return Lr(t.eventQueue_,e._path,o),ID(t.serverSyncTree_,e,n,null,!0),i},s=>(Vh(t,"get for query "+qt(e)+" failed: "+s),Promise.reject(new Error(s))))}function o8(t,e,n,r,s){Vh(t,"set",{path:e.toString(),value:n,priority:r});const i=qg(t),o=Ht(n,r),a=XE(t.serverSyncTree_,e),l=OD(o,a,i),c=dT(t),d=CD(t.serverSyncTree_,e,l,c,!0);cT(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,m)=>{const T=f==="ok";T||$n("set at "+e+" failed: "+f);const v=so(t.serverSyncTree_,c,!T);Lr(t.eventQueue_,e,v),Sw(t,s,f,m)});const h=fT(t,e);bc(t,h),Lr(t.eventQueue_,h,[])}function a8(t,e,n,r){Vh(t,"update",{path:e.toString(),value:n});let s=!0;const i=qg(t),o={};if(vn(n,(a,l)=>{s=!1,o[a]=ND(Nt(e,a),Ht(l),t.serverSyncTree_,i)}),s)ln("update() called with empty data.  Don't do anything."),Sw(t,r,"ok",void 0);else{const a=dT(t),l=Cq(t.serverSyncTree_,e,o,a);cT(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,d)=>{const h=c==="ok";h||$n("update at "+e+" failed: "+c);const f=so(t.serverSyncTree_,a,!h),m=f.length>0?bc(t,e):e;Lr(t.eventQueue_,m,f),Sw(t,r,c,d)}),vn(n,c=>{const d=fT(t,Nt(e,c));bc(t,d)}),Lr(t.eventQueue_,e,[])}}function l8(t){Vh(t,"onDisconnectEvents");const e=qg(t),n=dm();vw(t.onDisconnect_,nt(),(s,i)=>{const o=ND(s,i,t.serverSyncTree_,e);dD(n,s,o)});let r=[];vw(n,nt(),(s,i)=>{r=r.concat(Mh(t.serverSyncTree_,s,i));const o=fT(t,s);bc(t,o)}),t.onDisconnect_=dm(),Lr(t.eventQueue_,nt(),r)}function c8(t){t.persistentConnection_&&t.persistentConnection_.interrupt(e8)}function Vh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ln(n,...e)}function Sw(t,e,n,r){e&&qc(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function $D(t,e,n){return XE(t.serverSyncTree_,e,n)||Ee.EMPTY_NODE}function hT(t,e=t.transactionQueueTree_){if(e||Kg(t,e),Gc(e)){const n=zD(t,e);te(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&u8(t,Lh(e),n)}else MD(e)&&Wg(e,n=>{hT(t,n)})}function u8(t,e,n){const r=n.map(c=>c.currentWriteId),s=$D(t,e,r);let i=s;const o=s.hash();for(let c=0;c<n.length;c++){const d=n[c];te(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Fn(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Vh(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(so(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Kg(t,oT(t.transactionQueueTree_,e)),hT(t,t.transactionQueueTree_),Lr(t.eventQueue_,e,d);for(let f=0;f<h.length;f++)qc(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{$n("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}bc(t,e)}},o)}function bc(t,e){const n=BD(t,e),r=Lh(n),s=zD(t,n);return d8(t,s,r),r}function d8(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Fn(n,l.path);let d=!1,h;if(te(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,s=s.concat(so(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=t8)d=!0,h="maxretry",s=s.concat(so(t.serverSyncTree_,l.currentWriteId,!0));else{const f=$D(t,l.path,o);l.currentInputSnapshot=f;const m=e[a].update(f.val());if(m!==void 0){Hg("transaction failed: Data returned ",m,l.path);let T=Ht(m);typeof m=="object"&&m!=null&&qs(m,".priority")||(T=T.updatePriority(f.getPriority()));const x=l.currentWriteId,E=qg(t),_=OD(T,f,E);l.currentOutputSnapshotRaw=T,l.currentOutputSnapshotResolved=_,l.currentWriteId=dT(t),o.splice(o.indexOf(x),1),s=s.concat(CD(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),s=s.concat(so(t.serverSyncTree_,x,!0))}else d=!0,h="nodata",s=s.concat(so(t.serverSyncTree_,l.currentWriteId,!0))}Lr(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Kg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)qc(r[a]);hT(t,t.transactionQueueTree_)}function BD(t,e){let n,r=t.transactionQueueTree_;for(n=We(e);n!==null&&Gc(r)===void 0;)r=oT(r,n),e=ht(e),n=We(e);return r}function zD(t,e){const n=[];return WD(t,e,n),n.sort((r,s)=>r.order-s.order),n}function WD(t,e,n){const r=Gc(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Wg(e,s=>{WD(t,s,n)})}function Kg(t,e){const n=Gc(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,DD(e,n.length>0?n:void 0)}Wg(e,r=>{Kg(t,r)})}function fT(t,e){const n=Lh(BD(t,e)),r=oT(t.transactionQueueTree_,e);return $q(r,s=>{Fy(t,s)}),Fy(t,r),LD(r,s=>{Fy(t,s)}),n}function Fy(t,e){const n=Gc(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(te(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(te(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(so(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?DD(e,void 0):n.length=i+1,Lr(t.eventQueue_,Lh(e),s);for(let o=0;o<r.length;o++)qc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function f8(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$n(`Invalid query segment '${n}' in query '${t}'`)}return e}const ZC=function(t,e){const n=p8(t),r=n.namespace;n.domain==="firebase.com"&&Si(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Si("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||xW();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new KO(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new at(n.pathString)}},p8=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=h8(t.substring(d,h)));const f=f8(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const T=e.indexOf(".");r=e.substring(0,T).toLowerCase(),n=e.substring(T+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",m8=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=XC.charAt(n%64),n=Math.floor(n/64);te(n===0,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=XC.charAt(e[s]);return te(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+qt(this.snapshot.exportVal())}}class v8{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return te(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Be(this._path)?null:UE(this._path)}get ref(){return new ki(this._repo,this._path)}get _queryIdentifier(){const e=VC(this._queryParams),n=LE(e);return n==="{}"?"default":n}get _queryObject(){return VC(this._queryParams)}isEqual(e){if(e=Ct(e),!(e instanceof pT))return!1;const n=this._repo===e._repo,r=rD(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+oH(this._path)}}class ki extends pT{constructor(e,n){super(e,n,new WE,!1)}get parent(){const e=nD(this._path);return e===null?null:new ki(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class zd{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new at(e),r=Wd(this.ref,e);return new zd(this._node.getChild(n),r,Ot)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new zd(s,Wd(this.ref,r),Ot)))}hasChild(e){const n=new at(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ar(t,e){return t=Ct(t),t._checkNotDeleted("ref"),e!==void 0?Wd(t._root,e):t._root}function Wd(t,e){return t=Ct(t),We(t._path)===null?Qq("child","path",e):jD("child","path",e),new ki(t._repo,Nt(t._path,e))}function HD(t,e){t=Ct(t),lT("push",t._path),FD("push",e,t._path,!0);const n=UD(t._repo),r=m8(n),s=Wd(t,r),i=Wd(t,r);let o;return o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function qD(t){return lT("remove",t._path),mT(t,null)}function mT(t,e){t=Ct(t),lT("set",t._path),FD("set",e,t._path,!1);const n=new kh;return o8(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function _m(t,e){Gq("update",e,t._path);const n=new kh;return a8(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function wm(t){t=Ct(t);const e=new y8(()=>{}),n=new gT(e);return i8(t._repo,t,n).then(r=>new zd(r,new ki(t._repo,t._path),t._queryParams.getIndex()))}class gT{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new g8("value",this,new zd(e.snapshotNode,new ki(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new v8(this,e,n):null}matches(e){return e instanceof gT?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}yq(ki);xq(ki);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="FIREBASE_DATABASE_EMULATOR_HOST",bw={};let w8=!1;function E8(t,e,n,r){t.repoInfo_=new KO(e,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function T8(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Si("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ln("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=ZC(i,s),a=o.repoInfo,l;typeof process<"u"&&_C&&(l=_C[_8]),l?(i=`http://${l}?ns=${a.namespace}`,o=ZC(i,s),a=o.repoInfo):o.repoInfo.secure;const c=new DW(t.name,t.options,e);Yq("Invalid Firebase Database URL",o),Be(o.path)||Si("Database URL must point to the root of a Firebase Database (not including a child path).");const d=S8(a,t,c,new OW(t,n));return new b8(d,t)}function x8(t,e){const n=bw[e];(!n||n[t.key]!==t)&&Si(`Database ${e}(${t.repoInfo_}) has already been deleted.`),c8(t),delete n[t.key]}function S8(t,e,n,r){let s=bw[e.name];s||(s={},bw[e.name]=s);let i=s[t.toURLString()];return i&&Si("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new n8(t,w8,n,r),s[t.toURLString()]=i,i}class b8{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(r8(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ki(this._repo,nt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(x8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Si("Cannot call "+e+" on a deleted database.")}}function ur(t=Fg(),e){const n=Qo(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=yO("database");r&&C8(n,...r)}return n}function C8(t,e,n,r={}){t=Ct(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Ti(r,i.repoInfo_.emulatorOptions))return;Si("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Si('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new up(up.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:EO(r.mockUserToken,t.app.options.projectId);o=new up(a)}E8(i,s,r,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t){vW(Ja),us(new Mr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return T8(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),nr(wC,EC,t),nr(wC,EC,"esm2017")}fi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};fi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};I8();var R8="firebase",A8="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(R8,A8,"app");const KD="@firebase/installations",vT="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=1e4,QD=`w:${vT}`,YD="FIS_v2",k8="https://firebaseinstallations.googleapis.com/v1",P8=60*60*1e3,N8="installations",O8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fa=new Xa(N8,O8,D8);function ZD(t){return t instanceof ms&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD({projectId:t}){return`${k8}/projects/${t}/installations`}function JD(t){return{token:t.token,requestStatus:2,expiresIn:L8(t.expiresIn),creationTime:Date.now()}}async function eM(t,e){const r=(await e.json()).error;return Fa.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function tM({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function M8(t,{refreshToken:e}){const n=tM(t);return n.append("Authorization",V8(e)),n}async function nM(t){const e=await t();return e.status>=500&&e.status<600?t():e}function L8(t){return Number(t.replace("s","000"))}function V8(t){return`${YD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=XD(t),s=tM(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:YD,appId:t.appId,sdkVersion:QD},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await nM(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:JD(c.authToken)}}else throw await eM("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=/^[cdef][\w-]{21}$/,Cw="";function $8(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=B8(t);return U8.test(n)?n:Cw}catch{return Cw}}function B8(t){return j8(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new Map;function iM(t,e){const n=Gg(t);oM(n,e),z8(n,e)}function oM(t,e){const n=sM.get(t);if(n)for(const r of n)r(e)}function z8(t,e){const n=W8();n&&n.postMessage({key:t,fid:e}),H8()}let pa=null;function W8(){return!pa&&"BroadcastChannel"in self&&(pa=new BroadcastChannel("[Firebase] FID Change"),pa.onmessage=t=>{oM(t.data.key,t.data.fid)}),pa}function H8(){sM.size===0&&pa&&(pa.close(),pa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8="firebase-installations-database",K8=1,ja="firebase-installations-store";let jy=null;function yT(){return jy||(jy=AO(q8,K8,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ja)}}})),jy}async function Em(t,e){const n=Gg(t),s=(await yT()).transaction(ja,"readwrite"),i=s.objectStore(ja),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&iM(t,e.fid),e}async function aM(t){const e=Gg(t),r=(await yT()).transaction(ja,"readwrite");await r.objectStore(ja).delete(e),await r.done}async function Qg(t,e){const n=Gg(t),s=(await yT()).transaction(ja,"readwrite"),i=s.objectStore(ja),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&iM(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(t){let e;const n=await Qg(t.appConfig,r=>{const s=G8(r),i=Q8(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Cw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function G8(t){const e=t||{fid:$8(),registrationStatus:0};return lM(e)}function Q8(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Fa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Y8(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Z8(t)}:{installationEntry:e}}async function Y8(t,e){try{const n=await F8(t,e);return Em(t.appConfig,n)}catch(n){throw ZD(n)&&n.customData.serverCode===409?await aM(t.appConfig):await Em(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Z8(t){let e=await JC(t.appConfig);for(;e.registrationStatus===1;)await rM(100),e=await JC(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await _T(t);return r||n}return e}function JC(t){return Qg(t,e=>{if(!e)throw Fa.create("installation-not-found");return lM(e)})}function lM(t){return X8(t)?{fid:t.fid,registrationStatus:0}:t}function X8(t){return t.registrationStatus===1&&t.registrationTime+GD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J8({appConfig:t,heartbeatServiceProvider:e},n){const r=e7(t,n),s=M8(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:QD,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await nM(()=>fetch(r,a));if(l.ok){const c=await l.json();return JD(c)}else throw await eM("Generate Auth Token",l)}function e7(t,{fid:e}){return`${XD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(t,e=!1){let n;const r=await Qg(t.appConfig,i=>{if(!cM(i))throw Fa.create("not-registered");const o=i.authToken;if(!e&&r7(o))return i;if(o.requestStatus===1)return n=t7(t,e),i;{if(!navigator.onLine)throw Fa.create("app-offline");const a=i7(i);return n=n7(t,a),a}});return n?await n:r.authToken}async function t7(t,e){let n=await eI(t.appConfig);for(;n.authToken.requestStatus===1;)await rM(100),n=await eI(t.appConfig);const r=n.authToken;return r.requestStatus===0?wT(t,e):r}function eI(t){return Qg(t,e=>{if(!cM(e))throw Fa.create("not-registered");const n=e.authToken;return o7(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function n7(t,e){try{const n=await J8(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Em(t.appConfig,r),n}catch(n){if(ZD(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await aM(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Em(t.appConfig,r)}throw n}}function cM(t){return t!==void 0&&t.registrationStatus===2}function r7(t){return t.requestStatus===2&&!s7(t)}function s7(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+P8}function i7(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function o7(t){return t.requestStatus===1&&t.requestTime+GD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a7(t){const e=t,{installationEntry:n,registrationPromise:r}=await _T(e);return r?r.catch(console.error):wT(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l7(t,e=!1){const n=t;return await c7(n),(await wT(n,e)).token}async function c7(t){const{registrationPromise:e}=await _T(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t){if(!t||!t.options)throw Uy("App Configuration");if(!t.name)throw Uy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Uy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Uy(t){return Fa.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="installations",d7="installations-internal",h7=t=>{const e=t.getProvider("app").getImmediate(),n=u7(e),r=Qo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},f7=t=>{const e=t.getProvider("app").getImmediate(),n=Qo(e,uM).getImmediate();return{getId:()=>a7(n),getToken:s=>l7(n,s)}};function p7(){us(new Mr(uM,h7,"PUBLIC")),us(new Mr(d7,f7,"PRIVATE"))}p7();nr(KD,vT);nr(KD,vT,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="analytics",m7="firebase_id",g7="origin",v7=60*1e3,y7="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ET="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Ph("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},pr=new Xa("analytics","Analytics",_7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7(t){if(!t.startsWith(ET)){const e=pr.create("invalid-gtag-resource",{gtagURL:t});return rr.warn(e.message),""}return t}function dM(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function E7(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function T7(t,e){const n=E7("firebase-js-sdk-policy",{createScriptURL:w7}),r=document.createElement("script"),s=`${ET}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function x7(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function S7(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await dM(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){rr.error(a)}t("config",s,i)}async function b7(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await dM(n);for(const l of o){const c=a.find(h=>h.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){rr.error(i)}}function C7(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await b7(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await S7(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){rr.error(a)}}return s}function I7(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=C7(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function R7(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ET)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=30,k7=1e3;class P7{constructor(e={},n=k7){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const hM=new P7;function N7(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function O7(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:N7(r)},i=y7.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw pr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function D7(t,e=hM,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw pr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw pr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new V7;return setTimeout(async()=>{a.abort()},v7),fM({appId:r,apiKey:s,measurementId:i},o,a,e)}async function fM(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=hM){var i;const{appId:o,measurementId:a}=t;try{await M7(r,e)}catch(l){if(a)return rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await O7(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!L7(c)){if(s.deleteThrottleMetadata(o),a)return rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?uC(n,s.intervalMillis,A7):uC(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,h),rr.debug(`Calling attemptFetch again in ${d} millis`),fM(t,h,r,s)}}function M7(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(pr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function L7(t){if(!(t instanceof ms)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class V7{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function F7(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j7(){if(SO())try{await bO()}catch(t){return rr.warn(pr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return rr.warn(pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function U7(t,e,n,r,s,i,o){var a;const l=D7(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&rr.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>rr.error(m)),e.push(l);const c=j7().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);R7(i)||T7(i,d.measurementId),s("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[g7]="firebase",f.update=!0,h!=null&&(f[m7]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e){this.app=e}_delete(){return delete rd[this.app.options.appId],Promise.resolve()}}let rd={},tI=[];const nI={};let $y="dataLayer",B7="gtag",rI,pM,sI=!1;function z7(){const t=[];if(TO()&&t.push("This is a browser extension environment."),Qz()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=pr.create("invalid-analytics-context",{errorInfo:e});rr.warn(n.message)}}function W7(t,e,n){z7();const r=t.options.appId;if(!r)throw pr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw pr.create("no-api-key");if(rd[r]!=null)throw pr.create("already-exists",{id:r});if(!sI){x7($y);const{wrappedGtag:i,gtagCore:o}=I7(rd,tI,nI,$y,B7);pM=i,rI=o,sI=!0}return rd[r]=U7(t,tI,nI,e,rI,$y,n),new $7(t)}function H7(t=Fg()){t=Ct(t);const e=Qo(t,Tm);return e.isInitialized()?e.getImmediate():q7(t)}function q7(t,e={}){const n=Qo(t,Tm);if(n.isInitialized()){const s=n.getImmediate();if(Ti(e,n.getOptions()))return s;throw pr.create("already-initialized")}return n.initialize({options:e})}function K7(t,e,n,r){t=Ct(t),F7(pM,rd[t.app.options.appId],e,n,r).catch(s=>rr.error(s))}const iI="@firebase/analytics",oI="0.10.12";function G7(){us(new Mr(Tm,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return W7(r,s,n)},"PUBLIC")),us(new Mr("analytics-internal",t,"PRIVATE")),nr(iI,oI),nr(iI,oI,"esm2017");function t(e){try{const n=e.getProvider(Tm).getImmediate();return{logEvent:(r,s,i)=>K7(n,r,s,i)}}catch(n){throw pr.create("interop-component-reg-failed",{reason:n})}}}G7();var aI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wo,mM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,b){function C(){}C.prototype=b.prototype,I.D=b.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(A,N,k){for(var R=Array(arguments.length-2),F=2;F<arguments.length;F++)R[F-2]=arguments[F];return b.prototype[N].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,b,C){C||(C=0);var A=Array(16);if(typeof b=="string")for(var N=0;16>N;++N)A[N]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(N=0;16>N;++N)A[N]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=I.g[0],C=I.g[1],N=I.g[2];var k=I.g[3],R=b+(k^C&(N^k))+A[0]+3614090360&4294967295;b=C+(R<<7&4294967295|R>>>25),R=k+(N^b&(C^N))+A[1]+3905402710&4294967295,k=b+(R<<12&4294967295|R>>>20),R=N+(C^k&(b^C))+A[2]+606105819&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(b^N&(k^b))+A[3]+3250441966&4294967295,C=N+(R<<22&4294967295|R>>>10),R=b+(k^C&(N^k))+A[4]+4118548399&4294967295,b=C+(R<<7&4294967295|R>>>25),R=k+(N^b&(C^N))+A[5]+1200080426&4294967295,k=b+(R<<12&4294967295|R>>>20),R=N+(C^k&(b^C))+A[6]+2821735955&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(b^N&(k^b))+A[7]+4249261313&4294967295,C=N+(R<<22&4294967295|R>>>10),R=b+(k^C&(N^k))+A[8]+1770035416&4294967295,b=C+(R<<7&4294967295|R>>>25),R=k+(N^b&(C^N))+A[9]+2336552879&4294967295,k=b+(R<<12&4294967295|R>>>20),R=N+(C^k&(b^C))+A[10]+4294925233&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(b^N&(k^b))+A[11]+2304563134&4294967295,C=N+(R<<22&4294967295|R>>>10),R=b+(k^C&(N^k))+A[12]+1804603682&4294967295,b=C+(R<<7&4294967295|R>>>25),R=k+(N^b&(C^N))+A[13]+4254626195&4294967295,k=b+(R<<12&4294967295|R>>>20),R=N+(C^k&(b^C))+A[14]+2792965006&4294967295,N=k+(R<<17&4294967295|R>>>15),R=C+(b^N&(k^b))+A[15]+1236535329&4294967295,C=N+(R<<22&4294967295|R>>>10),R=b+(N^k&(C^N))+A[1]+4129170786&4294967295,b=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(b^C))+A[6]+3225465664&4294967295,k=b+(R<<9&4294967295|R>>>23),R=N+(b^C&(k^b))+A[11]+643717713&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^b&(N^k))+A[0]+3921069994&4294967295,C=N+(R<<20&4294967295|R>>>12),R=b+(N^k&(C^N))+A[5]+3593408605&4294967295,b=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(b^C))+A[10]+38016083&4294967295,k=b+(R<<9&4294967295|R>>>23),R=N+(b^C&(k^b))+A[15]+3634488961&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^b&(N^k))+A[4]+3889429448&4294967295,C=N+(R<<20&4294967295|R>>>12),R=b+(N^k&(C^N))+A[9]+568446438&4294967295,b=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(b^C))+A[14]+3275163606&4294967295,k=b+(R<<9&4294967295|R>>>23),R=N+(b^C&(k^b))+A[3]+4107603335&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^b&(N^k))+A[8]+1163531501&4294967295,C=N+(R<<20&4294967295|R>>>12),R=b+(N^k&(C^N))+A[13]+2850285829&4294967295,b=C+(R<<5&4294967295|R>>>27),R=k+(C^N&(b^C))+A[2]+4243563512&4294967295,k=b+(R<<9&4294967295|R>>>23),R=N+(b^C&(k^b))+A[7]+1735328473&4294967295,N=k+(R<<14&4294967295|R>>>18),R=C+(k^b&(N^k))+A[12]+2368359562&4294967295,C=N+(R<<20&4294967295|R>>>12),R=b+(C^N^k)+A[5]+4294588738&4294967295,b=C+(R<<4&4294967295|R>>>28),R=k+(b^C^N)+A[8]+2272392833&4294967295,k=b+(R<<11&4294967295|R>>>21),R=N+(k^b^C)+A[11]+1839030562&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^b)+A[14]+4259657740&4294967295,C=N+(R<<23&4294967295|R>>>9),R=b+(C^N^k)+A[1]+2763975236&4294967295,b=C+(R<<4&4294967295|R>>>28),R=k+(b^C^N)+A[4]+1272893353&4294967295,k=b+(R<<11&4294967295|R>>>21),R=N+(k^b^C)+A[7]+4139469664&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^b)+A[10]+3200236656&4294967295,C=N+(R<<23&4294967295|R>>>9),R=b+(C^N^k)+A[13]+681279174&4294967295,b=C+(R<<4&4294967295|R>>>28),R=k+(b^C^N)+A[0]+3936430074&4294967295,k=b+(R<<11&4294967295|R>>>21),R=N+(k^b^C)+A[3]+3572445317&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^b)+A[6]+76029189&4294967295,C=N+(R<<23&4294967295|R>>>9),R=b+(C^N^k)+A[9]+3654602809&4294967295,b=C+(R<<4&4294967295|R>>>28),R=k+(b^C^N)+A[12]+3873151461&4294967295,k=b+(R<<11&4294967295|R>>>21),R=N+(k^b^C)+A[15]+530742520&4294967295,N=k+(R<<16&4294967295|R>>>16),R=C+(N^k^b)+A[2]+3299628645&4294967295,C=N+(R<<23&4294967295|R>>>9),R=b+(N^(C|~k))+A[0]+4096336452&4294967295,b=C+(R<<6&4294967295|R>>>26),R=k+(C^(b|~N))+A[7]+1126891415&4294967295,k=b+(R<<10&4294967295|R>>>22),R=N+(b^(k|~C))+A[14]+2878612391&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~b))+A[5]+4237533241&4294967295,C=N+(R<<21&4294967295|R>>>11),R=b+(N^(C|~k))+A[12]+1700485571&4294967295,b=C+(R<<6&4294967295|R>>>26),R=k+(C^(b|~N))+A[3]+2399980690&4294967295,k=b+(R<<10&4294967295|R>>>22),R=N+(b^(k|~C))+A[10]+4293915773&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~b))+A[1]+2240044497&4294967295,C=N+(R<<21&4294967295|R>>>11),R=b+(N^(C|~k))+A[8]+1873313359&4294967295,b=C+(R<<6&4294967295|R>>>26),R=k+(C^(b|~N))+A[15]+4264355552&4294967295,k=b+(R<<10&4294967295|R>>>22),R=N+(b^(k|~C))+A[6]+2734768916&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~b))+A[13]+1309151649&4294967295,C=N+(R<<21&4294967295|R>>>11),R=b+(N^(C|~k))+A[4]+4149444226&4294967295,b=C+(R<<6&4294967295|R>>>26),R=k+(C^(b|~N))+A[11]+3174756917&4294967295,k=b+(R<<10&4294967295|R>>>22),R=N+(b^(k|~C))+A[2]+718787259&4294967295,N=k+(R<<15&4294967295|R>>>17),R=C+(k^(N|~b))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+b&4294967295,I.g[1]=I.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+k&4294967295}r.prototype.u=function(I,b){b===void 0&&(b=I.length);for(var C=b-this.blockSize,A=this.B,N=this.h,k=0;k<b;){if(N==0)for(;k<=C;)s(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<b;)if(A[N++]=I.charCodeAt(k++),N==this.blockSize){s(this,A),N=0;break}}else for(;k<b;)if(A[N++]=I[k++],N==this.blockSize){s(this,A),N=0;break}}this.h=N,this.o+=b},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var b=1;b<I.length-8;++b)I[b]=0;var C=8*this.o;for(b=I.length-8;b<I.length;++b)I[b]=C&255,C/=256;for(this.u(I),I=Array(16),b=C=0;4>b;++b)for(var A=0;32>A;A+=8)I[C++]=this.g[b]>>>A&255;return I};function i(I,b){var C=a;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=b(I)}function o(I,b){this.h=b;for(var C=[],A=!0,N=I.length-1;0<=N;N--){var k=I[N]|0;A&&k==b||(C[N]=k,A=!1)}this.g=C}var a={};function l(I){return-128<=I&&128>I?i(I,function(b){return new o([b|0],0>b?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return x(c(-I));for(var b=[],C=1,A=0;I>=C;A++)b[A]=I/C|0,C*=4294967296;return new o(b,0)}function d(I,b){if(I.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I.charAt(0)=="-")return x(d(I.substring(1),b));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(b,8)),A=h,N=0;N<I.length;N+=8){var k=Math.min(8,I.length-N),R=parseInt(I.substring(N,N+k),b);8>k?(k=c(Math.pow(b,k)),A=A.j(k).add(c(R))):(A=A.j(C),A=A.add(c(R)))}return A}var h=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();for(var I=0,b=1,C=0;C<this.g.length;C++){var A=this.i(C);I+=(0<=A?A:4294967296+A)*b,b*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(v(this))return"-"+x(this).toString(I);for(var b=c(Math.pow(I,6)),C=this,A="";;){var N=O(C,b).g;C=E(C,N.j(b));var k=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=N,T(C))return k+A;for(;6>k.length;)k="0"+k;A=k+A}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var b=0;b<I.g.length;b++)if(I.g[b]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=E(this,I),v(I)?-1:T(I)?0:1};function x(I){for(var b=I.g.length,C=[],A=0;A<b;A++)C[A]=~I.g[A];return new o(C,~I.h).add(f)}t.abs=function(){return v(this)?x(this):this},t.add=function(I){for(var b=Math.max(this.g.length,I.g.length),C=[],A=0,N=0;N<=b;N++){var k=A+(this.i(N)&65535)+(I.i(N)&65535),R=(k>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);A=R>>>16,k&=65535,R&=65535,C[N]=R<<16|k}return new o(C,C[C.length-1]&-2147483648?-1:0)};function E(I,b){return I.add(x(b))}t.j=function(I){if(T(this)||T(I))return h;if(v(this))return v(I)?x(this).j(x(I)):x(x(this).j(I));if(v(I))return x(this.j(x(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var b=this.g.length+I.g.length,C=[],A=0;A<2*b;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var N=0;N<I.g.length;N++){var k=this.i(A)>>>16,R=this.i(A)&65535,F=I.i(N)>>>16,G=I.i(N)&65535;C[2*A+2*N]+=R*G,_(C,2*A+2*N),C[2*A+2*N+1]+=k*G,_(C,2*A+2*N+1),C[2*A+2*N+1]+=R*F,_(C,2*A+2*N+1),C[2*A+2*N+2]+=k*F,_(C,2*A+2*N+2)}for(A=0;A<b;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=b;A<2*b;A++)C[A]=0;return new o(C,0)};function _(I,b){for(;(I[b]&65535)!=I[b];)I[b+1]+=I[b]>>>16,I[b]&=65535,b++}function S(I,b){this.g=I,this.h=b}function O(I,b){if(T(b))throw Error("division by zero");if(T(I))return new S(h,h);if(v(I))return b=O(x(I),b),new S(x(b.g),x(b.h));if(v(b))return b=O(I,x(b)),new S(x(b.g),b.h);if(30<I.g.length){if(v(I)||v(b))throw Error("slowDivide_ only works with positive integers.");for(var C=f,A=b;0>=A.l(I);)C=D(C),A=D(A);var N=L(C,1),k=L(A,1);for(A=L(A,2),C=L(C,2);!T(A);){var R=k.add(A);0>=R.l(I)&&(N=N.add(C),k=R),A=L(A,1),C=L(C,1)}return b=E(I,N.j(b)),new S(N,b)}for(N=h;0<=I.l(b);){for(C=Math.max(1,Math.floor(I.m()/b.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),k=c(C),R=k.j(b);v(R)||0<R.l(I);)C-=A,k=c(C),R=k.j(b);T(k)&&(k=f),N=N.add(k),I=E(I,R)}return new S(N,I)}t.A=function(I){return O(this,I).h},t.and=function(I){for(var b=Math.max(this.g.length,I.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)&I.i(A);return new o(C,this.h&I.h)},t.or=function(I){for(var b=Math.max(this.g.length,I.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)|I.i(A);return new o(C,this.h|I.h)},t.xor=function(I){for(var b=Math.max(this.g.length,I.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)^I.i(A);return new o(C,this.h^I.h)};function D(I){for(var b=I.g.length+1,C=[],A=0;A<b;A++)C[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(C,I.h)}function L(I,b){var C=b>>5;b%=32;for(var A=I.g.length-C,N=[],k=0;k<A;k++)N[k]=0<b?I.i(k+C)>>>b|I.i(k+C+1)<<32-b:I.i(k+C);return new o(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mM=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,wo=o}).apply(typeof aI<"u"?aI:typeof self<"u"?self:typeof window<"u"?window:{});var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gM,Lu,vM,hp,Iw,yM,_M,wM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,w){return u==Array.prototype||u==Object.prototype||(u[g]=w.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof jf=="object"&&jf];for(var g=0;g<u.length;++g){var w=u[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var w=r;u=u.split(".");for(var P=0;P<u.length-1;P++){var V=u[P];if(!(V in w))break e;w=w[V]}u=u[u.length-1],P=w[u],g=g(P),g!=P&&g!=null&&e(w,u,{configurable:!0,writable:!0,value:g})}}function i(u,g){u instanceof String&&(u+="");var w=0,P=!1,V={next:function(){if(!P&&w<u.length){var $=w++;return{value:g($,u[$]),done:!1}}return P=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(u){return u||function(){return i(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,w){return u.call.apply(u.bind,arguments)}function h(u,g,w){if(!u)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,P),u.apply(g,V)}}return function(){return u.apply(g,arguments)}}function f(u,g,w){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function T(u,g){function w(){}w.prototype=g.prototype,u.aa=g.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(P,V,$){for(var re=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)re[ut-2]=arguments[ut];return g.prototype[V].apply(P,re)}}function v(u){const g=u.length;if(0<g){const w=Array(g);for(let P=0;P<g;P++)w[P]=u[P];return w}return[]}function x(u,g){for(let w=1;w<arguments.length;w++){const P=arguments[w];if(l(P)){const V=u.length||0,$=P.length||0;u.length=V+$;for(let re=0;re<$;re++)u[V+re]=P[re]}else u.push(P)}}class E{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function O(u){return O[" "](u),u}O[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function L(u,g,w){for(const P in u)g.call(w,u[P],P,u)}function I(u,g){for(const w in u)g.call(void 0,u[w],w,u)}function b(u){const g={};for(const w in u)g[w]=u[w];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,g){let w,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(w in P)u[w]=P[w];for(let $=0;$<C.length;$++)w=C[$],Object.prototype.hasOwnProperty.call(P,w)&&(u[w]=P[w])}}function N(u){var g=1;u=u.split(":");const w=[];for(;0<g&&u.length;)w.push(u.shift()),g--;return u.length&&w.push(u.join(":")),w}function k(u){a.setTimeout(()=>{throw u},0)}function R(){var u=B;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class F{constructor(){this.h=this.g=null}add(g,w){const P=G.get();P.set(g,w),this.h?this.h.next=P:this.g=P,this.h=P}}var G=new E(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,U=!1,B=new F,ee=()=>{const u=a.Promise.resolve(void 0);Q=()=>{u.then(pe)}};var pe=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(w){k(w)}var g=G;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}U=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};a.addEventListener("test",w,g),a.removeEventListener("test",w,g)}catch{}return u}();function qe(u,g){if(he.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(D){e:{try{O(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else w=="mouseover"?g=u.fromElement:w=="mouseout"&&(g=u.toElement);this.relatedTarget=g,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:rt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&qe.aa.h.call(this)}}T(qe,he);var rt={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function lt(u,g,w,P,V){this.listener=u,this.proxy=null,this.src=g,this.type=w,this.capture=!!P,this.ha=V,this.key=++Ke,this.da=this.fa=!1}function Fe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pe(u){this.src=u,this.g={},this.h=0}Pe.prototype.add=function(u,g,w,P,V){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var re=Et(u,g,P,V);return-1<re?(g=u[re],w||(g.fa=!1)):(g=new lt(g,this.src,$,!!P,V),g.fa=w,u.push(g)),g};function je(u,g){var w=g.type;if(w in u.g){var P=u.g[w],V=Array.prototype.indexOf.call(P,g,void 0),$;($=0<=V)&&Array.prototype.splice.call(P,V,1),$&&(Fe(g),u.g[w].length==0&&(delete u.g[w],u.h--))}}function Et(u,g,w,P){for(var V=0;V<u.length;++V){var $=u[V];if(!$.da&&$.listener==g&&$.capture==!!w&&$.ha==P)return V}return-1}var Bt="closure_lm_"+(1e6*Math.random()|0),_r={};function wr(u,g,w,P,V){if(Array.isArray(g)){for(var $=0;$<g.length;$++)wr(u,g[$],w,P,V);return null}return w=ke(w),u&&u[se]?u.K(g,w,c(P)?!!P.capture:!1,V):gs(u,g,w,!1,P,V)}function gs(u,g,w,P,V,$){if(!g)throw Error("Invalid event type");var re=c(V)?!!V.capture:!!V,ut=Z(u);if(ut||(u[Bt]=ut=new Pe(u)),w=ut.add(g,w,P,re,$),w.proxy)return w;if(P=M(),w.proxy=P,P.src=u,P.listener=w,u.addEventListener)ye||(V=re),V===void 0&&(V=!1),u.addEventListener(g.toString(),P,V);else if(u.attachEvent)u.attachEvent(ie(g.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function M(){function u(w){return g.call(u.src,u.listener,w)}const g=ne;return u}function j(u,g,w,P,V){if(Array.isArray(g))for(var $=0;$<g.length;$++)j(u,g[$],w,P,V);else P=c(P)?!!P.capture:!!P,w=ke(w),u&&u[se]?(u=u.i,g=String(g).toString(),g in u.g&&($=u.g[g],w=Et($,w,P,V),-1<w&&(Fe($[w]),Array.prototype.splice.call($,w,1),$.length==0&&(delete u.g[g],u.h--)))):u&&(u=Z(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Et(g,w,P,V)),(w=-1<u?g[u]:null)&&z(w))}function z(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[se])je(g.i,u);else{var w=u.type,P=u.proxy;g.removeEventListener?g.removeEventListener(w,P,u.capture):g.detachEvent?g.detachEvent(ie(w),P):g.addListener&&g.removeListener&&g.removeListener(P),(w=Z(g))?(je(w,u),w.h==0&&(w.src=null,g[Bt]=null)):Fe(u)}}}function ie(u){return u in _r?_r[u]:_r[u]="on"+u}function ne(u,g){if(u.da)u=!0;else{g=new qe(g,this);var w=u.listener,P=u.ha||u.src;u.fa&&z(u),u=w.call(P,g)}return u}function Z(u){return u=u[Bt],u instanceof Pe?u:null}var ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(u){return typeof u=="function"?u:(u[ge]||(u[ge]=function(g){return u.handleEvent(g)}),u[ge])}function xe(){le.call(this),this.i=new Pe(this),this.M=this,this.F=null}T(xe,le),xe.prototype[se]=!0,xe.prototype.removeEventListener=function(u,g,w,P){j(this,u,g,w,P)};function Me(u,g){var w,P=u.F;if(P)for(w=[];P;P=P.F)w.push(P);if(u=u.M,P=g.type||g,typeof g=="string")g=new he(g,u);else if(g instanceof he)g.target=g.target||u;else{var V=g;g=new he(P,u),A(g,V)}if(V=!0,w)for(var $=w.length-1;0<=$;$--){var re=g.g=w[$];V=On(re,P,!0,g)&&V}if(re=g.g=u,V=On(re,P,!0,g)&&V,V=On(re,P,!1,g)&&V,w)for($=0;$<w.length;$++)re=g.g=w[$],V=On(re,P,!1,g)&&V}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var w=u.g[g],P=0;P<w.length;P++)Fe(w[P]);delete u.g[g],u.h--}}this.F=null},xe.prototype.K=function(u,g,w,P){return this.i.add(String(u),g,!1,w,P)},xe.prototype.L=function(u,g,w,P){return this.i.add(String(u),g,!0,w,P)};function On(u,g,w,P){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,$=0;$<g.length;++$){var re=g[$];if(re&&!re.da&&re.capture==w){var ut=re.listener,sn=re.ha||re.src;re.fa&&je(u.i,re),V=ut.call(sn,P)!==!1&&V}}return V&&!P.defaultPrevented}function al(u,g,w){if(typeof u=="function")w&&(u=f(u,w));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function jr(u){u.g=al(()=>{u.g=null,u.i&&(u.i=!1,jr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ea extends le{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(u){le.call(this),this.h=u,this.g={}}T(vs,le);var Ks=[];function Ur(u){L(u.g,function(g,w){this.g.hasOwnProperty(w)&&z(g)},u),u.g={}}vs.prototype.N=function(){vs.aa.N.call(this),Ur(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gs=a.JSON.stringify,Pi=a.JSON.parse,Sv=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function tu(){}tu.prototype.h=null;function nu(u){return u.h||(u.h=u.i())}function ru(){}var ta={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function na(){he.call(this,"d")}T(na,he);function Er(){he.call(this,"c")}T(Er,he);var Qs={},Ie=null;function Ze(){return Ie=Ie||new xe}Qs.La="serverreachability";function ct(u){he.call(this,Qs.La,u)}T(ct,he);function nn(u){const g=Ze();Me(g,new ct(g))}Qs.STAT_EVENT="statevent";function Hn(u,g){he.call(this,Qs.STAT_EVENT,u),this.stat=g}T(Hn,he);function yt(u){const g=Ze();Me(g,new Hn(g,u))}Qs.Ma="timingevent";function ys(u,g){he.call(this,Qs.Ma,u),this.size=g}T(ys,he);function rn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function WV(u,g,w,P,V,$){u.info(function(){if(u.g)if($)for(var re="",ut=$.split("&"),sn=0;sn<ut.length;sn++){var et=ut[sn].split("=");if(1<et.length){var _n=et[0];et=et[1];var wn=_n.split("_");re=2<=wn.length&&wn[1]=="type"?re+(_n+"="+et+"&"):re+(_n+"=redacted&")}}else re=null;else re=$;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+g+`
`+w+`
`+re})}function HV(u,g,w,P,V,$,re){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+g+`
`+w+`
`+$+" "+re})}function ll(u,g,w,P){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+KV(u,w)+(P?" "+P:"")})}function qV(u,g){u.info(function(){return"TIMEOUT: "+g})}qn.prototype.info=function(){};function KV(u,g){if(!u.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var P=w[u];if(!(2>P.length)){var V=P[1];if(Array.isArray(V)&&!(1>V.length)){var $=V[0];if($!="noop"&&$!="stop"&&$!="close")for(var re=1;re<V.length;re++)V[re]=""}}}}return Gs(w)}catch{return g}}var Qh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bv;function Yh(){}T(Yh,tu),Yh.prototype.g=function(){return new XMLHttpRequest},Yh.prototype.i=function(){return{}},bv=new Yh;function Ni(u,g,w,P){this.j=u,this.i=g,this.l=w,this.R=P||1,this.U=new vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vx}function vx(){this.i=null,this.g="",this.h=!1}var yx={},Cv={};function Iv(u,g,w){u.L=1,u.v=ef(Ys(g)),u.m=w,u.P=!0,_x(u,null)}function _x(u,g){u.F=Date.now(),Zh(u),u.A=Ys(u.v);var w=u.A,P=u.R;Array.isArray(P)||(P=[String(P)]),Ox(w.i,"t",P),u.C=0,w=u.j.J,u.h=new vx,u.g=Zx(u.j,w?g:null,!u.m),0<u.O&&(u.M=new ea(f(u.Y,u,u.g),u.O)),g=u.U,w=u.g,P=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ks[0]=V.toString()),V=Ks);for(var $=0;$<V.length;$++){var re=wr(w,V[$],P||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),nn(),WV(u.i,u.u,u.A,u.l,u.R,u.m)}Ni.prototype.ca=function(u){u=u.target;const g=this.M;g&&Zs(u)==3?g.j():this.Y(u)},Ni.prototype.Y=function(u){try{if(u==this.g)e:{const wn=Zs(this.g);var g=this.g.Ba();const dl=this.g.Z();if(!(3>wn)&&(wn!=3||this.g&&(this.h.h||this.g.oa()||Ux(this.g)))){this.J||wn!=4||g==7||(g==8||0>=dl?nn(3):nn(2)),Rv(this);var w=this.g.Z();this.X=w;t:if(wx(this)){var P=Ux(this.g);u="";var V=P.length,$=Zs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ra(this),su(this);var re="";break t}this.h.i=new a.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,u+=this.h.i.decode(P[g],{stream:!($&&g==V-1)});P.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=w==200,HV(this.i,this.u,this.A,this.l,this.R,wn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,sn=this.g;if((ut=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ut)){var et=ut;break t}}et=null}if(w=et)ll(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Av(this,w);else{this.o=!1,this.s=3,yt(12),ra(this),su(this);break e}}if(this.P){w=!0;let $r;for(;!this.J&&this.C<re.length;)if($r=GV(this,re),$r==Cv){wn==4&&(this.s=4,yt(14),w=!1),ll(this.i,this.l,null,"[Incomplete Response]");break}else if($r==yx){this.s=4,yt(15),ll(this.i,this.l,re,"[Invalid Chunk]"),w=!1;break}else ll(this.i,this.l,$r,null),Av(this,$r);if(wx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wn!=4||re.length!=0||this.h.h||(this.s=1,yt(16),w=!1),this.o=this.o&&w,!w)ll(this.i,this.l,re,"[Invalid Chunked Response]"),ra(this),su(this);else if(0<re.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Mv(_n),_n.M=!0,yt(11))}}else ll(this.i,this.l,re,null),Av(this,re);wn==4&&ra(this),this.o&&!this.J&&(wn==4?Kx(this.j,this):(this.o=!1,Zh(this)))}else dF(this.g),w==400&&0<re.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),ra(this),su(this)}}}catch{}finally{}};function wx(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function GV(u,g){var w=u.C,P=g.indexOf(`
`,w);return P==-1?Cv:(w=Number(g.substring(w,P)),isNaN(w)?yx:(P+=1,P+w>g.length?Cv:(g=g.slice(P,P+w),u.C=P+w,g)))}Ni.prototype.cancel=function(){this.J=!0,ra(this)};function Zh(u){u.S=Date.now()+u.I,Ex(u,u.I)}function Ex(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=rn(f(u.ba,u),g)}function Rv(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ni.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(qV(this.i,this.A),this.L!=2&&(nn(),yt(17)),ra(this),this.s=2,su(this)):Ex(this,this.S-u)};function su(u){u.j.G==0||u.J||Kx(u.j,u)}function ra(u){Rv(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Ur(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Av(u,g){try{var w=u.j;if(w.G!=0&&(w.g==u||kv(w.h,u))){if(!u.K&&kv(w.h,u)&&w.G==3){try{var P=w.Da.g.parse(g)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)af(w),sf(w);else break e;Dv(w),yt(18)}}else w.za=V[1],0<w.za-w.T&&37500>V[2]&&w.F&&w.v==0&&!w.C&&(w.C=rn(f(w.Za,w),6e3));if(1>=Sx(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ia(w,11)}else if((u.K||w.g==u)&&af(w),!_(g))for(V=w.Da.g.parse(g),g=0;g<V.length;g++){let et=V[g];if(w.T=et[0],et=et[1],w.G==2)if(et[0]=="c"){w.K=et[1],w.ia=et[2];const _n=et[3];_n!=null&&(w.la=_n,w.j.info("VER="+w.la));const wn=et[4];wn!=null&&(w.Aa=wn,w.j.info("SVER="+w.Aa));const dl=et[5];dl!=null&&typeof dl=="number"&&0<dl&&(P=1.5*dl,w.L=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const $r=u.g;if($r){const cf=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cf){var $=P.h;$.g||cf.indexOf("spdy")==-1&&cf.indexOf("quic")==-1&&cf.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Pv($,$.h),$.h=null))}if(P.D){const Lv=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;Lv&&(P.ya=Lv,pt(P.I,P.D,Lv))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),P=w;var re=u;if(P.qa=Yx(P,P.J?P.ia:null,P.W),re.K){bx(P.h,re);var ut=re,sn=P.L;sn&&(ut.I=sn),ut.B&&(Rv(ut),Zh(ut)),P.g=re}else Hx(P);0<w.i.length&&of(w)}else et[0]!="stop"&&et[0]!="close"||ia(w,7);else w.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ia(w,7):Ov(w):et[0]!="noop"&&w.l&&w.l.ta(et),w.v=0)}}nn(4)}catch{}}var QV=class{constructor(u,g){this.g=u,this.map=g}};function Tx(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Sx(u){return u.h?1:u.g?u.g.size:0}function kv(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Pv(u,g){u.g?u.g.add(g):u.h=g}function bx(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Tx.prototype.cancel=function(){if(this.i=Cx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Cx(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const w of u.g.values())g=g.concat(w.D);return g}return v(u.i)}function YV(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],w=u.length,P=0;P<w;P++)g.push(u[P]);return g}g=[],w=0;for(P in u)g[w++]=u[P];return g}function ZV(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var w=0;w<u;w++)g.push(w);return g}g=[],w=0;for(const P in u)g[w++]=P;return g}}}function Ix(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var w=ZV(u),P=YV(u),V=P.length,$=0;$<V;$++)g.call(void 0,P[$],w&&w[$],u)}var Rx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XV(u,g){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var P=u[w].indexOf("="),V=null;if(0<=P){var $=u[w].substring(0,P);V=u[w].substring(P+1)}else $=u[w];g($,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function sa(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof sa){this.h=u.h,Xh(this,u.j),this.o=u.o,this.g=u.g,Jh(this,u.s),this.l=u.l;var g=u.i,w=new au;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),Ax(this,w),this.m=u.m}else u&&(g=String(u).match(Rx))?(this.h=!1,Xh(this,g[1]||"",!0),this.o=iu(g[2]||""),this.g=iu(g[3]||"",!0),Jh(this,g[4]),this.l=iu(g[5]||"",!0),Ax(this,g[6]||"",!0),this.m=iu(g[7]||"")):(this.h=!1,this.i=new au(null,this.h))}sa.prototype.toString=function(){var u=[],g=this.j;g&&u.push(ou(g,kx,!0),":");var w=this.g;return(w||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ou(g,kx,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(ou(w,w.charAt(0)=="/"?tF:eF,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",ou(w,rF)),u.join("")};function Ys(u){return new sa(u)}function Xh(u,g,w){u.j=w?iu(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Jh(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Ax(u,g,w){g instanceof au?(u.i=g,sF(u.i,u.h)):(w||(g=ou(g,nF)),u.i=new au(g,u.h))}function pt(u,g,w){u.i.set(g,w)}function ef(u){return pt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function iu(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ou(u,g,w){return typeof u=="string"?(u=encodeURI(u).replace(g,JV),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function JV(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var kx=/[#\/\?@]/g,eF=/[#\?:]/g,tF=/[#\?]/g,nF=/[#\?@]/g,rF=/#/g;function au(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Oi(u){u.g||(u.g=new Map,u.h=0,u.i&&XV(u.i,function(g,w){u.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=au.prototype,t.add=function(u,g){Oi(this),this.i=null,u=cl(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(g),this.h+=1,this};function Px(u,g){Oi(u),g=cl(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Nx(u,g){return Oi(u),g=cl(u,g),u.g.has(g)}t.forEach=function(u,g){Oi(this),this.g.forEach(function(w,P){w.forEach(function(V){u.call(g,V,P,this)},this)},this)},t.na=function(){Oi(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let P=0;P<g.length;P++){const V=u[P];for(let $=0;$<V.length;$++)w.push(g[P])}return w},t.V=function(u){Oi(this);let g=[];if(typeof u=="string")Nx(this,u)&&(g=g.concat(this.g.get(cl(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)g=g.concat(u[w])}return g},t.set=function(u,g){return Oi(this),this.i=null,u=cl(this,u),Nx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Ox(u,g,w){Px(u,g),0<w.length&&(u.i=null,u.g.set(cl(u,g),v(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var P=g[w];const $=encodeURIComponent(String(P)),re=this.V(P);for(P=0;P<re.length;P++){var V=$;re[P]!==""&&(V+="="+encodeURIComponent(String(re[P]))),u.push(V)}}return this.i=u.join("&")};function cl(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function sF(u,g){g&&!u.j&&(Oi(u),u.i=null,u.g.forEach(function(w,P){var V=P.toLowerCase();P!=V&&(Px(this,P),Ox(this,V,w))},u)),u.j=g}function iF(u,g){const w=new qn;if(a.Image){const P=new Image;P.onload=m(Di,w,"TestLoadImage: loaded",!0,g,P),P.onerror=m(Di,w,"TestLoadImage: error",!1,g,P),P.onabort=m(Di,w,"TestLoadImage: abort",!1,g,P),P.ontimeout=m(Di,w,"TestLoadImage: timeout",!1,g,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else g(!1)}function oF(u,g){const w=new qn,P=new AbortController,V=setTimeout(()=>{P.abort(),Di(w,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:P.signal}).then($=>{clearTimeout(V),$.ok?Di(w,"TestPingServer: ok",!0,g):Di(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Di(w,"TestPingServer: error",!1,g)})}function Di(u,g,w,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(w)}catch{}}function aF(){this.g=new Sv}function lF(u,g,w){const P=w||"";try{Ix(u,function(V,$){let re=V;c(V)&&(re=Gs(V)),g.push(P+$+"="+encodeURIComponent(re))})}catch(V){throw g.push(P+"type="+encodeURIComponent("_badmap")),V}}function tf(u){this.l=u.Ub||null,this.j=u.eb||!1}T(tf,tu),tf.prototype.g=function(){return new nf(this.l,this.j)},tf.prototype.i=function(u){return function(){return u}}({});function nf(u,g){xe.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(nf,xe),t=nf.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,cu(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lu(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,cu(this)),this.g&&(this.readyState=3,cu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dx(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dx(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?lu(this):cu(this),this.readyState==3&&Dx(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,lu(this))},t.Qa=function(u){this.g&&(this.response=u,lu(this))},t.ga=function(){this.g&&lu(this)};function lu(u){u.readyState=4,u.l=null,u.j=null,u.v=null,cu(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=g.next();return u.join(`\r
`)};function cu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(nf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Mx(u){let g="";return L(u,function(w,P){g+=P,g+=":",g+=w,g+=`\r
`}),g}function Nv(u,g,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=Mx(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):pt(u,g,w))}function Rt(u){xe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Rt,xe);var cF=/^https?$/i,uF=["POST","PUT"];t=Rt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bv.g(),this.v=this.o?nu(this.o):nu(bv),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch($){Lx(this,$);return}if(u=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)w.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const $ of P.keys())w.set($,P.get($));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find($=>$.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uF,g,void 0))||P||V||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,re]of w)this.g.setRequestHeader($,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jx(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Lx(this,$)}};function Lx(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Vx(u),rf(u)}function Vx(u){u.A||(u.A=!0,Me(u,"complete"),Me(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Me(this,"complete"),Me(this,"abort"),rf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rf(this,!0)),Rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fx(this):this.bb())},t.bb=function(){Fx(this)};function Fx(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Zs(u)!=4||u.Z()!=2)){if(u.u&&Zs(u)==4)al(u.Ea,0,u);else if(Me(u,"readystatechange"),Zs(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var P;if(P=re===0){var V=String(u.D).match(Rx)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),P=!cF.test(V?V.toLowerCase():"")}w=P}if(w)Me(u,"complete"),Me(u,"success");else{u.m=6;try{var $=2<Zs(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Vx(u)}}finally{rf(u)}}}}function rf(u,g){if(u.g){jx(u);const w=u.g,P=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Me(u,"ready");try{w.onreadystatechange=P}catch{}}}function jx(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Zs(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Zs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Pi(g)}};function Ux(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function dF(u){const g={};u=(u.g&&2<=Zs(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(_(u[P]))continue;var w=N(u[P]);const V=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const $=g[V]||[];g[V]=$,$.push(w)}I(g,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uu(u,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||g}function $x(u){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uu("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uu("baseRetryDelayMs",5e3,u),this.cb=uu("retryDelaySeedMs",1e4,u),this.Wa=uu("forwardChannelMaxRetries",2,u),this.wa=uu("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Tx(u&&u.concurrentRequestLimit),this.Da=new aF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$x.prototype,t.la=8,t.G=1,t.connect=function(u,g,w,P){yt(0),this.W=u,this.H=g||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.I=Yx(this,null,this.W),of(this)};function Ov(u){if(Bx(u),u.G==3){var g=u.U++,w=Ys(u.I);if(pt(w,"SID",u.K),pt(w,"RID",g),pt(w,"TYPE","terminate"),du(u,w),g=new Ni(u,u.j,g),g.L=2,g.v=ef(Ys(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=g.v,w=!0),w||(g.g=Zx(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Zh(g)}Qx(u)}function sf(u){u.g&&(Mv(u),u.g.cancel(),u.g=null)}function Bx(u){sf(u),u.u&&(a.clearTimeout(u.u),u.u=null),af(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function of(u){if(!xx(u.h)&&!u.s){u.s=!0;var g=u.Ga;Q||ee(),U||(Q(),U=!0),B.add(g,u),u.B=0}}function hF(u,g){return Sx(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=rn(f(u.Ga,u,g),Gx(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Ni(this,this.j,u);let $=this.o;if(this.S&&($?($=b($),A($,this.S)):$=this.S),this.m!==null||this.O||(V.H=$,$=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(g+=P,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=Wx(this,V,g),w=Ys(this.I),pt(w,"RID",u),pt(w,"CVER",22),this.D&&pt(w,"X-HTTP-Session-Id",this.D),du(this,w),$&&(this.O?g="headers="+encodeURIComponent(String(Mx($)))+"&"+g:this.m&&Nv(w,this.m,$)),Pv(this.h,V),this.Ua&&pt(w,"TYPE","init"),this.P?(pt(w,"$req",g),pt(w,"SID","null"),V.T=!0,Iv(V,w,null)):Iv(V,w,g),this.G=2}}else this.G==3&&(u?zx(this,u):this.i.length==0||xx(this.h)||zx(this))};function zx(u,g){var w;g?w=g.l:w=u.U++;const P=Ys(u.I);pt(P,"SID",u.K),pt(P,"RID",w),pt(P,"AID",u.T),du(u,P),u.m&&u.o&&Nv(P,u.m,u.o),w=new Ni(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Wx(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Pv(u.h,w),Iv(w,P,g)}function du(u,g){u.H&&L(u.H,function(w,P){pt(g,P,w)}),u.l&&Ix({},function(w,P){pt(g,P,w)})}function Wx(u,g,w){w=Math.min(u.i.length,w);var P=u.l?f(u.l.Na,u.l,u):null;e:{var V=u.i;let $=-1;for(;;){const re=["count="+w];$==-1?0<w?($=V[0].g,re.push("ofs="+$)):$=0:re.push("ofs="+$);let ut=!0;for(let sn=0;sn<w;sn++){let et=V[sn].g;const _n=V[sn].map;if(et-=$,0>et)$=Math.max(0,V[sn].g-100),ut=!1;else try{lF(_n,re,"req"+et+"_")}catch{P&&P(_n)}}if(ut){P=re.join("&");break e}}}return u=u.i.splice(0,w),g.D=u,P}function Hx(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Q||ee(),U||(Q(),U=!0),B.add(g,u),u.v=0}}function Dv(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=rn(f(u.Fa,u),Gx(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,qx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=rn(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),sf(this),qx(this))};function Mv(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function qx(u){u.g=new Ni(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Ys(u.qa);pt(g,"RID","rpc"),pt(g,"SID",u.K),pt(g,"AID",u.T),pt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&pt(g,"TO",u.ja),pt(g,"TYPE","xmlhttp"),du(u,g),u.m&&u.o&&Nv(g,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=ef(Ys(g)),w.m=null,w.P=!0,_x(w,u)}t.Za=function(){this.C!=null&&(this.C=null,sf(this),Dv(this),yt(19))};function af(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Kx(u,g){var w=null;if(u.g==g){af(u),Mv(u),u.g=null;var P=2}else if(kv(u.h,g))w=g.D,bx(u.h,g),P=1;else return;if(u.G!=0){if(g.o)if(P==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var V=u.B;P=Ze(),Me(P,new ys(P,w)),of(u)}else Hx(u);else if(V=g.s,V==3||V==0&&0<g.X||!(P==1&&hF(u,g)||P==2&&Dv(u)))switch(w&&0<w.length&&(g=u.h,g.i=g.i.concat(w)),V){case 1:ia(u,5);break;case 4:ia(u,10);break;case 3:ia(u,6);break;default:ia(u,2)}}}function Gx(u,g){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*g}function ia(u,g){if(u.j.info("Error code "+g),g==2){var w=f(u.fb,u),P=u.Xa;const V=!P;P=new sa(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xh(P,"https"),ef(P),V?iF(P.toString(),w):oF(P.toString(),w)}else yt(2);u.G=0,u.l&&u.l.sa(g),Qx(u),Bx(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Qx(u){if(u.G=0,u.ka=[],u.l){const g=Cx(u.h);(g.length!=0||u.i.length!=0)&&(x(u.ka,g),x(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function Yx(u,g,w){var P=w instanceof sa?Ys(w):new sa(w);if(P.g!="")g&&(P.g=g+"."+P.g),Jh(P,P.s);else{var V=a.location;P=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var $=new sa(null);P&&Xh($,P),g&&($.g=g),V&&Jh($,V),w&&($.l=w),P=$}return w=u.D,g=u.ya,w&&g&&pt(P,w,g),pt(P,"VER",u.la),du(u,P),P}function Zx(u,g,w){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Rt(new tf({eb:w})):new Rt(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xx(){}t=Xx.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function lf(){}lf.prototype.g=function(u,g){return new sr(u,g)};function sr(u,g){xe.call(this),this.g=new $x(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!_(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!_(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ul(this)}T(sr,xe),sr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sr.prototype.close=function(){Ov(this.g)},sr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=Gs(u),u=w);g.i.push(new QV(g.Ya++,u)),g.G==3&&of(g)},sr.prototype.N=function(){this.g.l=null,delete this.j,Ov(this.g),delete this.g,sr.aa.N.call(this)};function Jx(u){na.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const w in g){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(Jx,na);function eS(){Er.call(this),this.status=1}T(eS,Er);function ul(u){this.g=u}T(ul,Xx),ul.prototype.ua=function(){Me(this.g,"a")},ul.prototype.ta=function(u){Me(this.g,new Jx(u))},ul.prototype.sa=function(u){Me(this.g,new eS)},ul.prototype.ra=function(){Me(this.g,"b")},lf.prototype.createWebChannel=lf.prototype.g,sr.prototype.send=sr.prototype.o,sr.prototype.open=sr.prototype.m,sr.prototype.close=sr.prototype.close,wM=function(){return new lf},_M=function(){return Ze()},yM=Qs,Iw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qh.NO_ERROR=0,Qh.TIMEOUT=8,Qh.HTTP_ERROR=6,hp=Qh,gx.COMPLETE="complete",vM=gx,ru.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",xe.prototype.listen=xe.prototype.K,Lu=ru,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,gM=Rt}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});const lI="@firebase/firestore",cI="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new Ph("@firebase/firestore");function yl(){return Ua.logLevel}function ue(t,...e){if(Ua.logLevel<=$e.DEBUG){const n=e.map(TT);Ua.debug(`Firestore (${Qc}): ${t}`,...n)}}function bi(t,...e){if(Ua.logLevel<=$e.ERROR){const n=e.map(TT);Ua.error(`Firestore (${Qc}): ${t}`,...n)}}function Cc(t,...e){if(Ua.logLevel<=$e.WARN){const n=e.map(TT);Ua.warn(`Firestore (${Qc}): ${t}`,...n)}}function TT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${Qc}) INTERNAL ASSERTION FAILED: `+t;throw bi(e),new Error(e)}function it(t,e){t||be()}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Q7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cn.UNAUTHENTICATED))}shutdown(){}}class Y7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z7{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Eo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Eo,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Eo)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string"),new EM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new Cn(e)}}class X7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class J7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new X7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eK{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,lr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){it(this.o===void 0);const r=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new uI(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(it(typeof n.token=="string"),this.R=n.token,new uI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=tK(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ge(t,e){return t<e?-1:t>e?1:0}function Ic(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=-62135596800,hI=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hI);return new Qt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dI)throw new ve(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hI}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-dI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Qt(0,0))}static max(){return new Re(new Qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="__name__";class Es{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Es.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Es?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Es.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Math.sign(e.length-n.length)}static compareSegments(e,n){const r=Es.isNumericId(e),s=Es.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Es.extractNumericId(e).compare(Es.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wo.fromString(e.substring(4,e.length-2))}}class wt extends Es{construct(e,n,r){return new wt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const nK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Es{construct(e,n,r){return new fn(e,n,r)}static isValidIdentifier(e){return nK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fI}static keyField(){return new fn([fI])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ve(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ve(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ve(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(wt.fromString(e))}static fromName(e){return new _e(wt.fromString(e).popFirst(5))}static empty(){return new _e(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=-1;function rK(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(r===1e9?new Qt(n+1,0):new Qt(n,r));return new Lo(s,_e.empty(),e)}function sK(t){return new Lo(t.readTime,t.key,Hd)}class Lo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Lo(Re.min(),_e.empty(),Hd)}static max(){return new Lo(Re.max(),_e.empty(),Hd)}}function iK(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(t){if(t.code!==Y.FAILED_PRECONDITION||t.message!==oK)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function lK(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Yg.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=-1;function Zg(t){return t==null}function xm(t){return t===0&&1/t==-1/0}function cK(t){return typeof t=="number"&&Number.isInteger(t)&&!xm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="";function uK(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pI(e)),e=dK(t.get(n),e);return pI(e)}function dK(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case xM:n+="";break;default:n+=i}}return n}function pI(t){return t+xM+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||an.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uf(this.root,e,this.comparator,!0)}}class Uf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??an.RED,this.left=s??an.EMPTY,this.right=i??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new an(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return an.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,n,r,s,i){return this}insert(e,n,r){return new an(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gI(this.data.getIterator())}getIteratorFrom(e){return new gI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class gI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new ts([])}unionWith(e){let n=new Yt(fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ts(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ic(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bM("Invalid base64 string: "+i):i}}(e);return new yn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const hK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(t){if(it(!!t),typeof t=="string"){let e=0;const n=hK.exec(t);if(it(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fo(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="server_timestamp",IM="__type__",RM="__previous_value__",AM="__local_write_time__";function ST(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[IM])===null||n===void 0?void 0:n.stringValue)===CM}function Xg(t){const e=t.mapValue.fields[RM];return ST(e)?Xg(e):e}function qd(t){const e=Vo(t.mapValue.fields[AM].timestampValue);return new Qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const Sm="(default)";class Kd{constructor(e,n){this.projectId=e,this.database=n||Sm}static empty(){return new Kd("","")}get isDefaultDatabase(){return this.database===Sm}isEqual(e){return e instanceof Kd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="__type__",pK="__max__",$f={mapValue:{}},PM="__vector__",bm="value";function jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ST(t)?4:gK(t)?9007199254740991:mK(t)?10:11:be()}function js(t,e){if(t===e)return!0;const n=jo(t);if(n!==jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qd(t).isEqual(qd(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Vo(s.timestampValue),a=Vo(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Fo(s.bytesValue).isEqual(Fo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Dt(s.geoPointValue.latitude)===Dt(i.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Dt(s.integerValue)===Dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Dt(s.doubleValue),a=Dt(i.doubleValue);return o===a?xm(o)===xm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ic(t.arrayValue.values||[],e.arrayValue.values||[],js);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(mI(o)!==mI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!js(o[l],a[l])))return!1;return!0}(t,e);default:return be()}}function Gd(t,e){return(t.values||[]).find(n=>js(n,e))!==void 0}function Rc(t,e){if(t===e)return 0;const n=jo(t),r=jo(e);if(n!==r)return Ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Dt(i.integerValue||i.doubleValue),l=Dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return vI(t.timestampValue,e.timestampValue);case 4:return vI(qd(t),qd(e));case 5:return Ge(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Fo(i),l=Fo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ge(a[c],l[c]);if(d!==0)return d}return Ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ge(Dt(i.latitude),Dt(o.latitude));return a!==0?a:Ge(Dt(i.longitude),Dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yI(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const h=i.fields||{},f=o.fields||{},m=(a=h[bm])===null||a===void 0?void 0:a.arrayValue,T=(l=f[bm])===null||l===void 0?void 0:l.arrayValue,v=Ge(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:yI(m,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===$f.mapValue&&o===$f.mapValue)return 0;if(i===$f.mapValue)return 1;if(o===$f.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Ge(l[h],d[h]);if(f!==0)return f;const m=Rc(a[l[h]],c[d[h]]);if(m!==0)return m}return Ge(l.length,d.length)}(t.mapValue,e.mapValue);default:throw be()}}function vI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=Vo(t),r=Vo(e),s=Ge(n.seconds,r.seconds);return s!==0?s:Ge(n.nanos,r.nanos)}function yI(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Rc(n[s],r[s]);if(i)return i}return Ge(n.length,r.length)}function Ac(t){return Rw(t)}function Rw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Rw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Rw(n.fields[o])}`;return s+"}"}(t.mapValue):be()}function fp(t){switch(jo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xg(t);return e?16+fp(e):16;case 5:return 2*t.stringValue.length;case 6:return Fo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+fp(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return nl(r.fields,(i,o)=>{s+=i.length+fp(o)}),s}(t.mapValue);default:throw be()}}function Aw(t){return!!t&&"integerValue"in t}function bT(t){return!!t&&"arrayValue"in t}function _I(t){return!!t&&"nullValue"in t}function wI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pp(t){return!!t&&"mapValue"in t}function mK(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[kM])===null||n===void 0?void 0:n.stringValue)===PM}function sd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return nl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gK(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.value=e}static empty(){return new Cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sd(n)}setAll(e){let n=fn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=sd(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){nl(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Cr(sd(this.value))}}function NM(t){const e=[];return nl(t.fields,(n,r)=>{const s=new fn([n]);if(pp(r)){const i=NM(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rn(e,0,Re.min(),Re.min(),Re.min(),Cr.empty(),0)}static newFoundDocument(e,n,r,s){return new Rn(e,1,n,Re.min(),r,s,0)}static newNoDocument(e,n){return new Rn(e,2,n,Re.min(),Re.min(),Cr.empty(),0)}static newUnknownDocument(e,n){return new Rn(e,3,n,Re.min(),Re.min(),Cr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.position=e,this.inclusive=n}}function EI(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=_e.comparator(_e.fromName(o.referenceValue),n.key):r=Rc(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function TI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!js(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n="asc"){this.field=e,this.dir=n}}function vK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{}class Kt extends OM{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _K(e,n,r):n==="array-contains"?new TK(e,r):n==="in"?new xK(e,r):n==="not-in"?new SK(e,r):n==="array-contains-any"?new bK(e,r):new Kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wK(e,r):new EK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rc(n,this.value)):n!==null&&jo(this.value)===jo(n)&&this.matchesComparison(Rc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Us extends OM{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Us(e,n)}matches(e){return DM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function DM(t){return t.op==="and"}function MM(t){return yK(t)&&DM(t)}function yK(t){for(const e of t.filters)if(e instanceof Us)return!1;return!0}function kw(t){if(t instanceof Kt)return t.field.canonicalString()+t.op.toString()+Ac(t.value);if(MM(t))return t.filters.map(e=>kw(e)).join(",");{const e=t.filters.map(n=>kw(n)).join(",");return`${t.op}(${e})`}}function LM(t,e){return t instanceof Kt?function(r,s){return s instanceof Kt&&r.op===s.op&&r.field.isEqual(s.field)&&js(r.value,s.value)}(t,e):t instanceof Us?function(r,s){return s instanceof Us&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&LM(o,s.filters[a]),!0):!1}(t,e):void be()}function VM(t){return t instanceof Kt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ac(n.value)}`}(t):t instanceof Us?function(n){return n.op.toString()+" {"+n.getFilters().map(VM).join(" ,")+"}"}(t):"Filter"}class _K extends Kt{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class wK extends Kt{constructor(e,n){super(e,"in",n),this.keys=FM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EK extends Kt{constructor(e,n){super(e,"not-in",n),this.keys=FM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>_e.fromName(r.referenceValue))}class TK extends Kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bT(n)&&Gd(n.arrayValue,this.value)}}class xK extends Kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gd(this.value.arrayValue,n)}}class SK extends Kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gd(this.value.arrayValue,n)}}class bK extends Kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.le=null}}function xI(t,e=null,n=[],r=[],s=null,i=null,o=null){return new CK(t,e,n,r,s,i,o)}function CT(t){const e=Ae(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Zg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ac(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ac(r)).join(",")),e.le=n}return e.le}function IT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TI(t.startAt,e.startAt)&&TI(t.endAt,e.endAt)}function Pw(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function IK(t,e,n,r,s,i,o,a){return new Jg(t,e,n,r,s,i,o,a)}function jM(t){return new Jg(t)}function SI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RK(t){return t.collectionGroup!==null}function id(t){const e=Ae(t);if(e.he===null){e.he=[];const n=new Set;for(const i of e.explicitOrderBy)e.he.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Yt(fn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.he.push(new Im(i,r))}),n.has(fn.keyField().canonicalString())||e.he.push(new Im(fn.keyField(),r))}return e.he}function Os(t){const e=Ae(t);return e.Pe||(e.Pe=AK(e,id(t))),e.Pe}function AK(t,e){if(t.limitType==="F")return xI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Im(s.field,i)});const n=t.endAt?new Cm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cm(t.startAt.position,t.startAt.inclusive):null;return xI(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nw(t,e,n){return new Jg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ev(t,e){return IT(Os(t),Os(e))&&t.limitType===e.limitType}function UM(t){return`${CT(Os(t))}|lt:${t.limitType}`}function _l(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>VM(s)).join(", ")}]`),Zg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ac(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ac(s)).join(",")),`Target(${r})`}(Os(t))}; limitType=${t.limitType})`}function tv(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):_e.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of id(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=EI(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,id(r),s)||r.endAt&&!function(o,a,l){const c=EI(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,id(r),s))}(t,e)}function kK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $M(t){return(e,n)=>{let r=!1;for(const s of id(t)){const i=PK(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function PK(t,e,n){const r=t.field.isKeyField()?_e.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Rc(l,c):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){nl(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return SM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK=new It(_e.comparator);function Ci(){return NK}const BM=new It(_e.comparator);function Vu(...t){let e=BM;for(const n of t)e=e.insert(n.key,n);return e}function zM(t){let e=BM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ma(){return od()}function WM(){return od()}function od(){return new rl(t=>t.toString(),(t,e)=>t.isEqual(e))}const OK=new It(_e.comparator),DK=new Yt(_e.comparator);function He(...t){let e=DK;for(const n of t)e=e.add(n);return e}const MK=new Yt(Ge);function LK(){return MK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xm(e)?"-0":e}}function HM(t){return{integerValue:""+t}}function VK(t,e){return cK(e)?HM(e):RT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this._=void 0}}function FK(t,e,n){return t instanceof Rm?function(s,i){const o={fields:{[IM]:{stringValue:CM},[AM]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ST(i)&&(i=Xg(i)),i&&(o.fields[RM]=i),{mapValue:o}}(n,e):t instanceof Qd?KM(t,e):t instanceof Yd?GM(t,e):function(s,i){const o=qM(s,i),a=bI(o)+bI(s.Ie);return Aw(o)&&Aw(s.Ie)?HM(a):RT(s.serializer,a)}(t,e)}function jK(t,e,n){return t instanceof Qd?KM(t,e):t instanceof Yd?GM(t,e):n}function qM(t,e){return t instanceof Am?function(r){return Aw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Rm extends nv{}class Qd extends nv{constructor(e){super(),this.elements=e}}function KM(t,e){const n=QM(e);for(const r of t.elements)n.some(s=>js(s,r))||n.push(r);return{arrayValue:{values:n}}}class Yd extends nv{constructor(e){super(),this.elements=e}}function GM(t,e){let n=QM(e);for(const r of t.elements)n=n.filter(s=>!js(s,r));return{arrayValue:{values:n}}}class Am extends nv{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function bI(t){return Dt(t.integerValue||t.doubleValue)}function QM(t){return bT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UK(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Qd&&s instanceof Qd||r instanceof Yd&&s instanceof Yd?Ic(r.elements,s.elements,js):r instanceof Am&&s instanceof Am?js(r.Ie,s.Ie):r instanceof Rm&&s instanceof Rm}(t.transform,e.transform)}class $K{constructor(e,n){this.version=e,this.transformResults=n}}class pi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pi}static exists(e){return new pi(void 0,e)}static updateTime(e){return new pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rv{}function YM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new XM(t.key,pi.none()):new Fh(t.key,t.data,pi.none());{const n=t.data,r=Cr.empty();let s=new Yt(fn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new sl(t.key,r,new ts(s.toArray()),pi.none())}}function BK(t,e,n){t instanceof Fh?function(s,i,o){const a=s.value.clone(),l=II(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof sl?function(s,i,o){if(!mp(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=II(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(ZM(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ad(t,e,n,r){return t instanceof Fh?function(i,o,a,l){if(!mp(i.precondition,o))return a;const c=i.value.clone(),d=RI(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof sl?function(i,o,a,l){if(!mp(i.precondition,o))return a;const c=RI(i.fieldTransforms,l,o),d=o.data;return d.setAll(ZM(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return mp(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function zK(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=qM(r.transform,s||null);i!=null&&(n===null&&(n=Cr.empty()),n.set(r.field,i))}return n||null}function CI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ic(r,s,(i,o)=>UK(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fh extends rv{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sl extends rv{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ZM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function II(t,e,n){const r=new Map;it(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,jK(o,a,n[s]))}return r}function RI(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,FK(i,o,e))}return r}class XM extends rv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WK extends rv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&BK(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ad(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ad(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WM();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=YM(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&Ic(this.mutations,e.mutations,(n,r)=>CI(n,r))&&Ic(this.baseMutations,e.baseMutations,(n,r)=>CI(n,r))}}class AT{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){it(e.mutations.length===r.length);let s=function(){return OK}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new AT(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Qe;function GK(t){switch(t){case Y.OK:return be();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return be()}}function JM(t){if(t===void 0)return bi("GRPC error has no .code"),Y.UNKNOWN;switch(t){case jt.OK:return Y.OK;case jt.CANCELLED:return Y.CANCELLED;case jt.UNKNOWN:return Y.UNKNOWN;case jt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case jt.INTERNAL:return Y.INTERNAL;case jt.UNAVAILABLE:return Y.UNAVAILABLE;case jt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case jt.NOT_FOUND:return Y.NOT_FOUND;case jt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case jt.ABORTED:return Y.ABORTED;case jt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case jt.DATA_LOSS:return Y.DATA_LOSS;default:return be()}}(Qe=jt||(jt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK=new wo([4294967295,4294967295],0);function AI(t){const e=QK().encode(t),n=new mM;return n.update(e),new Uint8Array(n.digest())}function kI(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wo([n,r],0),new wo([s,i],0)]}class kT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fu(`Invalid padding: ${n}`);if(r<0)throw new Fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fu(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=wo.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(wo.fromNumber(r)));return s.compare(YK)===1&&(s=new wo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=AI(e),[r,s]=kI(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);if(!this.Re(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new kT(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const n=AI(e),[r,s]=kI(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);this.Ve(o)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,jh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sv(Re.min(),s,new It(Ge),Ci(),He())}}class jh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jh(r,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class eL{constructor(e,n){this.targetId=e,this.ge=n}}class tL{constructor(e,n,r=yn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class PI{constructor(){this.pe=0,this.ye=NI(),this.we=yn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=He(),n=He(),r=He();return this.ye.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:be()}}),new jh(this.we,this.be,e,n,r)}Me(){this.Se=!1,this.ye=NI()}xe(e,n){this.Se=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,it(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class ZK{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ci(),this.$e=Bf(),this.Ke=Bf(),this.Ue=new It(Ge)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const i=s.target;if(Pw(i))if(r===0){const o=new _e(i.path);this.ze(n,o,Rn.newNoDocument(o,Re.min()))}else it(r===1);else{const o=this.et(n);if(o!==r){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Fo(r).toUint8Array()}catch(l){if(l instanceof bM)return Cc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kT(o,s,i)}catch(l){return Cc(l instanceof Fu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.ze(n,i,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((i,o)=>{const a=this.Xe(o);if(a){if(i.current&&Pw(a.target)){const l=new _e(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,Rn.newNoDocument(l,e))}i.ve&&(n.set(o,i.Fe()),i.Me())}});let r=He();this.Ke.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.Qe.forEach((i,o)=>o.setReadTime(e));const s=new sv(e,n,this.Ue,this.Qe,r);return this.Qe=Ci(),this.$e=Bf(),this.Ke=Bf(),this.Ue=new It(Ge),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(e)),this.Ke=this.Ke.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new PI,this.qe.set(e,n)),n}ct(e){let n=this.Ke.get(e);return n||(n=new Yt(Ge),this.Ke=this.Ke.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Yt(Ge),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new PI),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Bf(){return new It(_e.comparator)}function NI(){return new It(_e.comparator)}const XK={asc:"ASCENDING",desc:"DESCENDING"},JK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eG={and:"AND",or:"OR"};class tG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ow(t,e){return t.useProto3Json||Zg(e)?e:{value:e}}function km(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nL(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nG(t,e){return km(t,e.toTimestamp())}function Ds(t){return it(!!t),Re.fromTimestamp(function(n){const r=Vo(n);return new Qt(r.seconds,r.nanos)}(t))}function PT(t,e){return Dw(t,e).canonicalString()}function Dw(t,e){const n=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rL(t){const e=wt.fromString(t);return it(lL(e)),e}function Mw(t,e){return PT(t.databaseId,e.path)}function By(t,e){const n=rL(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(iL(n))}function sL(t,e){return PT(t.databaseId,e)}function rG(t){const e=rL(t);return e.length===4?wt.emptyPath():iL(e)}function Lw(t){return new wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iL(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OI(t,e,n){return{name:Mw(t,e),fields:n.value.mapValue.fields}}function sG(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(it(d===void 0||typeof d=="string"),yn.fromBase64String(d||"")):(it(d===void 0||d instanceof Buffer||d instanceof Uint8Array),yn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?Y.UNKNOWN:JM(c.code);return new ve(d,c.message||"")}(o);n=new tL(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=By(t,r.document.name),i=Ds(r.document.updateTime),o=r.document.createTime?Ds(r.document.createTime):Re.min(),a=new Cr({mapValue:{fields:r.document.fields}}),l=Rn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new gp(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=By(t,r.document),i=r.readTime?Ds(r.readTime):Re.min(),o=Rn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new gp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=By(t,r.document),i=r.removedTargetIds||[];n=new gp([],i,s,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new KK(s,i),a=r.targetId;n=new eL(a,o)}}return n}function iG(t,e){let n;if(e instanceof Fh)n={update:OI(t,e.key,e.value)};else if(e instanceof XM)n={delete:Mw(t,e.key)};else if(e instanceof sl)n={update:OI(t,e.key,e.data),updateMask:pG(e.fieldMask)};else{if(!(e instanceof WK))return be();n={verify:Mw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Rm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Am)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:nG(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:be()}(t,e.precondition)),n}function oG(t,e){return t&&t.length>0?(it(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Ds(s.updateTime):Ds(i);return o.isEqual(Re.min())&&(o=Ds(i)),new $K(o,s.transformResults||[])}(n,e))):[]}function aG(t,e){return{documents:[sL(t,e.path)]}}function lG(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sL(t,s);const i=function(c){if(c.length!==0)return aL(Us.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:wl(f.field),direction:dG(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ow(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:n,parent:s}}function cG(t){let e=rG(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){it(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=oL(h);return f instanceof Us&&MM(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(T){return new Im(El(T.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Zg(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Cm(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Cm(m,f)}(n.endAt)),IK(e,s,o,i,a,"F",l,c)}function uG(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=El(n.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=El(n.unaryFilter.field);return Kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=El(n.unaryFilter.field);return Kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=El(n.unaryFilter.field);return Kt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(n){return Kt.create(El(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Us.create(n.compositeFilter.filters.map(r=>oL(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return be()}}(n.compositeFilter.op))}(t):be()}function dG(t){return XK[t]}function hG(t){return JK[t]}function fG(t){return eG[t]}function wl(t){return{fieldPath:t.canonicalString()}}function El(t){return fn.fromServerFormat(t.fieldPath)}function aL(t){return t instanceof Kt?function(n){if(n.op==="=="){if(wI(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(_I(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wI(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(_I(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:hG(n.op),value:n.value}}}(t):t instanceof Us?function(n){const r=n.getFilters().map(s=>aL(s));return r.length===1?r[0]:{compositeFilter:{op:fG(n.op),filters:r}}}(t):be()}function pG(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,r,s,i=Re.min(),o=Re.min(),a=yn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new io(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(e){this.Tt=e}}function gG(t){const e=cG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(){this.Tn=new yG}addToCollectionParentIndex(e,n){return this.Tn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Lo.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Lo.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class yG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Yt(wt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Yt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cL=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(cL,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new kc(0)}static Un(){return new kc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="LruGarbageCollector",_G=1048576;function LI([t,e],[n,r]){const s=Ge(t,n);return s===0?Ge(e,r):s}class wG{constructor(e){this.Hn=e,this.buffer=new Yt(LI),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();LI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ue(MI,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zc(n)?ue(MI,"Ignoring IndexedDB error during garbage collection: ",n):await Yc(n)}await this.er(3e5)})}}class TG{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Yg.ae);const r=new wG(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(DI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DI):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),yl()<=$e.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function xG(t,e){return new TG(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(){this.changes=new rl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ad(r.mutation,s,ts.empty(),Qt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,n,r=He()){const s=ma();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Vu();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ma();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,He()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Ci();const o=od(),a=function(){return od()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof sl)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ad(d.mutation,c,d.mutation.getFieldMask(),Qt.now())):o.set(c.key,ts.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new bG(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=od();let s=new It((o,a)=>o-a),i=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||ts.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(s.get(a.batchId)||He()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=WM();d.forEach(f=>{if(!i.has(f)){const m=YM(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RK(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(ma());let a=Hd,l=i;return o.next(c=>q.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?q.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,He())).next(d=>({batchId:a,changes:zM(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(r=>{let s=Vu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Vu();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,l=>{const c=function(h,f){return new Jg(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Rn.newInvalidDocument(d)))});let a=Vu();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&ad(d.mutation,c,ts.empty(),Qt.now()),tv(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return q.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ds(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:gG(s.bundledQuery),readTime:Ds(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(){this.overlays=new It(_e.comparator),this.Rr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ma();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.Et(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=ma(),i=n.length+1,o=new _e(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new It((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=ma(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ma(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return q.resolve(a)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qK(n,r));let i=this.Rr.get(n);i===void 0&&(i=He(),this.Rr.set(n,i)),this.Rr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.Vr=new Yt(Xt.mr),this.gr=new Yt(Xt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new Xt(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new Xt(e,n))}br(e,n){e.forEach(r=>this.removeReference(r,n))}Sr(e){const n=new _e(new wt([])),r=new Xt(n,e),s=new Xt(n,e+1),i=[];return this.gr.forEachInRange([r,s],o=>{this.wr(o),i.push(o.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new _e(new wt([])),r=new Xt(n,e),s=new Xt(n,e+1);let i=He();return this.gr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xt(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return _e.comparator(e.key,n.key)||Ge(e.Cr,n.Cr)}static pr(e,n){return Ge(e.Cr,n.Cr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Yt(Xt.mr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new HK(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Mr=this.Mr.add(new Xt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?xT:this.Fr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xt(n,0),s=new Xt(n,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([r,s],o=>{const a=this.Or(o.Cr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Yt(Ge);return n.forEach(s=>{const i=new Xt(s,0),o=new Xt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,o],a=>{r=r.add(a.Cr)})}),q.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;_e.isDocumentKey(i)||(i=i.child(""));const o=new Xt(new _e(i),0);let a=new Yt(Ge);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Cr)),!0)},o),q.resolve(this.Br(a))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){it(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return q.forEach(n.mutations,s=>{const i=new Xt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new Xt(n,0),s=this.Mr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e){this.kr=e,this.docs=function(){return new It(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(n))}getEntries(e,n){let r=Ci();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rn.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ci();const o=n.path,a=new _e(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||iK(sK(d),r)<=0||(s.has(d.key)||tv(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){be()}qr(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new NG(this)}getSize(e){return q.resolve(this.size)}}class NG extends SG{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(e){this.persistence=e,this.Qr=new rl(n=>CT(n),IT),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.$r=0,this.Kr=new NT,this.targetCount=0,this.Ur=kc.Kn()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),q.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ur=new kc(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.zn(n),q.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Kr.yr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Kr.br(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Kr.Sr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Kr.vr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Yg(0),this.zr=!1,this.zr=!0,this.jr=new AG,this.referenceDelegate=e(this),this.Hr=new OG(this),this.indexManager=new vG,this.remoteDocumentCache=function(s){return new PG(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new mG(n),this.Yr=new IG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new kG(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const s=new DG(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(i=>this.referenceDelegate.Xr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}ei(e,n){return q.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class DG extends aK{constructor(e){super(),this.currentSequenceNumber=e}}class OT{constructor(e){this.persistence=e,this.ti=new NT,this.ni=null}static ri(e){return new OT(e)}get ii(){if(this.ni)return this.ni;throw be()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),q.resolve()}removeTarget(e,n){this.ti.Sr(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.ii.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ii,r=>{const s=_e.fromPath(r);return this.si(e,s).next(i=>{i||n.removeEntry(s,Re.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return q.or([()=>q.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Pm{constructor(e,n){this.persistence=e,this.oi=new rl(r=>uK(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=xG(this,n)}static ri(e,n){return new Pm(e,n)}Zr(){}Xr(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return q.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),q.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fp(e.data.value)),n}ar(e,n,r){return q.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=He(),s=He();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new DT(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Gz()?8:lK(Pn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ss(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new MG;return this._s(e,n,o).next(a=>{if(i.result=a,this.Xi)return this.us(e,n,o,a.size)})}).next(()=>i.result)}us(e,n,r,s){return r.documentReadCount<this.es?(yl()<=$e.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",_l(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),q.resolve()):(yl()<=$e.DEBUG&&ue("QueryEngine","Query:",_l(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(yl()<=$e.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",_l(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Os(n))):q.resolve())}rs(e,n){if(SI(n))return q.resolve(null);let r=Os(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Nw(n,null,"F"),r=Os(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=He(...i);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(e,Nw(n,null,"F")):this.hs(e,c,n,l)}))})))}ss(e,n,r,s){return SI(n)||s.isEqual(Re.min())?q.resolve(null):this.ns.getDocuments(e,r).next(i=>{const o=this.cs(n,i);return this.ls(n,o,r,s)?q.resolve(null):(yl()<=$e.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_l(n)),this.hs(e,o,n,rK(s,Hd)).next(a=>a))})}cs(e,n){let r=new Yt($M(e));return n.forEach((s,i)=>{tv(e,i)&&(r=r.add(i))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(e,n,r){return yl()<=$e.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",_l(n)),this.ns.getDocumentsMatchingQuery(e,n,Lo.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="LocalStore",VG=3e8;class FG{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new It(Ge),this.Is=new rl(i=>CT(i),IT),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CG(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function jG(t,e,n,r){return new FG(t,e,n,r)}async function dL(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=He();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function UG(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let m=q.resolve();return f.forEach(T=>{m=m.next(()=>d.getEntry(l,T)).next(v=>{const x=c.docVersions.get(T);it(x!==null),v.version.compareTo(x)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=He();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hL(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function $G(t,e){const n=Ae(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(n.Hr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Hr.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(yn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(v,x,E){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=VG?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,m,d)&&a.push(n.Hr.updateTargetData(i,m))});let l=Ci(),c=He();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(BG(i,o,e.documentUpdates).next(d=>{l=d.Vs,c=d.fs})),!r.isEqual(Re.min())){const d=n.Hr.getLastRemoteSnapshotVersion(i).next(h=>n.Hr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ts=s,i))}function BG(t,e,n){let r=He(),s=He();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ci();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ue(MT,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:s}})}function zG(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xT),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WG(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Hr.allocateTargetId(r).next(o=>(s=new io(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function Vw(t,e,n){const r=Ae(t),s=r.Ts.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Zc(o))throw o;ue(MT,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function VI(t,e,n){const r=Ae(t);let s=Re.min(),i=He();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=Ae(l),f=h.Is.get(d);return f!==void 0?q.resolve(h.Ts.get(f)):h.Hr.getTargetData(c,d)}(r,o,Os(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,n?s:Re.min(),n?i:He())).next(a=>(HG(r,kK(e),a),{documents:a,gs:i})))}function HG(t,e,n){let r=t.Es.get(e)||Re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Es.set(e,r)}class FI{constructor(){this.activeTargetIds=LK()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qG{constructor(){this.ho=new FI,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new FI,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="ConnectivityMonitor";class UI{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ue(jI,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ue(jI,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=null;function Fw(){return zf===null?zf=function(){return 268435456+Math.round(2147483648*Math.random())}():zf++,"0x"+zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="RestConnection",GG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QG{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Sm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,n,r,s,i){const o=Fw(),a=this.So(e,n.toUriEncodedString());ue(zy,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,s,i),this.vo(e,a,l,r).then(c=>(ue(zy,`Received RPC '${e}' ${o}: `,c),c),c=>{throw Cc(zy,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Co(e,n,r,s,i,o){return this.bo(e,n,r,s,i)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}So(e,n){const r=GG[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class ZG extends QG{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const i=Fw();return new Promise((o,a)=>{const l=new gM;l.setWithCredentials(!0),l.listenOnce(vM.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case hp.NO_ERROR:const d=l.getResponseJson();ue(Sn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case hp.TIMEOUT:ue(Sn,`RPC '${e}' ${i} timed out`),a(new ve(Y.DEADLINE_EXCEEDED,"Request time out"));break;case hp.HTTP_ERROR:const h=l.getStatus();if(ue(Sn,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const T=function(x){const E=x.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(E)>=0?E:Y.UNKNOWN}(m.status);a(new ve(T,m.message))}else a(new ve(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ve(Y.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ue(Sn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ue(Sn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Wo(e,n,r){const s=Fw(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wM(),a=_M(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ue(Sn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,m=!1;const T=new YG({Fo:x=>{m?ue(Sn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(f||(ue(Sn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ue(Sn,`RPC '${e}' stream ${s} sending:`,x),h.send(x))},Mo:()=>h.close()}),v=(x,E,_)=>{x.listen(E,S=>{try{_(S)}catch(O){setTimeout(()=>{throw O},0)}})};return v(h,Lu.EventType.OPEN,()=>{m||(ue(Sn,`RPC '${e}' stream ${s} transport opened.`),T.Qo())}),v(h,Lu.EventType.CLOSE,()=>{m||(m=!0,ue(Sn,`RPC '${e}' stream ${s} transport closed`),T.Ko())}),v(h,Lu.EventType.ERROR,x=>{m||(m=!0,Cc(Sn,`RPC '${e}' stream ${s} transport errored:`,x),T.Ko(new ve(Y.UNAVAILABLE,"The operation could not be completed")))}),v(h,Lu.EventType.MESSAGE,x=>{var E;if(!m){const _=x.data[0];it(!!_);const S=_,O=(S==null?void 0:S.error)||((E=S[0])===null||E===void 0?void 0:E.error);if(O){ue(Sn,`RPC '${e}' stream ${s} received error:`,O);const D=O.status;let L=function(C){const A=jt[C];if(A!==void 0)return JM(A)}(D),I=O.message;L===void 0&&(L=Y.INTERNAL,I="Unknown error status: "+D+" with message "+O.message),m=!0,T.Ko(new ve(L,I)),h.close()}else ue(Sn,`RPC '${e}' stream ${s} received:`,_),T.Uo(_)}}),v(a,yM.STAT_EVENT,x=>{x.stat===Iw.PROXY?ue(Sn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Iw.NOPROXY&&ue(Sn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.$o()},0),T}}function Wy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){return new tG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="PersistentStream";class pL{constructor(e,n,r,s,i,o,a,l){this.Ti=e,this.n_=r,this.r_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new fL(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(bi(n.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new ve(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ue($I,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(ue($I,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XG extends pL{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=sG(this.serializer,e),r=function(i){if(!("targetChange"in i))return Re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?Ds(o.readTime):Re.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=Lw(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Pw(l)?{documents:aG(i,l)}:{query:lG(i,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nL(i,o.resumeToken);const c=Ow(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=km(i,o.snapshotVersion.toTimestamp());const c=Ow(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=uG(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=Lw(this.serializer),n.removeTarget=e,this.I_(n)}}class JG extends pL{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=oG(e.writeResults,e.commitTime),r=Ds(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=Lw(this.serializer),this.I_(e)}S_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>iG(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{}class tQ extends eQ{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ve(Y.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.bo(e,Dw(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ve(Y.UNKNOWN,i.toString())})}Co(e,n,r,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Dw(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(Y.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class nQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(bi(n),this.N_=!1):ue("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="RemoteStore";class rQ{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(o=>{r.enqueueAndForget(async()=>{il(this)&&(ue($a,"Restarting streams for network reachability change."),await async function(l){const c=Ae(l);c.W_.add(4),await Uh(c),c.j_.set("Unknown"),c.W_.delete(4),await ov(c)}(this))})}),this.j_=new nQ(r,s)}}async function ov(t){if(il(t))for(const e of t.G_)await e(!0)}async function Uh(t){for(const e of t.G_)await e(!1)}function mL(t,e){const n=Ae(t);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),jT(n)?FT(n):Xc(n).c_()&&VT(n,e))}function LT(t,e){const n=Ae(t),r=Xc(n);n.U_.delete(e),r.c_()&&gL(n,e),n.U_.size===0&&(r.c_()?r.P_():il(n)&&n.j_.set("Unknown"))}function VT(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xc(t).y_(e)}function gL(t,e){t.H_.Ne(e),Xc(t).w_(e)}function FT(t){t.H_=new ZK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Xc(t).start(),t.j_.B_()}function jT(t){return il(t)&&!Xc(t).u_()&&t.U_.size>0}function il(t){return Ae(t).W_.size===0}function vL(t){t.H_=void 0}async function sQ(t){t.j_.set("Online")}async function iQ(t){t.U_.forEach((e,n)=>{VT(t,e)})}async function oQ(t,e){vL(t),jT(t)?(t.j_.q_(e),FT(t)):t.j_.set("Unknown")}async function aQ(t,e,n){if(t.j_.set("Online"),e instanceof tL&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.U_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.U_.delete(a),s.H_.removeTarget(a))}(t,e)}catch(r){ue($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nm(t,r)}else if(e instanceof gp?t.H_.We(e):e instanceof eL?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Re.min()))try{const r=await hL(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.U_.get(c);d&&i.U_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.U_.get(l);if(!d)return;i.U_.set(l,d.withResumeToken(yn.EMPTY_BYTE_STRING,d.snapshotVersion)),gL(i,l);const h=new io(d.target,l,c,d.sequenceNumber);VT(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ue($a,"Failed to raise snapshot:",r),await Nm(t,r)}}async function Nm(t,e,n){if(!Zc(e))throw e;t.W_.add(1),await Uh(t),t.j_.set("Offline"),n||(n=()=>hL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue($a,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await ov(t)})}function yL(t,e){return e().catch(n=>Nm(t,n,e))}async function av(t){const e=Ae(t),n=Uo(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:xT;for(;lQ(e);)try{const s=await zG(e.localStore,r);if(s===null){e.K_.length===0&&n.P_();break}r=s.batchId,cQ(e,s)}catch(s){await Nm(e,s)}_L(e)&&wL(e)}function lQ(t){return il(t)&&t.K_.length<10}function cQ(t,e){t.K_.push(e);const n=Uo(t);n.c_()&&n.b_&&n.S_(e.mutations)}function _L(t){return il(t)&&!Uo(t).u_()&&t.K_.length>0}function wL(t){Uo(t).start()}async function uQ(t){Uo(t).C_()}async function dQ(t){const e=Uo(t);for(const n of t.K_)e.S_(n.mutations)}async function hQ(t,e,n){const r=t.K_.shift(),s=AT.from(r,e,n);await yL(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await av(t)}async function fQ(t,e){e&&Uo(t).b_&&await async function(r,s){if(function(o){return GK(o)&&o!==Y.ABORTED}(s.code)){const i=r.K_.shift();Uo(r).h_(),await yL(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await av(r)}}(t,e),_L(t)&&wL(t)}async function BI(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),ue($a,"RemoteStore received new credentials");const r=il(n);n.W_.add(3),await Uh(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await ov(n)}async function pQ(t,e){const n=Ae(t);e?(n.W_.delete(2),await ov(n)):e||(n.W_.add(2),await Uh(n),n.j_.set("Unknown"))}function Xc(t){return t.J_||(t.J_=function(n,r,s){const i=Ae(n);return i.M_(),new XG(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:sQ.bind(null,t),No:iQ.bind(null,t),Lo:oQ.bind(null,t),p_:aQ.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),jT(t)?FT(t):t.j_.set("Unknown")):(await t.J_.stop(),vL(t))})),t.J_}function Uo(t){return t.Y_||(t.Y_=function(n,r,s){const i=Ae(n);return i.M_(),new JG(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:uQ.bind(null,t),Lo:fQ.bind(null,t),D_:dQ.bind(null,t),v_:hQ.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await av(t)):(await t.Y_.stop(),t.K_.length>0&&(ue($a,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new UT(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $T(t,e){if(bi("AsyncQueue",`${e}: ${t}`),Zc(t))return new ve(Y.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=Vu(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.Z_=new It(_e.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):be():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pc{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pc(e,n,Yl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ev(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class gQ{constructor(){this.queries=WI(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=Ae(n),i=s.queries;s.queries=WI(),i.forEach((o,a)=>{for(const l of a.ta)l.onError(r)})})(this,new ve(Y.ABORTED,"Firestore shutting down"))}}function WI(){return new rl(t=>UM(t),ev)}async function vQ(t,e){const n=Ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.na()&&e.ra()&&(r=2):(i=new mQ,r=e.ra()?0:1);try{switch(r){case 0:i.ea=await n.onListen(s,!0);break;case 1:i.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=$T(o,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ta.push(e),e.sa(n.onlineState),i.ea&&e.oa(i.ea)&&BT(n)}async function yQ(t,e){const n=Ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ta.indexOf(e);o>=0&&(i.ta.splice(o,1),i.ta.length===0?s=e.ra()?0:1:!i.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _Q(t,e){const n=Ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ta)a.oa(s)&&(r=!0);o.ea=s}}r&&BT(n)}function wQ(t,e,n){const r=Ae(t),s=r.queries.get(e);if(s)for(const i of s.ta)i.onError(n);r.queries.delete(e)}function BT(t){t.ia.forEach(e=>{e.next()})}var jw,HI;(HI=jw||(jw={}))._a="default",HI.Cache="cache";class EQ{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Pc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Pc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==jw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.key=e}}class TL{constructor(e){this.key=e}}class TQ{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=He(),this.mutatedKeys=He(),this.ya=$M(e),this.wa=new Yl(this.ya)}get ba(){return this.fa}Sa(e,n){const r=n?n.Da:new zI,s=n?n.wa:this.wa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=tv(this.query,h)?h:null,T=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;f&&m?f.data.isEqual(m.data)?T!==v&&(r.track({type:3,doc:m}),x=!0):this.va(f,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.ya(m,l)>0||c&&this.ya(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),x=!0):f&&!m&&(r.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),i=v?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{wa:o,Da:r,ls:a,mutatedKeys:i}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((d,h)=>function(m,T){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return v(m)-v(T)}(d.type,h.type)||this.ya(d.doc,h.doc)),this.Ca(r),s=s!=null&&s;const a=n&&!s?this.Fa():[],l=this.pa.size===0&&this.current&&!s?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new Pc(this.query,e.wa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new zI,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=He(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new TL(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new EL(r))}),n}Oa(e){this.fa=e.gs,this.pa=He();const n=this.Sa(e.documents);return this.applyChanges(n,!0)}Na(){return Pc.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const zT="SyncEngine";class xQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SQ{constructor(e){this.key=e,this.Ba=!1}}class bQ{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new rl(a=>UM(a),ev),this.qa=new Map,this.Qa=new Set,this.$a=new It(_e.comparator),this.Ka=new Map,this.Ua=new NT,this.Wa={},this.Ga=new Map,this.za=kc.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function CQ(t,e,n=!0){const r=RL(t);let s;const i=r.ka.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await xL(r,e,n,!0),s}async function IQ(t,e){const n=RL(t);await xL(n,e,!0,!1)}async function xL(t,e,n,r){const s=await WG(t.localStore,Os(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await RQ(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&mL(t.remoteStore,s),a}async function RQ(t,e,n,r,s){t.Ha=(h,f,m)=>async function(v,x,E,_){let S=x.view.Sa(E);S.ls&&(S=await VI(v.localStore,x.query,!1).then(({documents:I})=>x.view.Sa(I,S)));const O=_&&_.targetChanges.get(x.targetId),D=_&&_.targetMismatches.get(x.targetId)!=null,L=x.view.applyChanges(S,v.isPrimaryClient,O,D);return KI(v,x.targetId,L.Ma),L.snapshot}(t,h,f,m);const i=await VI(t.localStore,e,!0),o=new TQ(e,i.gs),a=o.Sa(i.documents),l=jh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);KI(t,n,c.Ma);const d=new xQ(e,n,o);return t.ka.set(e,d),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),c.snapshot}async function AQ(t,e,n){const r=Ae(t),s=r.ka.get(e),i=r.qa.get(s.targetId);if(i.length>1)return r.qa.set(s.targetId,i.filter(o=>!ev(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vw(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&LT(r.remoteStore,s.targetId),Uw(r,s.targetId)}).catch(Yc)):(Uw(r,s.targetId),await Vw(r.localStore,s.targetId,!0))}async function kQ(t,e){const n=Ae(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),LT(n.remoteStore,r.targetId))}async function PQ(t,e,n){const r=FQ(t);try{const s=await function(o,a){const l=Ae(o),c=Qt.now(),d=a.reduce((m,T)=>m.add(T.key),He());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let T=Ci(),v=He();return l.ds.getEntries(m,d).next(x=>{T=x,T.forEach((E,_)=>{_.isValidDocument()||(v=v.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,T)).next(x=>{h=x;const E=[];for(const _ of a){const S=zK(_,h.get(_.key).overlayedDocument);S!=null&&E.push(new sl(_.key,S,NM(S.value.mapValue),pi.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,E,a)}).next(x=>{f=x;const E=x.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,x.batchId,E)})}).then(()=>({batchId:f.batchId,changes:zM(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Wa[o.currentUser.toKey()];c||(c=new It(Ge)),c=c.insert(a,l),o.Wa[o.currentUser.toKey()]=c}(r,s.batchId,n),await $h(r,s.changes),await av(r.remoteStore)}catch(s){const i=$T(s,"Failed to persist write");n.reject(i)}}async function SL(t,e){const n=Ae(t);try{const r=await $G(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ka.get(i);o&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?it(o.Ba):s.removedDocuments.size>0&&(it(o.Ba),o.Ba=!1))}),await $h(n,r,e)}catch(r){await Yc(r)}}function qI(t,e,n){const r=Ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((i,o)=>{const a=o.view.sa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ae(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.ta)f.sa(a)&&(c=!0)}),c&&BT(l)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NQ(t,e,n){const r=Ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ka.get(e),i=s&&s.key;if(i){let o=new It(_e.comparator);o=o.insert(i,Rn.newNoDocument(i,Re.min()));const a=He().add(i),l=new sv(Re.min(),new Map,new It(Ge),o,a);await SL(r,l),r.$a=r.$a.remove(i),r.Ka.delete(e),WT(r)}else await Vw(r.localStore,e,!1).then(()=>Uw(r,e,n)).catch(Yc)}async function OQ(t,e){const n=Ae(t),r=e.batch.batchId;try{const s=await UG(n.localStore,e);CL(n,r,null),bL(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $h(n,s)}catch(s){await Yc(s)}}async function DQ(t,e,n){const r=Ae(t);try{const s=await function(o,a){const l=Ae(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(it(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);CL(r,e,n),bL(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $h(r,s)}catch(s){await Yc(s)}}function bL(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function CL(t,e,n){const r=Ae(t);let s=r.Wa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function Uw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ua.Sr(e).forEach(r=>{t.Ua.containsKey(r)||IL(t,r)})}function IL(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(LT(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ka.delete(n),WT(t))}function KI(t,e,n){for(const r of n)r instanceof EL?(t.Ua.addReference(r.key,e),MQ(t,r)):r instanceof TL?(ue(zT,"Document no longer in limbo: "+r.key),t.Ua.removeReference(r.key,e),t.Ua.containsKey(r.key)||IL(t,r.key)):be()}function MQ(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(ue(zT,"New document in limbo: "+n),t.Qa.add(r),WT(t))}function WT(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new _e(wt.fromString(e)),r=t.za.next();t.Ka.set(r,new SQ(n)),t.$a=t.$a.insert(n,r),mL(t.remoteStore,new io(Os(jM(n.path)),r,"TargetPurposeLimboResolution",Yg.ae))}}async function $h(t,e,n){const r=Ae(t),s=[],i=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{o.push(r.Ha(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=DT.Yi(l.targetId,c);i.push(h)}}))}),await Promise.all(o),r.La.p_(s),await async function(l,c){const d=Ae(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>q.forEach(c,f=>q.forEach(f.Hi,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>q.forEach(f.Ji,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Zc(h))throw h;ue(MT,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ts.get(f),T=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(T);d.Ts=d.Ts.insert(f,v)}}}(r.localStore,i))}async function LQ(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){ue(zT,"User change. New user:",e.toKey());const r=await dL(n.localStore,e);n.currentUser=e,function(i,o){i.Ga.forEach(a=>{a.forEach(l=>{l.reject(new ve(Y.CANCELLED,o))})}),i.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $h(n,r.Rs)}}function VQ(t,e){const n=Ae(t),r=n.Ka.get(e);if(r&&r.Ba)return He().add(r.key);{let s=He();const i=n.qa.get(e);if(!i)return s;for(const o of i){const a=n.ka.get(o);s=s.unionWith(a.view.ba)}return s}}function RL(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=SL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NQ.bind(null,e),e.La.p_=_Q.bind(null,e.eventManager),e.La.Ja=wQ.bind(null,e.eventManager),e}function FQ(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DQ.bind(null,e),e}class Om{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iv(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return jG(this.persistence,new LG,e.initialUser,this.serializer)}Xa(e){return new uL(OT.ri,this.serializer)}Za(e){return new qG}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Om.provider={build:()=>new Om};class jQ extends Om{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){it(this.persistence.referenceDelegate instanceof Pm);const r=this.persistence.referenceDelegate.garbageCollector;return new EG(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new uL(r=>Pm.ri(r,n),this.serializer)}}class $w{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LQ.bind(null,this.syncEngine),await pQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gQ}()}createDatastore(e){const n=iv(e.databaseInfo.databaseId),r=function(i){return new ZG(i)}(e.databaseInfo);return function(i,o,a,l){return new tQ(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new rQ(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>qI(this.syncEngine,n,0),function(){return UI.D()?new UI:new KG}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const h=new bQ(s,i,o,a,l,c);return d&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ae(s);ue($a,"RemoteStore shutting down."),i.W_.add(5),await Uh(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$w.provider={build:()=>new $w};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="FirestoreClient";class $Q{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=TM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ue($o,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ue($o,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$T(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hy(t,e){t.asyncQueue.verifyOperationInProgress(),ue($o,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await dL(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function GI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BQ(t);ue($o,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>BI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>BI(e.remoteStore,s)),t._onlineComponents=e}async function BQ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue($o,"Using user provided OfflineComponentProvider");try{await Hy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Cc("Error using user provided cache. Falling back to memory cache: "+n),await Hy(t,new Om)}}else ue($o,"Using default OfflineComponentProvider"),await Hy(t,new jQ(void 0));return t._offlineComponents}async function AL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue($o,"Using user provided OnlineComponentProvider"),await GI(t,t._uninitializedComponentsProvider._online)):(ue($o,"Using default OnlineComponentProvider"),await GI(t,new $w))),t._onlineComponents}function zQ(t){return AL(t).then(e=>e.syncEngine)}async function WQ(t){const e=await AL(t),n=e.eventManager;return n.onListen=CQ.bind(null,e.syncEngine),n.onUnlisten=AQ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IQ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kQ.bind(null,e.syncEngine),n}function HQ(t,e,n={}){const r=new Eo;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new UQ({next:f=>{d.su(),o.enqueueAndForget(()=>yQ(i,h)),f.fromCache&&l.source==="server"?c.reject(new ve(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new EQ(a,d,{includeMetadataChanges:!0,Ta:!0});return vQ(i,h)}(await WQ(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e,n){if(!n)throw new ve(Y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qQ(t,e,n,r){if(e===!0&&r===!0)throw new ve(Y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YI(t){if(!_e.isDocumentKey(t))throw new ve(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ZI(t){if(_e.isDocumentKey(t))throw new ve(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function Zd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=HT(t);throw new ve(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="firestore.googleapis.com",XI=!0;class JI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NL,this.ssl=XI}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:XI;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_G)throw new ve(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qQ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lv{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Q7;switch(r.type){case"firstParty":return new J7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=QI.get(n);r&&(ue("ComponentProvider","Removing Datastore"),QI.delete(n),r.terminate())}(this),Promise.resolve()}}function KQ(t,e,n,r={}){var s;const i=(t=Zd(t,lv))._getSettings(),o=Object.assign(Object.assign({},i),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i.host!==NL&&i.host!==a&&Cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},i),{host:a,ssl:!1,emulatorOptions:r});if(!Ti(l,o)&&(t._setSettings(l),r.mockUserToken)){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=Cn.MOCK_USER;else{c=EO(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ve(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Cn(h)}t._authCredentials=new Y7(new EM(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cv(this.firestore,e,this._query)}}class Nr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nr(this.firestore,e,this._key)}}class To extends cv{constructor(e,n,r){super(e,n,jM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nr(this.firestore,null,new _e(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function OL(t,e,...n){if(t=Ct(t),PL("collection","path",e),t instanceof lv){const r=wt.fromString(e,...n);return ZI(r),new To(t,null,r)}{if(!(t instanceof Nr||t instanceof To))throw new ve(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wt.fromString(e,...n));return ZI(r),new To(t.firestore,null,r)}}function eR(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=TM.newId()),PL("doc","path",e),t instanceof lv){const r=wt.fromString(e,...n);return YI(r),new Nr(t,null,new _e(r))}{if(!(t instanceof Nr||t instanceof To))throw new ve(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wt.fromString(e,...n));return YI(r),new Nr(t.firestore,t instanceof To?t.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="AsyncQueue";class nR{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new fL(this,"async_queue_retry"),this.bu=()=>{const r=Wy();r&&ue(tR,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const n=Wy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Wy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Eo;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Zc(e))throw e;ue(tR,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw bi("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=UT.createAndSchedule(this,e,n,r,i=>this.Fu(i));return this.fu.push(s),s}Du(){this.gu&&be()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class qT extends lv{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new nR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nR(e),this._firestoreClient=void 0,await e}}}function GQ(t,e){const n=typeof t=="object"?t:Fg(),r=typeof t=="string"?t:Sm,s=Qo(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yO("firestore");i&&KQ(s,...i)}return s}function DL(t){if(t._terminated)throw new ve(Y.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QQ(t),t._firestoreClient}function QQ(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new fK(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kL(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new $Q(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nc(yn.fromBase64String(e))}catch(n){throw new ve(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nc(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ=/^__.*__$/;class ZQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new sl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fh(e,this.data,n,this.fieldTransforms)}}function LL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class YT{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new YT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Dm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(LL(this.Lu)&&YQ.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class XQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iv(e)}ju(e,n,r,s=!1){return new YT({Lu:e,methodName:n,zu:r,path:fn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JQ(t){const e=t._freezeSettings(),n=iv(t._databaseId);return new XQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eY(t,e,n,r,s,i={}){const o=t.ju(i.merge||i.mergeFields?2:0,e,n,s);UL("Data must be an object, but it was:",o,r);const a=FL(r,o);let l,c;if(i.merge)l=new ts(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=tY(e,h,n);if(!o.contains(f))throw new ve(Y.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);rY(d,f)||d.push(f)}l=new ts(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new ZQ(new Cr(a),l,c)}function VL(t,e){if(jL(t=Ct(t)))return UL("Unsupported field value:",e,t),FL(t,e);if(t instanceof ML)return function(r,s){if(!LL(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=VL(a,s.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VK(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qt.fromDate(r);return{timestampValue:km(s.serializer,i)}}if(r instanceof Qt){const i=new Qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:km(s.serializer,i)}}if(r instanceof GT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nc)return{bytesValue:nL(s.serializer,r._byteString)};if(r instanceof Nr){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:PT(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof QT)return function(o,a){return{mapValue:{fields:{[kM]:{stringValue:PM},[bm]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return RT(a.serializer,c)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${HT(r)}`)}(t,e)}function FL(t,e){const n={};return SM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nl(t,(r,s)=>{const i=VL(s,e.qu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function jL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qt||t instanceof GT||t instanceof Nc||t instanceof Nr||t instanceof ML||t instanceof QT)}function UL(t,e,n){if(!jL(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=HT(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function tY(t,e,n){if((e=Ct(e))instanceof KT)return e._internalPath;if(typeof e=="string")return $L(t,e);throw Dm("Field path arguments must be of type string or ",t,!1,void 0,n)}const nY=new RegExp("[~\\*/\\[\\]]");function $L(t,e,n){if(e.search(nY)>=0)throw Dm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new KT(...e.split("."))._internalPath}catch{throw Dm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ve(Y.INVALID_ARGUMENT,a+t+l)}function rY(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zL("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sY extends BL{data(){return super.data()}}function zL(t,e){return typeof e=="string"?$L(t,e):e instanceof KT?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oY{convertValue(e,n="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return nl(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[bm].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Dt(o.doubleValue));return new QT(i)}convertGeoPoint(e){return new GT(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qd(e));default:return null}}convertTimestamp(e){const n=Vo(e);return new Qt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=wt.fromString(e);it(lL(r));const s=new Kd(r.get(1),r.get(3)),i=new _e(r.popFirst(5));return s.isEqual(n)||bi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aY(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lY extends BL{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zL("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class vp extends lY{data(e={}){return super.data(e)}}class cY{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vp(this._firestore,this._userDataWriter,r.key,r,new Wf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new vp(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Wf(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new vp(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Wf(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:uY(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function uY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}class dY extends oY{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,n)}}function WL(t){t=Zd(t,cv);const e=Zd(t.firestore,qT),n=DL(e),r=new dY(e);return iY(t._query),HQ(n,t._query).then(s=>new cY(e,r,t,s))}function rR(t,e,n){t=Zd(t,Nr);const r=Zd(t.firestore,qT),s=aY(t.converter,e);return hY(r,[eY(JQ(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pi.none())])}function hY(t,e){return function(r,s){const i=new Eo;return r.asyncQueue.enqueueAndForget(async()=>PQ(await zQ(r),s,i)),i.promise}(DL(t),e)}(function(e,n=!0){(function(s){Qc=s})(Ja),us(new Mr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new qT(new Z7(r.getProvider("auth-internal")),new eK(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ve(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kd(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nr(lI,cI,e),nr(lI,cI,"esm2017")})();function HL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fY=HL,qL=new Xa("auth","Firebase",HL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=new Ph("@firebase/auth");function pY(t,...e){Mm.logLevel<=$e.WARN&&Mm.warn(`Auth (${Ja}): ${t}`,...e)}function yp(t,...e){Mm.logLevel<=$e.ERROR&&Mm.error(`Auth (${Ja}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t,...e){throw ZT(t,...e)}function Ms(t,...e){return ZT(t,...e)}function KL(t,e,n){const r=Object.assign(Object.assign({},fY()),{[e]:n});return new Xa("auth","Firebase",r).create(e,{appName:t.name})}function mi(t){return KL(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qL.create(t,...e)}function we(t,e,...n){if(!t)throw ZT(e,...n)}function ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yp(e),new Error(e)}function Ii(t,e){t||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mY(){return sR()==="http:"||sR()==="https:"}function sR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mY()||TO()||"connection"in navigator)?navigator.onLine:!0}function vY(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ii(n>e,"Short delay should be less than long delay!"),this.isMobile=OE()||xO()}get(){return gY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e){Ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=new Bh(3e4,6e4);function Yo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zo(t,e,n,r,s={}){return QL(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Hc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return Hz()||(c.referrerPolicy="no-referrer"),GL.fetch()(YL(t,t.config.apiHost,n,a),c)})}async function QL(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},yY),e);try{const s=new EY(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Hf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hf(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw KL(t,d,c);ds(t,d)}}catch(s){if(s instanceof ms)throw s;ds(t,"network-request-failed",{message:String(s)})}}async function zh(t,e,n,r,s={}){const i=await Zo(t,e,n,r,s);return"mfaPendingCredential"in i&&ds(t,"multi-factor-auth-required",{_serverResponse:i}),i}function YL(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?XT(t.config,s):`${t.config.apiScheme}://${s}`}function wY(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EY{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ms(this.auth,"network-request-failed")),_Y.get())})}}function Hf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ms(t,e,r);return s.customData._tokenResponse=n,s}function iR(t){return t!==void 0&&t.enterprise!==void 0}class TY{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return wY(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xY(t,e){return Zo(t,"GET","/v2/recaptchaConfig",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SY(t,e){return Zo(t,"POST","/v1/accounts:delete",e)}async function ZL(t,e){return Zo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bY(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),s=JT(r);we(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ld(qy(s.auth_time)),issuedAtTime:ld(qy(s.iat)),expirationTime:ld(qy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function qy(t){return Number(t)*1e3}function JT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yp("JWT malformed, contained fewer than 3 sections"),null;try{const s=sm(n);return s?JSON.parse(s):(yp("Failed to decode base64 JWT payload"),null)}catch(s){return yp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oR(t){const e=JT(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ms&&CY(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function CY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ld(this.lastLoginAt),this.creationTime=ld(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Xd(t,ZL(n,{idToken:r}));we(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?XL(i.providerUserInfo):[],a=AY(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new zw(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function RY(t){const e=Ct(t);await Lm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AY(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function XL(t){return t.map(e=>{var{providerId:n}=e,r=Ah(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kY(t,e){const n=await QL(t,{},async()=>{const r=Hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=YL(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",GL.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PY(t,e){return Zo(t,"POST","/v2/accounts:revokeToken",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=oR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await kY(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Zl;return r&&(we(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(we(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(we(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zl,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Ah(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new IY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new zw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Xd(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bY(this,e)}reload(){return RY(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Lm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(mi(this.auth));const e=await this.getIdToken();return await Xd(this,SY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:O,isAnonymous:D,providerData:L,stsTokenManager:I}=n;we(S&&I,e,"internal-error");const b=Zl.fromJSON(this.name,I);we(typeof S=="string",e,"internal-error"),Fi(h,e.name),Fi(f,e.name),we(typeof O=="boolean",e,"internal-error"),we(typeof D=="boolean",e,"internal-error"),Fi(m,e.name),Fi(T,e.name),Fi(v,e.name),Fi(x,e.name),Fi(E,e.name),Fi(_,e.name);const C=new ui({uid:S,auth:e,email:f,emailVerified:O,displayName:h,isAnonymous:D,photoURL:T,phoneNumber:m,tenantId:v,stsTokenManager:b,createdAt:E,lastLoginAt:_});return L&&Array.isArray(L)&&(C.providerData=L.map(A=>Object.assign({},A))),x&&(C._redirectEventId=x),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Zl;s.updateFromServerResponse(n);const i=new ui({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Lm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];we(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?XL(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Zl;a.updateFromIdToken(r);const l=new ui({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new zw(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Map;function di(t){Ii(t instanceof Function,"Expected a class definition");let e=aR.get(t);return e?(Ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JL.type="NONE";const lR=JL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t,e,n){return`firebase:${t}:${e}:${n}`}class Xl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=_p(this.userKey,s.apiKey,i),this.fullPersistenceKey=_p("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xl(di(lR),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||di(lR);const o=_p(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=ui._fromJSON(e,d);c!==i&&(a=h),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Xl(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Xl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(r2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i2(e))return"Blackberry";if(o2(e))return"Webos";if(t2(e))return"Safari";if((e.includes("chrome/")||n2(e))&&!e.includes("edge/"))return"Chrome";if(s2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function e2(t=Pn()){return/firefox\//i.test(t)}function t2(t=Pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n2(t=Pn()){return/crios\//i.test(t)}function r2(t=Pn()){return/iemobile/i.test(t)}function s2(t=Pn()){return/android/i.test(t)}function i2(t=Pn()){return/blackberry/i.test(t)}function o2(t=Pn()){return/webos/i.test(t)}function ex(t=Pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NY(t=Pn()){var e;return ex(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OY(){return qz()&&document.documentMode===10}function a2(t=Pn()){return ex(t)||s2(t)||o2(t)||i2(t)||/windows phone/i.test(t)||r2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t,e=[]){let n;switch(t){case"Browser":n=cR(Pn());break;case"Worker":n=`${cR(Pn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MY(t,e={}){return Zo(t,"GET","/v2/passwordPolicy",Yo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY=6;class VY{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LY,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uR(this),this.idTokenSubscription=new uR(this),this.beforeStateQueue=new DY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Xl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ZL(this,{idToken:e}),r=await ui._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(lr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Lm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(mi(this));const n=e?Ct(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MY(this),n=new VY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PY(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Xl.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pY(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ol(t){return Ct(t)}class uR{constructor(e){this.auth=e,this.observer=null,this.addObserver=n6(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jY(t){uv=t}function c2(t){return uv.loadJS(t)}function UY(){return uv.recaptchaEnterpriseScript}function $Y(){return uv.gapiScript}function BY(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zY{constructor(){this.enterprise=new WY}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class WY{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const HY="recaptcha-enterprise",u2="NO_RECAPTCHA";class qY{constructor(e){this.type=HY,this.auth=ol(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{xY(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new TY(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;iR(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(u2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zY().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&iR(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=UY();l.length!==0&&(l+=a),c2(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function dR(t,e,n,r=!1,s=!1){const i=new qY(t);let o;if(s)o=u2;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ww(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await dR(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await dR(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KY(t,e){const n=Qo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ti(i,e??{}))return s;ds(s,"already-initialized")}return n.initialize({options:e})}function GY(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function QY(t,e,n){const r=ol(t);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=d2(e),{host:o,port:a}=YY(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(Ti(c,r.config.emulator)&&Ti(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ZY()}function d2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YY(t){const e=d2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:hR(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:hR(o)}}}function hR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ZY(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,n){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function XY(t,e){return Zo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JY(t,e){return zh(t,"POST","/v1/accounts:signInWithPassword",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eZ(t,e){return zh(t,"POST","/v1/accounts:signInWithEmailLink",Yo(t,e))}async function tZ(t,e){return zh(t,"POST","/v1/accounts:signInWithEmailLink",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends tx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ww(e,n,"signInWithPassword",JY);case"emailLink":return eZ(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ww(e,r,"signUpPassword",XY);case"emailLink":return tZ(e,{idToken:n,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t,e){return zh(t,"POST","/v1/accounts:signInWithIdp",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ="http://localhost";class Ba extends tx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ds("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Ah(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ba(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Jl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Jl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jl(e,n)}buildRequest(){const e={requestUri:nZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sZ(t){const e=Ou(Du(t)).link,n=e?Ou(Du(e)).deep_link_id:null,r=Ou(Du(t)).deep_link_id;return(r?Ou(Du(r)).link:null)||r||n||e||t}class nx{constructor(e){var n,r,s,i,o,a;const l=Ou(Du(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=rZ((s=l.mode)!==null&&s!==void 0?s:null);we(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=sZ(e);try{return new nx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this.providerId=Jc.PROVIDER_ID}static credential(e,n){return Jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nx.parseLink(n);return we(r,"argument-error"),Jd._fromEmailAndCode(e,r.code,r.tenantId)}}Jc.PROVIDER_ID="password";Jc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends h2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Wh{constructor(){super("facebook.com")}static credential(e){return Ba._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Wh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ba._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qi.credential(n,r)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Wh{constructor(){super("github.com")}static credential(e){return Ba._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Wh{constructor(){super("twitter.com")}static credential(e,n){return Ba._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gi.credential(n,r)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iZ(t,e){return zh(t,"POST","/v1/accounts:signUp",Yo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ui._fromIdTokenResponse(e,r,s),o=fR(r);return new za({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=fR(r);return new za({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function fR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm extends ms{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vm(e,n,r,s)}}function f2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Vm._fromErrorAndOperation(t,i,e,r):i})}async function oZ(t,e,n=!1){const r=await Xd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return za._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aZ(t,e,n=!1){const{auth:r}=t;if(lr(r.app))return Promise.reject(mi(r));const s="reauthenticate";try{const i=await Xd(t,f2(r,s,e,t),n);we(i.idToken,r,"internal-error");const o=JT(i.idToken);we(o,r,"internal-error");const{sub:a}=o;return we(t.uid===a,r,"user-mismatch"),za._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ds(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e,n=!1){if(lr(t.app))return Promise.reject(mi(t));const r="signIn",s=await f2(t,r,e),i=await za._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function lZ(t,e){return p2(ol(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(t){const e=ol(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cZ(t,e,n){if(lr(t.app))return Promise.reject(mi(t));const r=ol(t),o=await Ww(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iZ).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&m2(t),l}),a=await za._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function uZ(t,e,n){return lr(t.app)?Promise.reject(mi(t)):lZ(Ct(t),Jc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&m2(t),r})}function dZ(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function hZ(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function fZ(t,e,n,r){return Ct(t).onAuthStateChanged(e,n,r)}function pZ(t){return Ct(t).signOut()}const Fm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fm,"1"),this.storage.removeItem(Fm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mZ=1e3,gZ=10;class v2 extends g2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);OY()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,gZ):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}v2.type="LOCAL";const vZ=v2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2 extends g2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}y2.type="SESSION";const _2=y2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yZ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new dv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await yZ(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=rx("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(){return window}function wZ(t){Ls().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(){return typeof Ls().WorkerGlobalScope<"u"&&typeof Ls().importScripts=="function"}async function EZ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TZ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xZ(){return w2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="firebaseLocalStorageDb",SZ=1,jm="firebaseLocalStorage",T2="fbase_key";class Hh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hv(t,e){return t.transaction([jm],e?"readwrite":"readonly").objectStore(jm)}function bZ(){const t=indexedDB.deleteDatabase(E2);return new Hh(t).toPromise()}function Hw(){const t=indexedDB.open(E2,SZ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jm,{keyPath:T2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jm)?e(r):(r.close(),await bZ(),e(await Hw()))})})}async function pR(t,e,n){const r=hv(t,!0).put({[T2]:e,value:n});return new Hh(r).toPromise()}async function CZ(t,e){const n=hv(t,!1).get(e),r=await new Hh(n).toPromise();return r===void 0?null:r.value}function mR(t,e){const n=hv(t,!0).delete(e);return new Hh(n).toPromise()}const IZ=800,RZ=3;class x2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>RZ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return w2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dv._getInstance(xZ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await EZ(),!this.activeServiceWorker)return;this.sender=new _Z(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hw();return await pR(e,Fm,"1"),await mR(e,Fm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pR(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CZ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=hv(s,!1).getAll();return new Hh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x2.type="LOCAL";const AZ=x2;new Bh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kZ(t,e){return e?di(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends tx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PZ(t){return p2(t.auth,new sx(t),t.bypassAuthState)}function NZ(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),aZ(n,new sx(t),t.bypassAuthState)}async function OZ(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),oZ(n,new sx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PZ;case"linkViaPopup":case"linkViaRedirect":return OZ;case"reauthViaPopup":case"reauthViaRedirect":return NZ;default:ds(this.auth,"internal-error")}}resolve(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DZ=new Bh(2e3,1e4);class Ll extends S2{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ii(this.filter.length===1,"Popup operations only handle one event");const e=rx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DZ.get())};e()}}Ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MZ="pendingRedirect",wp=new Map;class LZ extends S2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wp.get(this.auth._key());if(!e){try{const r=await VZ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wp.set(this.auth._key(),e)}return this.bypassAuthState||wp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VZ(t,e){const n=UZ(e),r=jZ(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function FZ(t,e){wp.set(t._key(),e)}function jZ(t){return di(t._redirectPersistence)}function UZ(t){return _p(MZ,t.config.apiKey,t.name)}async function $Z(t,e,n=!1){if(lr(t.app))return Promise.reject(mi(t));const r=ol(t),s=kZ(r,e),o=await new LZ(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BZ=10*60*1e3;class zZ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WZ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!b2(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ms(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BZ&&this.cachedEventUids.clear(),this.cachedEventUids.has(gR(e))}saveEventToCache(e){this.cachedEventUids.add(gR(e)),this.lastProcessedEventTime=Date.now()}}function gR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WZ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HZ(t,e={}){return Zo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qZ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KZ=/^https?/;async function GZ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await HZ(t);for(const n of e)try{if(QZ(n))return}catch{}ds(t,"unauthorized-domain")}function QZ(t){const e=Bw(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!KZ.test(n))return!1;if(qZ.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YZ=new Bh(3e4,6e4);function vR(){const t=Ls().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ZZ(t){return new Promise((e,n)=>{var r,s,i;function o(){vR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vR(),n(Ms(t,"network-request-failed"))},timeout:YZ.get()})}if(!((s=(r=Ls().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ls().gapi)===null||i===void 0)&&i.load)o();else{const a=BY("iframefcb");return Ls()[a]=()=>{gapi.load?o():n(Ms(t,"network-request-failed"))},c2(`${$Y()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ep=null,e})}let Ep=null;function XZ(t){return Ep=Ep||ZZ(t),Ep}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JZ=new Bh(5e3,15e3),eX="__/auth/iframe",tX="emulator/auth/iframe",nX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sX(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?XT(e,tX):`https://${t.config.authDomain}/${eX}`,r={apiKey:e.apiKey,appName:t.name,v:Ja},s=rX.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Hc(r).slice(1)}`}async function iX(t){const e=await XZ(t),n=Ls().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:sX(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nX,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ms(t,"network-request-failed"),a=Ls().setTimeout(()=>{i(o)},JZ.get());function l(){Ls().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aX=500,lX=600,cX="_blank",uX="http://localhost";class yR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dX(t,e,n,r=aX,s=lX){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},oX),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Pn().toLowerCase();n&&(a=n2(c)?cX:n),e2(c)&&(e=e||uX,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[m,T])=>`${f}${m}=${T},`,"");if(NY(c)&&a!=="_self")return hX(e||"",a),new yR(null);const h=window.open(e||"",a,d);we(h,t,"popup-blocked");try{h.focus()}catch{}return new yR(h)}function hX(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fX="__/auth/handler",pX="emulator/auth/handler",mX=encodeURIComponent("fac");async function _R(t,e,n,r,s,i){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ja,eventId:s};if(e instanceof h2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",lw(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Wh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${mX}=${encodeURIComponent(l)}`:"";return`${gX(t)}?${Hc(a).slice(1)}${c}`}function gX({config:t}){return t.emulator?XT(t,pX):`https://${t.authDomain}/${fX}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="webStorageSupport";class vX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_2,this._completeRedirectFn=$Z,this._overrideRedirectResult=FZ}async _openPopup(e,n,r,s){var i;Ii((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await _R(e,n,r,Bw(),s);return dX(e,o,rx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await _R(e,n,r,Bw(),s);return wZ(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ii(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iX(e),r=new zZ(e);return n.register("authEvent",s=>(we(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ky,{type:Ky},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ky];o!==void 0&&n(!!o),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GZ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a2()||t2()||ex()}}const yX=vX;var wR="@firebase/auth",ER="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wX(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EX(t){us(new Mr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l2(t)},c=new FY(r,s,i,l);return GY(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),us(new Mr("auth-internal",e=>{const n=ol(e.getProvider("auth").getImmediate());return(r=>new _X(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(wR,ER,wX(t)),nr(wR,ER,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TX=5*60,xX=wO("authIdTokenMaxAge")||TX;let TR=null;const SX=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xX)return;const s=n==null?void 0:n.token;TR!==s&&(TR=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bX(t=Fg()){const e=Qo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=KY(t,{popupRedirectResolver:yX,persistence:[AZ,vZ,_2]}),r=wO("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=SX(i.toString());hZ(n,o,()=>o(n.currentUser)),dZ(n,a=>o(a))}}const s=vO("auth");return s&&QY(n,`http://${s}`),n}function CX(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jY({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ms("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",CX().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EX("Browser");const IX={apiKey:"AIzaSyDXhZZGO7CtrbTUvamgJmmJ_2v3yWYUmfg",authDomain:"menuchat-a215e.firebaseapp.com",databaseURL:"https://menuchat-a215e-default-rtdb.firebaseio.com",projectId:"menuchat-a215e",storageBucket:"menuchat-a215e.firebasestorage.app",messagingSenderId:"1002439982066",appId:"1:1002439982066:web:1a351f64ca5cbdadd8896b",measurementId:"G-RJP6BSXYGD"},jn=kO(IX);H7(jn);const Um=GQ(jn),en=bX(jn);ur(jn);const RX=Da,AX=ko,kX=Po,PX=No,NX=IE;function OX({open:t,onOpenChange:e,items:n}){const{clearCart:r}=wE(),[s,i]=y.useState(!1),[o,a]=y.useState({}),[l,c]=y.useState({}),[d,h]=y.useState([]),{toast:f}=jc(),[m,T]=y.useState(!1),[v,x]=y.useState({regiao:"Serra Grande",bairro:"",rua:"",numero:"",complemento:"",observacao:""}),E="(A negociar)",_=N=>{var k;return N.incrementavel?Array(N.quantidade).fill({...N,quantidade:1}):N.quantidade<=1||!((k=N.opcoes)!=null&&k.length)?[N]:Array(N.quantidade).fill({...N,quantidade:1})};y.useEffect(()=>{(async()=>{const k=ur(),R=en.currentUser;if(!R){console.error("Usurio no autenticado");return}try{const F=Ar(k,`users/${R.uid}/acrescimos`),G=await wm(F);if(G.exists()){const K=G.val(),Q=Object.entries(K).map(([U,B])=>({id:U,...B}));h(Q)}}catch(F){console.error("Erro ao buscar acrscimos:",F),f({title:"Erro ao carregar acrscimos",description:"No foi possvel carregar a lista de acrscimos.",variant:"destructive"})}})()},[f]);const S=(N,k)=>{const R=k!==void 0?`${N.nome}-${k}`:N.nome,G=(o[R]||[]).reduce((U,B)=>{const ee=d.find(pe=>pe.nome===B.nome);return ee?U+ee.valor*B.quantidade:U},0),K=k!==void 0?1:N.quantidade;return(Number(N.valor)+G)*K},O=n.reduce((N,k)=>{const R=_(k);return N+R.reduce((F,G,K)=>F+S(G,K),0)},0),D=(N,k)=>{a(R=>{const F=R[N]||[];return F.find(K=>K.nome===k.nome)?(console.log(F),{...R,[N]:F.map(K=>K.nome===k.nome?{...K,quantidade:K.quantidade+1}:K)}):{...R,[N]:[...F,{nome:k.nome,quantidade:1}]}})},L=(N,k)=>{a(R=>{const G=(R[N]||[]).map(K=>K.nome===k?{...K,quantidade:Math.max(0,K.quantidade-1)}:K).filter(K=>K.quantidade>0);return{...R,[N]:G}})},I=(N,k)=>{c(R=>({...R,[N]:k}))},b=()=>{i(!0);try{const N=new Date().getHours();let k="Boa noite";N>=5&&N<12?k="Bom dia":N>=12&&N<18&&(k="Boa tarde");const R=`*${k}! Gostaria de fazer o seguinte pedido:*

${n.flatMap(G=>_(G).map((Q,U)=>{const B=S(Q,U);let ee=`${Q.quantidade}x --- ${Q.nome} - ${Number(Q.valor).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}`;const pe=o[`${G.nome}-${U}`]||[];if(pe.length>0){const le=pe.map(he=>{const ye=d.find(rt=>rt.nome===he.nome),qe=(ye==null?void 0:ye.valor)||0;return` + ${he.quantidade}x -- ${he.nome} - ${(qe*he.quantidade).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}`}).join(`
`);ee+=`
`+le}return ee})).join(`
`)}

*Total do pedido:* ${O.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}
----------------------------------------------
*Local de Entrega*
Regio: ${v.regiao||"No informada"}
Bairro: ${v.bairro}
Rua: ${v.rua}
Nmero: ${v.numero}
Complemento: ${v.complemento}
Observao: ${v.observacao}

*Valor da entrega:* ${E}
----------------------------------------------
*Valor Total:* ${O.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})} + Entrega`,F=encodeURIComponent(R);window.open(`https://wa.me/557399537643?text=${F}`,"_blank"),f({title:"Pedido enviado com sucesso!",description:"Seu pedido foi enviado para o WhatsApp."}),e(!1)}catch{f({title:"Erro ao enviar pedido",description:"Tente novamente mais tarde.",variant:"destructive"})}finally{i(!1)}},C=N=>{N.preventDefault(),T(!1),b()},A=()=>{a({})};return y.useEffect(()=>{n.length===0&&A()},[n.length]),p.jsxs(p.Fragment,{children:[p.jsx(Da,{open:t,onOpenChange:e,children:p.jsxs(ko,{className:"sm:max-w-md",children:[p.jsx(Po,{children:p.jsx(No,{children:"Resumo do Pedido"})}),p.jsx(dO,{className:"max-h-[60vh]",children:p.jsx("div",{className:"space-y-4 py-4",children:n.flatMap((N,k)=>{const R=_(N);return R.map((F,G)=>{var K;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"font-medium",children:[F.quantidade,"x ",F.nome,R.length>1&&` (${G+1}/${R.length})`]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:F.descricao})]}),p.jsx("p",{className:"font-medium",children:S(F,G).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),F.opcoes&&F.opcoes.length>0&&p.jsxs("select",{className:"w-full p-2 border rounded-md",value:l[`${F.nome}-${G}`]||"",onChange:Q=>I(`${F.nome}-${G}`,Q.target.value),children:[p.jsx("option",{value:"",children:"Selecione uma opo"}),F.opcoes.map(Q=>p.jsx("option",{value:Q,children:Q},Q))]}),d.length>0&&F.incrementavel&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(RX,{children:[p.jsx(NX,{asChild:!0,children:p.jsx(Pt,{variant:"outline",size:"sm",children:"Adicionar Acrscimos"})}),p.jsxs(AX,{className:"sm:max-w-[425px]",children:[p.jsx(kX,{children:p.jsx(PX,{children:"Acrscimos Disponveis"})}),p.jsx("div",{className:"h-[300px] overflow-y-auto overscroll-contain",onWheel:Q=>{Q.stopPropagation();const U=Q.currentTarget;U.scrollTop+=Q.deltaY},children:p.jsx("div",{className:"space-y-4",children:d.map(Q=>{var B,ee;const U=((ee=(B=o[`${N.nome}-${G}`])==null?void 0:B.find(pe=>pe.nome===Q.nome))==null?void 0:ee.quantidade)||0;return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{children:Q.nome}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Pt,{variant:"outline",size:"sm",onClick:()=>L(`${N.nome}-${G}`,Q.nome),disabled:U===0,children:p.jsx(LP,{className:"h-4 w-4"})}),p.jsx("span",{children:U}),p.jsx(Pt,{variant:"outline",size:"sm",onClick:()=>D(`${N.nome}-${G}`,Q),children:p.jsx(wg,{className:"h-4 w-4"})})]})]},Q.nome)})})})]})]}),((K=o[`${N.nome}-${G}`])==null?void 0:K.length)>0&&p.jsx("div",{className:"text-sm text-muted-foreground",children:o[`${N.nome}-${G}`].map(Q=>p.jsxs("div",{children:[Q.nome," x",Q.quantidade]},Q.nome))})]})]},`${F.nome}-${G}`)})})})}),p.jsxs("div",{className:"mt-6",children:[p.jsx(ZN,{}),p.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[p.jsx("span",{className:"font-medium",children:"Total:"}),p.jsx("span",{className:"font-medium",children:O.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),p.jsx(Pt,{className:"w-full mt-4 bg-neutral-900 hover:bg-neutral-800",onClick:()=>T(!0),disabled:s,children:"Enviar Pedido"})]})]})}),p.jsx(Da,{open:m,onOpenChange:T,children:p.jsxs(ko,{className:"sm:max-w-md",children:[p.jsx(Po,{children:p.jsx(No,{children:"Informe sua localizao"})}),p.jsxs("form",{onSubmit:C,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"regiao",className:"text-sm font-medium",children:"Regio"}),p.jsxs("select",{id:"regiao",className:"w-full p-2 border rounded-md",value:v.regiao,onChange:N=>x(k=>({...k,regiao:N.target.value})),required:!0,children:[p.jsx("option",{value:"Serra Grande",children:"Serra Grande"}),p.jsx("option",{value:"Sargi",children:"Sargi"}),p.jsx("option",{value:"Vila Badu",children:"Vila Badu"}),p.jsx("option",{value:"Ecovila 1",children:"Ecovila 1"}),p.jsx("option",{value:"Ecovila 2 antes",children:"Ecovila 2 antes da antiga associao"}),p.jsx("option",{value:"Ecovila 2 depois",children:"Ecovila 2 depois da antiga associao"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"bairro",className:"text-sm font-medium",children:"Bairro"}),p.jsx("input",{id:"bairro",className:"w-full p-2 border rounded-md",value:v.bairro,onChange:N=>x(k=>({...k,bairro:N.target.value})),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"rua",className:"text-sm font-medium",children:"Rua"}),p.jsx("input",{id:"rua",className:"w-full p-2 border rounded-md",value:v.rua,onChange:N=>x(k=>({...k,rua:N.target.value})),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"numero",className:"text-sm font-medium",children:"Nmero"}),p.jsx("input",{id:"numero",className:"w-full p-2 border rounded-md",value:v.numero,onChange:N=>x(k=>({...k,numero:N.target.value})),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"complemento",className:"text-sm font-medium",children:"Complemento"}),p.jsx("input",{id:"complemento",className:"w-full p-2 border rounded-md",value:v.complemento,onChange:N=>x(k=>({...k,complemento:N.target.value})),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"observacao",className:"text-sm font-medium",children:"Observao"}),p.jsx("textarea",{id:"observacao",className:"w-full p-2 border rounded-md",value:v.observacao,onChange:N=>x(k=>({...k,observacao:N.target.value})),required:!0,rows:3})]}),p.jsx(Pt,{type:"submit",className:"w-full",children:"Confirmar Pedido"})]})]})})]})}const DX=()=>{const t=Rh(),[e,n]=y.useState(""),[r,s]=y.useState(!1),[i,o]=y.useState([]),[a,l]=y.useState(null),[c,d]=y.useState(null),{items:h,clearCart:f}=wE(),[m,T]=y.useState({nome:"",tiposProdutos:["hamburguer","bebida","porcao","sobremesa"],produtos:[]}),v=h.reduce((D,L)=>D+L.quantidade,0),[x,E]=y.useState(!1);y.useEffect(()=>{const D=t.pathname.split("/"),L=D[D.length-1]||D[D.length-2]||"";n(L)},[t]),y.useEffect(()=>{e&&(async()=>{try{const L=OL(Um,"estabelecimento"),C=(await WL(L)).docs.map(A=>({id:A.id,...A.data()})).find(A=>A.rota===e);C&&(d({imageUrl:C.imageUrl,userId:C.userId}),T({nome:C.nome,tiposProdutos:["hamburguer","bebida","porcao","sobremesa"],produtos:[]}),O(C.userId))}catch(L){console.error("Error fetching estabelecimento data:",L)}})()},[e]),y.useEffect(()=>{const D=()=>{E(window.scrollY>100)};return window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)},[]);const _=()=>{window.scrollTo({top:0,behavior:"smooth"})},S=()=>{f(),s(!1)},O=async D=>{const L=ur(jn),I=Ar(L,`users/${D}/produtos`),b=await wm(I);if(b.exists()){const C=Object.entries(b.val()).map(([A,N])=>({id:A,...N})).filter(A=>!A.block);T(A=>({...A,produtos:C}))}else console.log("Nenhum dado encontrado")};return p.jsxs("div",{className:"min-h-screen flex flex-col",children:[p.jsx("header",{className:"p-4 backdrop-blur-sm sticky top-0 z-10",style:{backgroundImage:'linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("/background.jpg")',backgroundRepeat:"repeat",backgroundSize:"auto"},children:p.jsx("div",{className:"max-w-5xl mx-auto flex justify-between items-center",children:p.jsxs("div",{className:"flex items-center gap-3",children:[(c==null?void 0:c.imageUrl)&&p.jsx("img",{src:c.imageUrl,alt:"Profile",className:"w-14 h-14 rounded-full object-cover border-3 border-white shadow-lg shadow-[rgba(0,_0,_0,_0.4)_0px_30px_90px]"}),p.jsx("h1",{className:"text-2xl font-bold text-white text-center font-lobster-two drop-shadow-lg",children:m.nome})]})})}),p.jsx("main",{className:"flex-1 p-4",children:p.jsx("div",{className:"max-w-5xl mx-auto",children:p.jsx(h3,{menuData:m})})}),p.jsx("footer",{className:"border-t p-4 bg-white/80 backdrop-blur-sm sticky bottom-0",children:p.jsxs("div",{className:"max-w-5xl mx-auto flex gap-2",children:[v>0&&p.jsx(Pt,{variant:"outline",size:"lg",onClick:S,className:"w-1/4 hover:bg-neutral-100",children:"Limpar"}),p.jsxs(Pt,{className:v>0?"w-3/4 bg-neutral-900 hover:bg-neutral-800":"w-full bg-neutral-900 hover:bg-neutral-800",size:"lg",onClick:()=>s(!0),disabled:v===0,children:[p.jsx(MU,{className:"mr-2 h-5 w-5"}),"Ver Pedido",v>0&&p.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-white text-black rounded-full",children:v})]})]})}),p.jsx(OX,{open:r,onOpenChange:s,items:h}),x&&p.jsx("button",{onClick:_,className:"fixed bottom-24 right-4 z-10 p-3 rounded-full bg-neutral-900 text-white shadow-lg hover:bg-neutral-800 transition-all","aria-label":"Voltar ao topo",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]})},MX=()=>{const t=Rh();return y.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),p.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),p.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},dr=y.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:De("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));dr.displayName="Input";var LX="Label",C2=y.forwardRef((t,e)=>p.jsx(Ce.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));C2.displayName=LX;var I2=C2;const VX=eE("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Vl=y.forwardRef(({className:t,...e},n)=>p.jsx(I2,{ref:n,className:De(VX(),t),...e}));Vl.displayName=I2.displayName;function FX({onImageSelected:t}){const[e,n]=y.useState(""),[r,s]=y.useState(null),i=y.useRef(null),o=async l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];if(c){if(!c.type.startsWith("image/")){alert("Por favor, selecione apenas arquivos de imagem.");return}const h=URL.createObjectURL(c);n(h),s(c),t(c)}},a=()=>{var l;(l=i.current)==null||l.click()};return y.useEffect(()=>()=>{e&&URL.revokeObjectURL(e)},[e]),p.jsxs("div",{className:"flex flex-col items-center",children:[p.jsx("input",{type:"file",ref:i,onChange:o,accept:"image/*",className:"hidden"}),p.jsxs("div",{className:"relative group",children:[p.jsx("button",{onClick:a,className:"w-32 h-32 rounded-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 relative overflow-hidden",children:e?p.jsxs("div",{className:"relative w-full h-full",children:[p.jsx("img",{src:e,alt:"Foto de perfil",className:"w-full h-full object-cover absolute inset-0"}),p.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 hover:opacity-100 transition-opacity"})]}):p.jsx(DU,{className:"w-16 h-16 text-gray-400"})}),p.jsx("span",{className:"absolute -bottom-7 left-1/2 -translate-x-1/2 text-sm text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Escolher imagem"})]})]})}function jX({user:t}){const[e,n]=y.useState({companyName:"",email:"",password:"",path:"",imageUrl:""}),[r,s]=y.useState(!1),i=()=>{s(!r)},o=()=>{!e.email||!e.password||cZ(en,e.email,e.password).then(h=>{const f=h.user;return console.log(f),rR(eR(Um,"estabelecimento",f.uid),{nome:e.companyName,rota:e.path,userId:f.uid,imageUrl:""})}).then(()=>{if(e.imageUrl){const h=new FormData;return h.append("file",e.imageUrl),h.append("upload_preset","menuchat"),fetch("https://api.cloudinary.com/v1_1/dgjfqqqfn/image/upload",{method:"POST",body:h}).then(f=>f.json()).then(f=>rR(eR(Um,"estabelecimento",en.currentUser.uid),{nome:e.companyName,rota:e.path,userId:en.currentUser.uid,imageUrl:f.secure_url}))}}).then(()=>{console.log("Estabelecimento criado com sucesso"),py.success("Conta criada com sucesso!")}).catch(h=>{console.log(h),h.code==="auth/email-already-in-use"?py.error("Este email j est em uso. Por favor, use outro email ou faa login."):py.error("Ocorreu um erro ao criar a conta. Tente novamente.")})},a=()=>{!e.email||!e.password||uZ(en,e.email,e.password).then(h=>{const f=h.user;console.log(f)}).catch(h=>{console.log(h)})},l=h=>{const{name:f,value:m}=h.target;n(T=>({...T,[f]:m}))},c=h=>{h.preventDefault(),console.log(e)},d=h=>{n(f=>({...f,imageUrl:h}))};return t?p.jsx(Q1,{to:"/painel"}):p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:p.jsxs(yE,{className:"w-full max-w-md",children:[p.jsx(gN,{children:p.jsx(vN,{className:"text-2xl font-bold text-center",children:r?"Criar Nova Conta":"Entrar"})}),r&&p.jsx(FX,{onImageSelected:d}),p.jsx(_E,{className:"mt-6",children:p.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Vl,{htmlFor:"companyName",children:"Nome da Empresa"}),p.jsx(dr,{type:"text",id:"companyName",name:"companyName",value:e.companyName,onChange:l,required:!0})]}),r&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Vl,{htmlFor:"path",children:"Caminho"}),p.jsxs("div",{className:"flex",children:[p.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:"/"}),p.jsx(dr,{type:"text",id:"path",name:"path",value:e.path,onChange:l,placeholder:"Exemplo: superlanches",className:"rounded-l-none",required:!0})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Vl,{htmlFor:"email",children:"Email"}),p.jsx(dr,{type:"email",id:"email",name:"email",value:e.email,onChange:l,required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Vl,{htmlFor:"password",children:"Senha"}),p.jsx(dr,{type:"password",id:"password",name:"password",value:e.password,onChange:l,required:!0})]}),r&&p.jsx(Pt,{type:"submit",className:"w-full",onClick:o,children:"Cadastrar"}),!r&&p.jsx(Pt,{type:"submit",className:"w-full",onClick:a,children:"Entrar"}),p.jsx("button",{type:"button",className:"text-sm text-gray-600 hover:text-gray-900 mt-2 text-left",onClick:i,children:r?"Entrar":"Cadastrar"})]})})]})})}function UX({children:t,user:e}){return e?t:p.jsx(Q1,{to:"/"})}var qh=t=>t.type==="checkbox",ga=t=>t instanceof Date,Ln=t=>t==null;const R2=t=>typeof t=="object";var Ft=t=>!Ln(t)&&!Array.isArray(t)&&R2(t)&&!ga(t),A2=t=>Ft(t)&&t.target?qh(t.target)?t.target.checked:t.target.value:t,$X=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,k2=(t,e)=>t.has($X(e)),BX=t=>{const e=t.constructor&&t.constructor.prototype;return Ft(e)&&e.hasOwnProperty("isPrototypeOf")},ix=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(ix&&(t instanceof Blob||r))&&(n||Ft(t)))if(e=n?[]:{},!n&&!BX(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Kn(t[s]));else return t;return e}var fv=t=>Array.isArray(t)?t.filter(Boolean):[],Mt=t=>t===void 0,oe=(t,e,n)=>{if(!e||!Ft(t))return n;const r=fv(e.split(/[,[\].]+?/)).reduce((s,i)=>Ln(s)?s:s[i],t);return Mt(r)||r===t?Mt(t[e])?n:t[e]:r},xr=t=>typeof t=="boolean",ox=t=>/^\w*$/.test(t),P2=t=>fv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),st=(t,e,n)=>{let r=-1;const s=ox(e)?[e]:P2(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const c=t[a];l=Ft(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}return t};const $m={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Xr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Js={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},N2=W.createContext(null),pv=()=>W.useContext(N2),zX=t=>{const{children:e,...n}=t;return W.createElement(N2.Provider,{value:n},e)};var O2=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Xr.all&&(e._proxyFormState[o]=!r||Xr.all),n&&(n[o]=!0),t[o]}});return s},Gn=t=>Ft(t)&&!Object.keys(t).length,D2=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Gn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||Xr.all))},cd=t=>Array.isArray(t)?t:[t],M2=(t,e,n)=>!t||!e||t===e||cd(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function ax(t){const e=W.useRef(t);e.current=t,W.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function WX(t){const e=pv(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,a]=W.useState(n._formState),l=W.useRef(!0),c=W.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=W.useRef(s);return d.current=s,ax({disabled:r,next:h=>l.current&&M2(d.current,h.name,i)&&D2(h,c.current,n._updateFormState)&&a({...n._formState,...h}),subject:n._subjects.state}),W.useEffect(()=>(l.current=!0,c.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),W.useMemo(()=>O2(o,n,c.current,!1),[o,n])}var As=t=>typeof t=="string",L2=(t,e,n,r,s)=>As(t)?(r&&e.watch.add(t),oe(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),oe(n,i))):(r&&(e.watchAll=!0),n);function HX(t){const e=pv(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o}=t||{},a=W.useRef(r);a.current=r,ax({disabled:i,subject:n._subjects.values,next:d=>{M2(a.current,d.name,o)&&c(Kn(L2(a.current,n._names,d.values||n._formValues,!1,s)))}});const[l,c]=W.useState(n._getWatch(r,s));return W.useEffect(()=>n._removeUnmounted()),l}function qX(t){const e=pv(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i}=t,o=k2(s._names.array,n),a=HX({control:s,name:n,defaultValue:oe(s._formValues,n,oe(s._defaultValues,n,t.defaultValue)),exact:!0}),l=WX({control:s,name:n,exact:!0}),c=W.useRef(s.register(n,{...t.rules,value:a,...xr(t.disabled)?{disabled:t.disabled}:{}})),d=W.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!oe(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!oe(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!oe(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!oe(l.validatingFields,n)},error:{enumerable:!0,get:()=>oe(l.errors,n)}}),[l,n]),h=W.useMemo(()=>({name:n,value:a,...xr(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:f=>c.current.onChange({target:{value:A2(f),name:n},type:$m.CHANGE}),onBlur:()=>c.current.onBlur({target:{value:oe(s._formValues,n),name:n},type:$m.BLUR}),ref:f=>{const m=oe(s._fields,n);m&&f&&(m._f.ref={focus:()=>f.focus(),select:()=>f.select(),setCustomValidity:T=>f.setCustomValidity(T),reportValidity:()=>f.reportValidity()})}}),[n,s._formValues,r,l.disabled,a,s._fields]);return W.useEffect(()=>{const f=s._options.shouldUnregister||i,m=(T,v)=>{const x=oe(s._fields,T);x&&x._f&&(x._f.mount=v)};if(m(n,!0),f){const T=Kn(oe(s._options.defaultValues,n));st(s._defaultValues,n,T),Mt(oe(s._formValues,n))&&st(s._formValues,n,T)}return!o&&s.register(n),()=>{(o?f&&!s._state.action:f)?s.unregister(n):m(n,!1)}},[n,s,o,i]),W.useEffect(()=>{s._updateDisabledField({disabled:r,fields:s._fields,name:n})},[r,n,s]),W.useMemo(()=>({field:h,formState:l,fieldState:d}),[h,l,d])}const KX=t=>t.render(qX(t));var V2=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},xR=t=>({isOnSubmit:!t||t===Xr.onSubmit,isOnBlur:t===Xr.onBlur,isOnChange:t===Xr.onChange,isOnAll:t===Xr.all,isOnTouch:t===Xr.onTouched}),SR=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const ud=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=oe(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(ud(a,e))break}else if(Ft(a)&&ud(a,e))break}}};var GX=(t,e,n)=>{const r=cd(oe(t,n));return st(r,"root",e[n]),st(t,n,r),t},lx=t=>t.type==="file",Is=t=>typeof t=="function",Bm=t=>{if(!ix)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Tp=t=>As(t),cx=t=>t.type==="radio",zm=t=>t instanceof RegExp;const bR={value:!1,isValid:!1},CR={value:!0,isValid:!0};var F2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Mt(t[0].attributes.value)?Mt(t[0].value)||t[0].value===""?CR:{value:t[0].value,isValid:!0}:CR:bR}return bR};const IR={isValid:!1,value:null};var j2=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,IR):IR;function RR(t,e,n="validate"){if(Tp(t)||Array.isArray(t)&&t.every(Tp)||xr(t)&&!t)return{type:n,message:Tp(t)?t:"",ref:e}}var vl=t=>Ft(t)&&!zm(t)?t:{value:t,message:""},AR=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:d,min:h,max:f,pattern:m,validate:T,name:v,valueAsNumber:x,mount:E}=t._f,_=oe(n,v);if(!E||e.has(v))return{};const S=a?a[0]:o,O=k=>{s&&S.reportValidity&&(S.setCustomValidity(xr(k)?"":k||""),S.reportValidity())},D={},L=cx(o),I=qh(o),b=L||I,C=(x||lx(o))&&Mt(o.value)&&Mt(_)||Bm(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,A=V2.bind(null,v,r,D),N=(k,R,F,G=Js.maxLength,K=Js.minLength)=>{const Q=k?R:F;D[v]={type:k?G:K,message:Q,ref:o,...A(k?G:K,Q)}};if(i?!Array.isArray(_)||!_.length:l&&(!b&&(C||Ln(_))||xr(_)&&!_||I&&!F2(a).isValid||L&&!j2(a).isValid)){const{value:k,message:R}=Tp(l)?{value:!!l,message:l}:vl(l);if(k&&(D[v]={type:Js.required,message:R,ref:S,...A(Js.required,R)},!r))return O(R),D}if(!C&&(!Ln(h)||!Ln(f))){let k,R;const F=vl(f),G=vl(h);if(!Ln(_)&&!isNaN(_)){const K=o.valueAsNumber||_&&+_;Ln(F.value)||(k=K>F.value),Ln(G.value)||(R=K<G.value)}else{const K=o.valueAsDate||new Date(_),Q=ee=>new Date(new Date().toDateString()+" "+ee),U=o.type=="time",B=o.type=="week";As(F.value)&&_&&(k=U?Q(_)>Q(F.value):B?_>F.value:K>new Date(F.value)),As(G.value)&&_&&(R=U?Q(_)<Q(G.value):B?_<G.value:K<new Date(G.value))}if((k||R)&&(N(!!k,F.message,G.message,Js.max,Js.min),!r))return O(D[v].message),D}if((c||d)&&!C&&(As(_)||i&&Array.isArray(_))){const k=vl(c),R=vl(d),F=!Ln(k.value)&&_.length>+k.value,G=!Ln(R.value)&&_.length<+R.value;if((F||G)&&(N(F,k.message,R.message),!r))return O(D[v].message),D}if(m&&!C&&As(_)){const{value:k,message:R}=vl(m);if(zm(k)&&!_.match(k)&&(D[v]={type:Js.pattern,message:R,ref:o,...A(Js.pattern,R)},!r))return O(R),D}if(T){if(Is(T)){const k=await T(_,n),R=RR(k,S);if(R&&(D[v]={...R,...A(Js.validate,R.message)},!r))return O(R.message),D}else if(Ft(T)){let k={};for(const R in T){if(!Gn(k)&&!r)break;const F=RR(await T[R](_,n),S,R);F&&(k={...F,...A(R,F.message)},O(F.message),r&&(D[v]=k))}if(!Gn(k)&&(D[v]={ref:S,...k},!r))return D}}return O(!0),D};function QX(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Mt(t)?r++:t[e[r++]];return t}function YX(t){for(const e in t)if(t.hasOwnProperty(e)&&!Mt(t[e]))return!1;return!0}function zt(t,e){const n=Array.isArray(e)?e:ox(e)?[e]:P2(e),r=n.length===1?t:QX(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Ft(r)&&Gn(r)||Array.isArray(r)&&YX(r))&&zt(t,n.slice(0,-1)),t}var Gy=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},qw=t=>Ln(t)||!R2(t);function Qi(t,e){if(qw(t)||qw(e))return t===e;if(ga(t)&&ga(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(ga(i)&&ga(o)||Ft(i)&&Ft(o)||Array.isArray(i)&&Array.isArray(o)?!Qi(i,o):i!==o)return!1}}return!0}var U2=t=>t.type==="select-multiple",ZX=t=>cx(t)||qh(t),Qy=t=>Bm(t)&&t.isConnected,$2=t=>{for(const e in t)if(Is(t[e]))return!0;return!1};function Wm(t,e={}){const n=Array.isArray(t);if(Ft(t)||n)for(const r in t)Array.isArray(t[r])||Ft(t[r])&&!$2(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Wm(t[r],e[r])):Ln(t[r])||(e[r]=!0);return e}function B2(t,e,n){const r=Array.isArray(t);if(Ft(t)||r)for(const s in t)Array.isArray(t[s])||Ft(t[s])&&!$2(t[s])?Mt(e)||qw(n[s])?n[s]=Array.isArray(t[s])?Wm(t[s],[]):{...Wm(t[s])}:B2(t[s],Ln(e)?{}:e[s],n[s]):n[s]=!Qi(t[s],e[s]);return n}var Cu=(t,e)=>B2(t,e,Wm(e)),z2=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Mt(t)?t:e?t===""?NaN:t&&+t:n&&As(t)?new Date(t):r?r(t):t;function Yy(t){const e=t.ref;return lx(e)?e.files:cx(e)?j2(t.refs).value:U2(e)?[...e.selectedOptions].map(({value:n})=>n):qh(e)?F2(t.refs).value:z2(Mt(e.value)?t.ref.value:e.value,t)}var XX=(t,e,n,r)=>{const s={};for(const i of t){const o=oe(e,i);o&&st(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Iu=t=>Mt(t)?t:zm(t)?t.source:Ft(t)?zm(t.value)?t.value.source:t.value:t;const kR="AsyncFunction";var JX=t=>!!t&&!!t.validate&&!!(Is(t.validate)&&t.validate.constructor.name===kR||Ft(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===kR)),eJ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function PR(t,e,n){const r=oe(t,n);if(r||ox(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=oe(e,i),a=oe(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};s.pop()}return{name:n}}var tJ=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,nJ=(t,e)=>!fv(oe(t,e)).length&&zt(t,e);const rJ={mode:Xr.onSubmit,reValidateMode:Xr.onChange,shouldFocusError:!0};function sJ(t={}){let e={...rJ,...t},n={submitCount:0,isDirty:!1,isLoading:Is(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Ft(e.defaultValues)||Ft(e.values)?Kn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Kn(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Gy(),array:Gy(),state:Gy()},f=xR(e.mode),m=xR(e.reValidateMode),T=e.criteriaMode===Xr.all,v=M=>j=>{clearTimeout(c),c=setTimeout(M,j)},x=async M=>{if(!e.disabled&&(d.isValid||M)){const j=e.resolver?Gn((await b()).errors):await A(r,!0);j!==n.isValid&&h.state.next({isValid:j})}},E=(M,j)=>{!e.disabled&&(d.isValidating||d.validatingFields)&&((M||Array.from(a.mount)).forEach(z=>{z&&(j?st(n.validatingFields,z,j):zt(n.validatingFields,z))}),h.state.next({validatingFields:n.validatingFields,isValidating:!Gn(n.validatingFields)}))},_=(M,j=[],z,ie,ne=!0,Z=!0)=>{if(ie&&z&&!e.disabled){if(o.action=!0,Z&&Array.isArray(oe(r,M))){const ge=z(oe(r,M),ie.argA,ie.argB);ne&&st(r,M,ge)}if(Z&&Array.isArray(oe(n.errors,M))){const ge=z(oe(n.errors,M),ie.argA,ie.argB);ne&&st(n.errors,M,ge),nJ(n.errors,M)}if(d.touchedFields&&Z&&Array.isArray(oe(n.touchedFields,M))){const ge=z(oe(n.touchedFields,M),ie.argA,ie.argB);ne&&st(n.touchedFields,M,ge)}d.dirtyFields&&(n.dirtyFields=Cu(s,i)),h.state.next({name:M,isDirty:k(M,j),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else st(i,M,j)},S=(M,j)=>{st(n.errors,M,j),h.state.next({errors:n.errors})},O=M=>{n.errors=M,h.state.next({errors:n.errors,isValid:!1})},D=(M,j,z,ie)=>{const ne=oe(r,M);if(ne){const Z=oe(i,M,Mt(z)?oe(s,M):z);Mt(Z)||ie&&ie.defaultChecked||j?st(i,M,j?Z:Yy(ne._f)):G(M,Z),o.mount&&x()}},L=(M,j,z,ie,ne)=>{let Z=!1,ge=!1;const ke={name:M};if(!e.disabled){const xe=!!(oe(r,M)&&oe(r,M)._f&&oe(r,M)._f.disabled);if(!z||ie){d.isDirty&&(ge=n.isDirty,n.isDirty=ke.isDirty=k(),Z=ge!==ke.isDirty);const Me=xe||Qi(oe(s,M),j);ge=!!(!xe&&oe(n.dirtyFields,M)),Me||xe?zt(n.dirtyFields,M):st(n.dirtyFields,M,!0),ke.dirtyFields=n.dirtyFields,Z=Z||d.dirtyFields&&ge!==!Me}if(z){const Me=oe(n.touchedFields,M);Me||(st(n.touchedFields,M,z),ke.touchedFields=n.touchedFields,Z=Z||d.touchedFields&&Me!==z)}Z&&ne&&h.state.next(ke)}return Z?ke:{}},I=(M,j,z,ie)=>{const ne=oe(n.errors,M),Z=d.isValid&&xr(j)&&n.isValid!==j;if(e.delayError&&z?(l=v(()=>S(M,z)),l(e.delayError)):(clearTimeout(c),l=null,z?st(n.errors,M,z):zt(n.errors,M)),(z?!Qi(ne,z):ne)||!Gn(ie)||Z){const ge={...ie,...Z&&xr(j)?{isValid:j}:{},errors:n.errors,name:M};n={...n,...ge},h.state.next(ge)}},b=async M=>{E(M,!0);const j=await e.resolver(i,e.context,XX(M||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return E(M),j},C=async M=>{const{errors:j}=await b(M);if(M)for(const z of M){const ie=oe(j,z);ie?st(n.errors,z,ie):zt(n.errors,z)}else n.errors=j;return j},A=async(M,j,z={valid:!0})=>{for(const ie in M){const ne=M[ie];if(ne){const{_f:Z,...ge}=ne;if(Z){const ke=a.array.has(Z.name),xe=ne._f&&JX(ne._f);xe&&d.validatingFields&&E([ie],!0);const Me=await AR(ne,a.disabled,i,T,e.shouldUseNativeValidation&&!j,ke);if(xe&&d.validatingFields&&E([ie]),Me[Z.name]&&(z.valid=!1,j))break;!j&&(oe(Me,Z.name)?ke?GX(n.errors,Me,Z.name):st(n.errors,Z.name,Me[Z.name]):zt(n.errors,Z.name))}!Gn(ge)&&await A(ge,j,z)}}return z.valid},N=()=>{for(const M of a.unMount){const j=oe(r,M);j&&(j._f.refs?j._f.refs.every(z=>!Qy(z)):!Qy(j._f.ref))&&rt(M)}a.unMount=new Set},k=(M,j)=>!e.disabled&&(M&&j&&st(i,M,j),!Qi(pe(),s)),R=(M,j,z)=>L2(M,a,{...o.mount?i:Mt(j)?s:As(M)?{[M]:j}:j},z,j),F=M=>fv(oe(o.mount?i:s,M,e.shouldUnregister?oe(s,M,[]):[])),G=(M,j,z={})=>{const ie=oe(r,M);let ne=j;if(ie){const Z=ie._f;Z&&(!Z.disabled&&st(i,M,z2(j,Z)),ne=Bm(Z.ref)&&Ln(j)?"":j,U2(Z.ref)?[...Z.ref.options].forEach(ge=>ge.selected=ne.includes(ge.value)):Z.refs?qh(Z.ref)?Z.refs.length>1?Z.refs.forEach(ge=>(!ge.defaultChecked||!ge.disabled)&&(ge.checked=Array.isArray(ne)?!!ne.find(ke=>ke===ge.value):ne===ge.value)):Z.refs[0]&&(Z.refs[0].checked=!!ne):Z.refs.forEach(ge=>ge.checked=ge.value===ne):lx(Z.ref)?Z.ref.value="":(Z.ref.value=ne,Z.ref.type||h.values.next({name:M,values:{...i}})))}(z.shouldDirty||z.shouldTouch)&&L(M,ne,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&ee(M)},K=(M,j,z)=>{for(const ie in j){const ne=j[ie],Z=`${M}.${ie}`,ge=oe(r,Z);(a.array.has(M)||Ft(ne)||ge&&!ge._f)&&!ga(ne)?K(Z,ne,z):G(Z,ne,z)}},Q=(M,j,z={})=>{const ie=oe(r,M),ne=a.array.has(M),Z=Kn(j);st(i,M,Z),ne?(h.array.next({name:M,values:{...i}}),(d.isDirty||d.dirtyFields)&&z.shouldDirty&&h.state.next({name:M,dirtyFields:Cu(s,i),isDirty:k(M,Z)})):ie&&!ie._f&&!Ln(Z)?K(M,Z,z):G(M,Z,z),SR(M,a)&&h.state.next({...n}),h.values.next({name:o.mount?M:void 0,values:{...i}})},U=async M=>{o.mount=!0;const j=M.target;let z=j.name,ie=!0;const ne=oe(r,z),Z=()=>j.type?Yy(ne._f):A2(M),ge=ke=>{ie=Number.isNaN(ke)||ga(ke)&&isNaN(ke.getTime())||Qi(ke,oe(i,z,ke))};if(ne){let ke,xe;const Me=Z(),On=M.type===$m.BLUR||M.type===$m.FOCUS_OUT,al=!eJ(ne._f)&&!e.resolver&&!oe(n.errors,z)&&!ne._f.deps||tJ(On,oe(n.touchedFields,z),n.isSubmitted,m,f),jr=SR(z,a,On);st(i,z,Me),On?(ne._f.onBlur&&ne._f.onBlur(M),l&&l(0)):ne._f.onChange&&ne._f.onChange(M);const ea=L(z,Me,On,!1),vs=!Gn(ea)||jr;if(!On&&h.values.next({name:z,type:M.type,values:{...i}}),al)return d.isValid&&(e.mode==="onBlur"&&On?x():On||x()),vs&&h.state.next({name:z,...jr?{}:ea});if(!On&&jr&&h.state.next({...n}),e.resolver){const{errors:Ks}=await b([z]);if(ge(Me),ie){const Ur=PR(n.errors,r,z),Gs=PR(Ks,r,Ur.name||z);ke=Gs.error,z=Gs.name,xe=Gn(Ks)}}else E([z],!0),ke=(await AR(ne,a.disabled,i,T,e.shouldUseNativeValidation))[z],E([z]),ge(Me),ie&&(ke?xe=!1:d.isValid&&(xe=await A(r,!0)));ie&&(ne._f.deps&&ee(ne._f.deps),I(z,xe,ke,ea))}},B=(M,j)=>{if(oe(n.errors,j)&&M.focus)return M.focus(),1},ee=async(M,j={})=>{let z,ie;const ne=cd(M);if(e.resolver){const Z=await C(Mt(M)?M:ne);z=Gn(Z),ie=M?!ne.some(ge=>oe(Z,ge)):z}else M?(ie=(await Promise.all(ne.map(async Z=>{const ge=oe(r,Z);return await A(ge&&ge._f?{[Z]:ge}:ge)}))).every(Boolean),!(!ie&&!n.isValid)&&x()):ie=z=await A(r);return h.state.next({...!As(M)||d.isValid&&z!==n.isValid?{}:{name:M},...e.resolver||!M?{isValid:z}:{},errors:n.errors}),j.shouldFocus&&!ie&&ud(r,B,M?ne:a.mount),ie},pe=M=>{const j={...o.mount?i:s};return Mt(M)?j:As(M)?oe(j,M):M.map(z=>oe(j,z))},le=(M,j)=>({invalid:!!oe((j||n).errors,M),isDirty:!!oe((j||n).dirtyFields,M),error:oe((j||n).errors,M),isValidating:!!oe(n.validatingFields,M),isTouched:!!oe((j||n).touchedFields,M)}),he=M=>{M&&cd(M).forEach(j=>zt(n.errors,j)),h.state.next({errors:M?n.errors:{}})},ye=(M,j,z)=>{const ie=(oe(r,M,{_f:{}})._f||{}).ref,ne=oe(n.errors,M)||{},{ref:Z,message:ge,type:ke,...xe}=ne;st(n.errors,M,{...xe,...j,ref:ie}),h.state.next({name:M,errors:n.errors,isValid:!1}),z&&z.shouldFocus&&ie&&ie.focus&&ie.focus()},qe=(M,j)=>Is(M)?h.values.subscribe({next:z=>M(R(void 0,j),z)}):R(M,j,!0),rt=(M,j={})=>{for(const z of M?cd(M):a.mount)a.mount.delete(z),a.array.delete(z),j.keepValue||(zt(r,z),zt(i,z)),!j.keepError&&zt(n.errors,z),!j.keepDirty&&zt(n.dirtyFields,z),!j.keepTouched&&zt(n.touchedFields,z),!j.keepIsValidating&&zt(n.validatingFields,z),!e.shouldUnregister&&!j.keepDefaultValue&&zt(s,z);h.values.next({values:{...i}}),h.state.next({...n,...j.keepDirty?{isDirty:k()}:{}}),!j.keepIsValid&&x()},se=({disabled:M,name:j,field:z,fields:ie})=>{(xr(M)&&o.mount||M||a.disabled.has(j))&&(M?a.disabled.add(j):a.disabled.delete(j),L(j,Yy(z?z._f:oe(ie,j)._f),!1,!1,!0))},Ke=(M,j={})=>{let z=oe(r,M);const ie=xr(j.disabled)||xr(e.disabled);return st(r,M,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:M}},name:M,mount:!0,...j}}),a.mount.add(M),z?se({field:z,disabled:xr(j.disabled)?j.disabled:e.disabled,name:M}):D(M,!0,j.value),{...ie?{disabled:j.disabled||e.disabled}:{},...e.progressive?{required:!!j.required,min:Iu(j.min),max:Iu(j.max),minLength:Iu(j.minLength),maxLength:Iu(j.maxLength),pattern:Iu(j.pattern)}:{},name:M,onChange:U,onBlur:U,ref:ne=>{if(ne){Ke(M,j),z=oe(r,M);const Z=Mt(ne.value)&&ne.querySelectorAll&&ne.querySelectorAll("input,select,textarea")[0]||ne,ge=ZX(Z),ke=z._f.refs||[];if(ge?ke.find(xe=>xe===Z):Z===z._f.ref)return;st(r,M,{_f:{...z._f,...ge?{refs:[...ke.filter(Qy),Z,...Array.isArray(oe(s,M))?[{}]:[]],ref:{type:Z.type,name:M}}:{ref:Z}}}),D(M,!1,void 0,Z)}else z=oe(r,M,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||j.shouldUnregister)&&!(k2(a.array,M)&&o.action)&&a.unMount.add(M)}}},lt=()=>e.shouldFocusError&&ud(r,B,a.mount),Fe=M=>{xr(M)&&(h.state.next({disabled:M}),ud(r,(j,z)=>{const ie=oe(r,z);ie&&(j.disabled=ie._f.disabled||M,Array.isArray(ie._f.refs)&&ie._f.refs.forEach(ne=>{ne.disabled=ie._f.disabled||M}))},0,!1))},Pe=(M,j)=>async z=>{let ie;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let ne=Kn(i);if(a.disabled.size)for(const Z of a.disabled)st(ne,Z,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:Z,values:ge}=await b();n.errors=Z,ne=ge}else await A(r);if(zt(n.errors,"root"),Gn(n.errors)){h.state.next({errors:{}});try{await M(ne,z)}catch(Z){ie=Z}}else j&&await j({...n.errors},z),lt(),setTimeout(lt);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Gn(n.errors)&&!ie,submitCount:n.submitCount+1,errors:n.errors}),ie)throw ie},je=(M,j={})=>{oe(r,M)&&(Mt(j.defaultValue)?Q(M,Kn(oe(s,M))):(Q(M,j.defaultValue),st(s,M,Kn(j.defaultValue))),j.keepTouched||zt(n.touchedFields,M),j.keepDirty||(zt(n.dirtyFields,M),n.isDirty=j.defaultValue?k(M,Kn(oe(s,M))):k()),j.keepError||(zt(n.errors,M),d.isValid&&x()),h.state.next({...n}))},Et=(M,j={})=>{const z=M?Kn(M):s,ie=Kn(z),ne=Gn(M),Z=ne?s:ie;if(j.keepDefaultValues||(s=z),!j.keepValues){if(j.keepDirtyValues){const ge=new Set([...a.mount,...Object.keys(Cu(s,i))]);for(const ke of Array.from(ge))oe(n.dirtyFields,ke)?st(Z,ke,oe(i,ke)):Q(ke,oe(Z,ke))}else{if(ix&&Mt(M))for(const ge of a.mount){const ke=oe(r,ge);if(ke&&ke._f){const xe=Array.isArray(ke._f.refs)?ke._f.refs[0]:ke._f.ref;if(Bm(xe)){const Me=xe.closest("form");if(Me){Me.reset();break}}}}r={}}i=e.shouldUnregister?j.keepDefaultValues?Kn(s):{}:Kn(Z),h.array.next({values:{...Z}}),h.values.next({values:{...Z}})}a={mount:j.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!j.keepIsValid||!!j.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:j.keepSubmitCount?n.submitCount:0,isDirty:ne?!1:j.keepDirty?n.isDirty:!!(j.keepDefaultValues&&!Qi(M,s)),isSubmitted:j.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ne?{}:j.keepDirtyValues?j.keepDefaultValues&&i?Cu(s,i):n.dirtyFields:j.keepDefaultValues&&M?Cu(s,M):j.keepDirty?n.dirtyFields:{},touchedFields:j.keepTouched?n.touchedFields:{},errors:j.keepErrors?n.errors:{},isSubmitSuccessful:j.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Bt=(M,j)=>Et(Is(M)?M(i):M,j);return{control:{register:Ke,unregister:rt,getFieldState:le,handleSubmit:Pe,setError:ye,_executeSchema:b,_getWatch:R,_getDirty:k,_updateValid:x,_removeUnmounted:N,_updateFieldArray:_,_updateDisabledField:se,_getFieldArray:F,_reset:Et,_resetDefaultValues:()=>Is(e.defaultValues)&&e.defaultValues().then(M=>{Bt(M,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:M=>{n={...n,...M}},_disableForm:Fe,_subjects:h,_proxyFormState:d,_setErrors:O,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(M){o=M},get _defaultValues(){return s},get _names(){return a},set _names(M){a=M},get _formState(){return n},set _formState(M){n=M},get _options(){return e},set _options(M){e={...e,...M}}},trigger:ee,register:Ke,handleSubmit:Pe,watch:qe,setValue:Q,getValues:pe,reset:Bt,resetField:je,clearErrors:he,unregister:rt,setError:ye,setFocus:(M,j={})=>{const z=oe(r,M),ie=z&&z._f;if(ie){const ne=ie.refs?ie.refs[0]:ie.ref;ne.focus&&(ne.focus(),j.shouldSelect&&Is(ne.select)&&ne.select())}},getFieldState:le}}function mv(t={}){const e=W.useRef(void 0),n=W.useRef(void 0),[r,s]=W.useState({isDirty:!1,isValidating:!1,isLoading:Is(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Is(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...sJ(t),formState:r});const i=e.current.control;return i._options=t,ax({subject:i._subjects.state,next:o=>{D2(o,i._proxyFormState,i._updateFormState,!0)&&s({...i._formState})}}),W.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),W.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),W.useEffect(()=>{t.values&&!Qi(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[t.values,i]),W.useEffect(()=>{t.errors&&i._setErrors(t.errors)},[t.errors,i]),W.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),W.useEffect(()=>{t.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=O2(r,i),e.current}const gv=zX,W2=y.createContext({}),An=({...t})=>p.jsx(W2.Provider,{value:{name:t.name},children:p.jsx(KX,{...t})}),vv=()=>{const t=y.useContext(W2),e=y.useContext(H2),{getFieldState:n,formState:r}=pv(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},H2=y.createContext({}),cn=y.forwardRef(({className:t,...e},n)=>{const r=y.useId();return p.jsx(H2.Provider,{value:{id:r},children:p.jsx("div",{ref:n,className:De("space-y-2",t),...e})})});cn.displayName="FormItem";const un=y.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=vv();return p.jsx(Vl,{ref:n,className:De(r&&"text-destructive",t),htmlFor:s,...e})});un.displayName="FormLabel";const dn=y.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=vv();return p.jsx(Co,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});dn.displayName="FormControl";const iJ=y.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=vv();return p.jsx("p",{ref:n,id:r,className:De("text-sm text-muted-foreground",t),...e})});iJ.displayName="FormDescription";const hn=y.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=vv(),o=s?String(s==null?void 0:s.message):e;return o?p.jsx("p",{ref:r,id:i,className:De("text-sm font-medium text-destructive",t),...n,children:o}):null});hn.displayName="FormMessage";function q2(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var oJ=[" ","Enter","ArrowUp","ArrowDown"],aJ=[" ","Enter"],Kh="Select",[yv,_v,lJ]=Y0(Kh),[eu,yte]=zs(Kh,[lJ,Sg]),wv=Sg(),[cJ,Xo]=eu(Kh),[uJ,dJ]=eu(Kh),K2=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:f,required:m,form:T}=t,v=wv(e),[x,E]=y.useState(null),[_,S]=y.useState(null),[O,D]=y.useState(!1),L=kg(c),[I=!1,b]=Pa({prop:r,defaultProp:s,onChange:i}),[C,A]=Pa({prop:o,defaultProp:a,onChange:l}),N=y.useRef(null),k=x?T||!!x.closest("form"):!0,[R,F]=y.useState(new Set),G=Array.from(R).map(K=>K.props.value).join(";");return p.jsx(n5,{...v,children:p.jsxs(cJ,{required:m,scope:e,trigger:x,onTriggerChange:E,valueNode:_,onValueNodeChange:S,valueNodeHasChildren:O,onValueNodeHasChildrenChange:D,contentId:mo(),value:C,onValueChange:A,open:I,onOpenChange:b,dir:L,triggerPointerDownPosRef:N,disabled:f,children:[p.jsx(yv.Provider,{scope:e,children:p.jsx(uJ,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(K=>{F(Q=>new Set(Q).add(K))},[]),onNativeOptionRemove:y.useCallback(K=>{F(Q=>{const U=new Set(Q);return U.delete(K),U})},[]),children:n})}),k?p.jsxs(yV,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:C,onChange:K=>A(K.target.value),disabled:f,form:T,children:[C===void 0?p.jsx("option",{value:""}):null,Array.from(R)]},G):null]})})};K2.displayName=Kh;var G2="SelectTrigger",Q2=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=wv(n),o=Xo(G2,n),a=o.disabled||r,l=Je(e,o.onTriggerChange),c=_v(n),d=y.useRef("touch"),[h,f,m]=_V(v=>{const x=c().filter(S=>!S.disabled),E=x.find(S=>S.value===o.value),_=wV(x,v,E);_!==void 0&&o.onValueChange(_.value)}),T=v=>{a||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return p.jsx(v1,{asChild:!0,...i,children:p.jsx(Ce.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":vV(o.value)?"":void 0,...s,ref:l,onClick:me(s.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&T(v)}),onPointerDown:me(s.onPointerDown,v=>{d.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(T(v),v.preventDefault())}),onKeyDown:me(s.onKeyDown,v=>{const x=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&f(v.key),!(x&&v.key===" ")&&oJ.includes(v.key)&&(T(),v.preventDefault())})})})});Q2.displayName=G2;var Y2="SelectValue",Z2=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=Xo(Y2,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,h=Je(e,l.onValueNodeChange);return gn(()=>{c(d)},[c,d]),p.jsx(Ce.span,{...a,ref:h,style:{pointerEvents:"none"},children:vV(l.value)?p.jsx(p.Fragment,{children:o}):i})});Z2.displayName=Y2;var hJ="SelectIcon",X2=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return p.jsx(Ce.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});X2.displayName=hJ;var fJ="SelectPortal",J2=t=>p.jsx(vg,{asChild:!0,...t});J2.displayName=fJ;var Wa="SelectContent",eV=y.forwardRef((t,e)=>{const n=Xo(Wa,t.__scopeSelect),[r,s]=y.useState();if(gn(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Ya.createPortal(p.jsx(tV,{scope:t.__scopeSelect,children:p.jsx(yv.Slot,{scope:t.__scopeSelect,children:p.jsx("div",{children:t.children})})}),i):null}return p.jsx(nV,{...t,ref:e})});eV.displayName=Wa;var Wr=10,[tV,Jo]=eu(Wa),pJ="SelectContentImpl",nV=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:T,hideWhenDetached:v,avoidCollisions:x,...E}=t,_=Xo(Wa,n),[S,O]=y.useState(null),[D,L]=y.useState(null),I=Je(e,se=>O(se)),[b,C]=y.useState(null),[A,N]=y.useState(null),k=_v(n),[R,F]=y.useState(!1),G=y.useRef(!1);y.useEffect(()=>{if(S)return IN(S)},[S]),_N();const K=y.useCallback(se=>{const[Ke,...lt]=k().map(je=>je.ref.current),[Fe]=lt.slice(-1),Pe=document.activeElement;for(const je of se)if(je===Pe||(je==null||je.scrollIntoView({block:"nearest"}),je===Ke&&D&&(D.scrollTop=0),je===Fe&&D&&(D.scrollTop=D.scrollHeight),je==null||je.focus(),document.activeElement!==Pe))return},[k,D]),Q=y.useCallback(()=>K([b,S]),[K,b,S]);y.useEffect(()=>{R&&Q()},[R,Q]);const{onOpenChange:U,triggerPointerDownPosRef:B}=_;y.useEffect(()=>{if(S){let se={x:0,y:0};const Ke=Fe=>{var Pe,je;se={x:Math.abs(Math.round(Fe.pageX)-(((Pe=B.current)==null?void 0:Pe.x)??0)),y:Math.abs(Math.round(Fe.pageY)-(((je=B.current)==null?void 0:je.y)??0))}},lt=Fe=>{se.x<=10&&se.y<=10?Fe.preventDefault():S.contains(Fe.target)||U(!1),document.removeEventListener("pointermove",Ke),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",Ke),document.addEventListener("pointerup",lt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ke),document.removeEventListener("pointerup",lt,{capture:!0})}}},[S,U,B]),y.useEffect(()=>{const se=()=>U(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[U]);const[ee,pe]=_V(se=>{const Ke=k().filter(Pe=>!Pe.disabled),lt=Ke.find(Pe=>Pe.ref.current===document.activeElement),Fe=wV(Ke,se,lt);Fe&&setTimeout(()=>Fe.ref.current.focus())}),le=y.useCallback((se,Ke,lt)=>{const Fe=!G.current&&!lt;(_.value!==void 0&&_.value===Ke||Fe)&&(C(se),Fe&&(G.current=!0))},[_.value]),he=y.useCallback(()=>S==null?void 0:S.focus(),[S]),ye=y.useCallback((se,Ke,lt)=>{const Fe=!G.current&&!lt;(_.value!==void 0&&_.value===Ke||Fe)&&N(se)},[_.value]),qe=r==="popper"?Kw:rV,rt=qe===Kw?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:T,hideWhenDetached:v,avoidCollisions:x}:{};return p.jsx(tV,{scope:n,content:S,viewport:D,onViewportChange:L,itemRefCallback:le,selectedItem:b,onItemLeave:he,itemTextRefCallback:ye,focusSelectedItem:Q,selectedItemText:A,position:r,isPositioned:R,searchRef:ee,children:p.jsx(TE,{as:Co,allowPinchZoom:!0,children:p.jsx(EE,{asChild:!0,trapped:_.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:me(s,se=>{var Ke;(Ke=_.trigger)==null||Ke.focus({preventScroll:!0}),se.preventDefault()}),children:p.jsx(xh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:p.jsx(qe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:se=>se.preventDefault(),...E,...rt,onPlaced:()=>F(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:me(E.onKeyDown,se=>{const Ke=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!Ke&&se.key.length===1&&pe(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let Fe=k().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(se.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const Pe=se.target,je=Fe.indexOf(Pe);Fe=Fe.slice(je+1)}setTimeout(()=>K(Fe)),se.preventDefault()}})})})})})})});nV.displayName=pJ;var mJ="SelectItemAlignedPosition",rV=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Xo(Wa,n),o=Jo(Wa,n),[a,l]=y.useState(null),[c,d]=y.useState(null),h=Je(e,I=>d(I)),f=_v(n),m=y.useRef(!1),T=y.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:E,focusSelectedItem:_}=o,S=y.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&v&&x&&E){const I=i.trigger.getBoundingClientRect(),b=c.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),A=E.getBoundingClientRect();if(i.dir!=="rtl"){const Pe=A.left-b.left,je=C.left-Pe,Et=I.left-je,Bt=I.width+Et,_r=Math.max(Bt,b.width),wr=window.innerWidth-Wr,gs=aw(je,[Wr,Math.max(Wr,wr-_r)]);a.style.minWidth=Bt+"px",a.style.left=gs+"px"}else{const Pe=b.right-A.right,je=window.innerWidth-C.right-Pe,Et=window.innerWidth-I.right-je,Bt=I.width+Et,_r=Math.max(Bt,b.width),wr=window.innerWidth-Wr,gs=aw(je,[Wr,Math.max(Wr,wr-_r)]);a.style.minWidth=Bt+"px",a.style.right=gs+"px"}const N=f(),k=window.innerHeight-Wr*2,R=v.scrollHeight,F=window.getComputedStyle(c),G=parseInt(F.borderTopWidth,10),K=parseInt(F.paddingTop,10),Q=parseInt(F.borderBottomWidth,10),U=parseInt(F.paddingBottom,10),B=G+K+R+U+Q,ee=Math.min(x.offsetHeight*5,B),pe=window.getComputedStyle(v),le=parseInt(pe.paddingTop,10),he=parseInt(pe.paddingBottom,10),ye=I.top+I.height/2-Wr,qe=k-ye,rt=x.offsetHeight/2,se=x.offsetTop+rt,Ke=G+K+se,lt=B-Ke;if(Ke<=ye){const Pe=N.length>0&&x===N[N.length-1].ref.current;a.style.bottom="0px";const je=c.clientHeight-v.offsetTop-v.offsetHeight,Et=Math.max(qe,rt+(Pe?he:0)+je+Q),Bt=Ke+Et;a.style.height=Bt+"px"}else{const Pe=N.length>0&&x===N[0].ref.current;a.style.top="0px";const Et=Math.max(ye,G+v.offsetTop+(Pe?le:0)+rt)+lt;a.style.height=Et+"px",v.scrollTop=Ke-ye+v.offsetTop}a.style.margin=`${Wr}px 0`,a.style.minHeight=ee+"px",a.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,a,c,v,x,E,i.dir,r]);gn(()=>S(),[S]);const[O,D]=y.useState();gn(()=>{c&&D(window.getComputedStyle(c).zIndex)},[c]);const L=y.useCallback(I=>{I&&T.current===!0&&(S(),_==null||_(),T.current=!1)},[S,_]);return p.jsx(vJ,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:L,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:p.jsx(Ce.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});rV.displayName=mJ;var gJ="SelectPopperPosition",Kw=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Wr,...i}=t,o=wv(n);return p.jsx(y1,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kw.displayName=gJ;var[vJ,ux]=eu(Wa,{}),Gw="SelectViewport",sV=y.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Jo(Gw,n),o=ux(Gw,n),a=Je(e,i.onViewportChange),l=y.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(yv.Slot,{scope:n,children:p.jsx(Ce.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(l.current-d.scrollTop);if(m>0){const T=window.innerHeight-Wr*2,v=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),E=Math.max(v,x);if(E<T){const _=E+m,S=Math.min(T,_),O=_-S;h.style.height=S+"px",h.style.bottom==="0px"&&(d.scrollTop=O>0?O:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});sV.displayName=Gw;var iV="SelectGroup",[yJ,_J]=eu(iV),wJ=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=mo();return p.jsx(yJ,{scope:n,id:s,children:p.jsx(Ce.div,{role:"group","aria-labelledby":s,...r,ref:e})})});wJ.displayName=iV;var oV="SelectLabel",aV=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=_J(oV,n);return p.jsx(Ce.div,{id:s.id,...r,ref:e})});aV.displayName=oV;var Hm="SelectItem",[EJ,lV]=eu(Hm),cV=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Xo(Hm,n),l=Jo(Hm,n),c=a.value===r,[d,h]=y.useState(i??""),[f,m]=y.useState(!1),T=Je(e,_=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,_,r,s)}),v=mo(),x=y.useRef("touch"),E=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(EJ,{scope:n,value:r,disabled:s,textId:v,isSelected:c,onItemTextChange:y.useCallback(_=>{h(S=>S||((_==null?void 0:_.textContent)??"").trim())},[]),children:p.jsx(yv.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:p.jsx(Ce.div,{role:"option","aria-labelledby":v,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:T,onFocus:me(o.onFocus,()=>m(!0)),onBlur:me(o.onBlur,()=>m(!1)),onClick:me(o.onClick,()=>{x.current!=="mouse"&&E()}),onPointerUp:me(o.onPointerUp,()=>{x.current==="mouse"&&E()}),onPointerDown:me(o.onPointerDown,_=>{x.current=_.pointerType}),onPointerMove:me(o.onPointerMove,_=>{var S;x.current=_.pointerType,s?(S=l.onItemLeave)==null||S.call(l):x.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,_=>{var S;_.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:me(o.onKeyDown,_=>{var O;((O=l.searchRef)==null?void 0:O.current)!==""&&_.key===" "||(aJ.includes(_.key)&&E(),_.key===" "&&_.preventDefault())})})})})});cV.displayName=Hm;var ju="SelectItemText",uV=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Xo(ju,n),a=Jo(ju,n),l=lV(ju,n),c=dJ(ju,n),[d,h]=y.useState(null),f=Je(e,E=>h(E),l.onItemTextChange,E=>{var _;return(_=a.itemTextRefCallback)==null?void 0:_.call(a,E,l.value,l.disabled)}),m=d==null?void 0:d.textContent,T=y.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=c;return gn(()=>(v(T),()=>x(T)),[v,x,T]),p.jsxs(p.Fragment,{children:[p.jsx(Ce.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ya.createPortal(i.children,o.valueNode):null]})});uV.displayName=ju;var dV="SelectItemIndicator",hV=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return lV(dV,n).isSelected?p.jsx(Ce.span,{"aria-hidden":!0,...r,ref:e}):null});hV.displayName=dV;var Qw="SelectScrollUpButton",fV=y.forwardRef((t,e)=>{const n=Jo(Qw,t.__scopeSelect),r=ux(Qw,t.__scopeSelect),[s,i]=y.useState(!1),o=Je(e,r.onScrollButtonChange);return gn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?p.jsx(mV,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});fV.displayName=Qw;var Yw="SelectScrollDownButton",pV=y.forwardRef((t,e)=>{const n=Jo(Yw,t.__scopeSelect),r=ux(Yw,t.__scopeSelect),[s,i]=y.useState(!1),o=Je(e,r.onScrollButtonChange);return gn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?p.jsx(mV,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});pV.displayName=Yw;var mV=y.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Jo("SelectScrollButton",n),o=y.useRef(null),a=_v(n),l=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>l(),[l]),gn(()=>{var d;const c=a().find(h=>h.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),p.jsx(Ce.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:me(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:me(s.onPointerLeave,()=>{l()})})}),TJ="SelectSeparator",gV=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return p.jsx(Ce.div,{"aria-hidden":!0,...r,ref:e})});gV.displayName=TJ;var Zw="SelectArrow",xJ=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=wv(n),i=Xo(Zw,n),o=Jo(Zw,n);return i.open&&o.position==="popper"?p.jsx(_1,{...s,...r,ref:e}):null});xJ.displayName=Zw;function vV(t){return t===""||t===void 0}var yV=y.forwardRef((t,e)=>{const{value:n,...r}=t,s=y.useRef(null),i=Je(e,s),o=q2(n);return y.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&d){const h=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(h)}},[o,n]),p.jsx(Sh,{asChild:!0,children:p.jsx("select",{...r,ref:i,defaultValue:n})})});yV.displayName="BubbleSelect";function _V(t){const e=Vt(t),n=y.useRef(""),r=y.useRef(0),s=y.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function wV(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=SJ(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function SJ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var bJ=K2,EV=Q2,CJ=Z2,IJ=X2,RJ=J2,TV=eV,AJ=sV,xV=aV,SV=cV,kJ=uV,PJ=hV,bV=fV,CV=pV,IV=gV;const qm=bJ,Km=CJ,eh=y.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(EV,{ref:r,className:De("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,p.jsx(IJ,{asChild:!0,children:p.jsx(MP,{className:"h-4 w-4 opacity-50"})})]}));eh.displayName=EV.displayName;const RV=y.forwardRef(({className:t,...e},n)=>p.jsx(bV,{ref:n,className:De("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(OU,{className:"h-4 w-4"})}));RV.displayName=bV.displayName;const AV=y.forwardRef(({className:t,...e},n)=>p.jsx(CV,{ref:n,className:De("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(MP,{className:"h-4 w-4"})}));AV.displayName=CV.displayName;const th=y.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>p.jsx(RJ,{children:p.jsxs(TV,{ref:s,className:De("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[p.jsx(RV,{}),p.jsx(AJ,{className:De("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),p.jsx(AV,{})]})}));th.displayName=TV.displayName;const NJ=y.forwardRef(({className:t,...e},n)=>p.jsx(xV,{ref:n,className:De("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));NJ.displayName=xV.displayName;const Jr=y.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(SV,{ref:r,className:De("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(PJ,{children:p.jsx(DP,{className:"h-4 w-4"})})}),p.jsx(kJ,{children:e})]}));Jr.displayName=SV.displayName;const OJ=y.forwardRef(({className:t,...e},n)=>p.jsx(IV,{ref:n,className:De("-mx-1 my-1 h-px bg-muted",t),...e}));OJ.displayName=IV.displayName;const dx=y.forwardRef(({className:t,...e},n)=>p.jsx("textarea",{className:De("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));dx.displayName="Textarea";const NR=(t,e,n)=>{if(t&&"reportValidity"in t){const r=oe(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},kV=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?NR(r.ref,n,t):r.refs&&r.refs.forEach(s=>NR(s,n,t))}},DJ=(t,e)=>{e.shouldUseNativeValidation&&kV(t,e);const n={};for(const r in t){const s=oe(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(MJ(e.names||Object.keys(t),r)){const o=Object.assign({},oe(n,r));st(o,"root",i),st(n,r,o)}else st(n,r,i)}return n},MJ=(t,e)=>t.some(n=>n.startsWith(e+"."));var LJ=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=V2(o,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},Ev=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&kV({},i),{errors:{},values:n.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:DJ(LJ(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Ye;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ye||(Ye={}));var Xw;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Xw||(Xw={}));const ce=Ye.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),si=t=>{switch(typeof t){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return isNaN(t)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(t)?ce.array:t===null?ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ce.promise:typeof Map<"u"&&t instanceof Map?ce.map:typeof Set<"u"&&t instanceof Set?ce.set:typeof Date<"u"&&t instanceof Date?ce.date:ce.object;default:return ce.unknown}},X=Ye.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),VJ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class mr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof mr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ye.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}mr.create=t=>new mr(t);const Oc=(t,e)=>{let n;switch(t.code){case X.invalid_type:t.received===ce.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case X.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ye.jsonStringifyReplacer)}`;break;case X.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ye.joinValues(t.keys,", ")}`;break;case X.invalid_union:n="Invalid input";break;case X.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ye.joinValues(t.options)}`;break;case X.invalid_enum_value:n=`Invalid enum value. Expected ${Ye.joinValues(t.options)}, received '${t.received}'`;break;case X.invalid_arguments:n="Invalid function arguments";break;case X.invalid_return_type:n="Invalid function return type";break;case X.invalid_date:n="Invalid date";break;case X.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ye.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case X.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case X.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case X.custom:n="Invalid input";break;case X.invalid_intersection_types:n="Intersection results could not be merged";break;case X.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case X.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ye.assertNever(t)}return{message:n}};let PV=Oc;function FJ(t){PV=t}function Gm(){return PV}const Qm=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},jJ=[];function ae(t,e){const n=Gm(),r=Qm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Oc?void 0:Oc].filter(s=>!!s)});t.common.issues.push(r)}class Nn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Se;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Nn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Se;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Se=Object.freeze({status:"aborted"}),Fl=t=>({status:"dirty",value:t}),Bn=t=>({status:"valid",value:t}),Jw=t=>t.status==="aborted",e0=t=>t.status==="dirty",Ha=t=>t.status==="valid",nh=t=>typeof Promise<"u"&&t instanceof Promise;function Ym(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function NV(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var fe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(fe||(fe={}));var Uu,$u;class $s{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const OR=(t,e)=>{if(Ha(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new mr(t.common.issues);return this._error=n,this._error}}};function Oe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,c;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??a.defaultError}:typeof a.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=d??n)!==null&&c!==void 0?c:a.defaultError}},description:s}}class Ve{get description(){return this._def.description}_getType(e){return si(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:si(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Nn,ctx:{common:e.parent.common,data:e.data,parsedType:si(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(nh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:si(e)},i=this._parseSync({data:e,path:s.path,parent:s});return OR(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:si(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return Ha(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>Ha(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:si(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(nh(s)?s:Promise.resolve(s));return OR(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:X.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new hs({schema:this,typeName:Te.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Vs.create(this,this._def)}nullable(){return Ho.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return os.create(this)}promise(){return Mc.create(this,this._def)}or(e){return oh.create([this,e],this._def)}and(e){return ah.create(this,e,this._def)}transform(e){return new hs({...Oe(this._def),schema:this,typeName:Te.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new hh({...Oe(this._def),innerType:this,defaultValue:n,typeName:Te.ZodDefault})}brand(){return new hx({typeName:Te.ZodBranded,type:this,...Oe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new fh({...Oe(this._def),innerType:this,catchValue:n,typeName:Te.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Gh.create(this,e)}readonly(){return ph.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const UJ=/^c[^\s-]{8,}$/i,$J=/^[0-9a-z]+$/,BJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,zJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,WJ=/^[a-z0-9_-]{21}$/i,HJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,qJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,KJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,GJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Zy;const QJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,YJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ZJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,XJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eee=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,OV="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tee=new RegExp(`^${OV}$`);function DV(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function nee(t){return new RegExp(`^${DV(t)}$`)}function MV(t){let e=`${OV}T${DV(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function ree(t,e){return!!((e==="v4"||!e)&&QJ.test(t)||(e==="v6"||!e)&&ZJ.test(t))}function see(t,e){if(!HJ.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function iee(t,e){return!!((e==="v4"||!e)&&YJ.test(t)||(e==="v6"||!e)&&XJ.test(t))}class ns extends Ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ce.string){const i=this._getOrReturnCtx(e);return ae(i,{code:X.invalid_type,expected:ce.string,received:i.parsedType}),Se}const r=new Nn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:X.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:X.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ae(s,{code:X.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ae(s,{code:X.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")KJ.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"email",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Zy||(Zy=new RegExp(GJ,"u")),Zy.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"emoji",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")zJ.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"uuid",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")WJ.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"nanoid",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")UJ.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"cuid",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")$J.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"cuid2",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")BJ.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"ulid",code:X.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ae(s,{validation:"url",code:X.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"regex",code:X.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ae(s,{code:X.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ae(s,{code:X.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ae(s,{code:X.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?MV(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:X.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?tee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:X.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?nee(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:X.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?qJ.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"duration",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?ree(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"ip",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?see(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"jwt",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?iee(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"cidr",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?JJ.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"base64",code:X.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?eee.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"base64url",code:X.invalid_string,message:i.message}),r.dirty()):Ye.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:X.invalid_string,...fe.errToObj(r)})}_addCheck(e){return new ns({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...fe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...fe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...fe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...fe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...fe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...fe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...fe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...fe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...fe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...fe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...fe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...fe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...fe.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...fe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...fe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...fe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...fe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...fe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...fe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...fe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...fe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...fe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...fe.errToObj(n)})}nonempty(e){return this.min(1,fe.errToObj(e))}trim(){return new ns({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ns({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ns({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ns.create=t=>{var e;return new ns({checks:[],typeName:Te.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Oe(t)})};function oee(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Bo extends Ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ce.number){const i=this._getOrReturnCtx(e);return ae(i,{code:X.invalid_type,expected:ce.number,received:i.parsedType}),Se}let r;const s=new Nn;for(const i of this._def.checks)i.kind==="int"?Ye.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{code:X.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:X.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:X.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?oee(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ae(r,{code:X.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{code:X.not_finite,message:i.message}),s.dirty()):Ye.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,fe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,fe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,fe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,fe.toString(n))}setLimit(e,n,r,s){return new Bo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:fe.toString(s)}]})}_addCheck(e){return new Bo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:fe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:fe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ye.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Bo.create=t=>new Bo({checks:[],typeName:Te.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Oe(t)});class zo extends Ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ce.bigint)return this._getInvalidInput(e);let r;const s=new Nn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:X.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:X.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:X.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ye.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ae(n,{code:X.invalid_type,expected:ce.bigint,received:n.parsedType}),Se}gte(e,n){return this.setLimit("min",e,!0,fe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,fe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,fe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,fe.toString(n))}setLimit(e,n,r,s){return new zo({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:fe.toString(s)}]})}_addCheck(e){return new zo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zo.create=t=>{var e;return new zo({checks:[],typeName:Te.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Oe(t)})};class rh extends Ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ce.boolean){const r=this._getOrReturnCtx(e);return ae(r,{code:X.invalid_type,expected:ce.boolean,received:r.parsedType}),Se}return Bn(e.data)}}rh.create=t=>new rh({typeName:Te.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Oe(t)});class qa extends Ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ce.date){const i=this._getOrReturnCtx(e);return ae(i,{code:X.invalid_type,expected:ce.date,received:i.parsedType}),Se}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ae(i,{code:X.invalid_date}),Se}const r=new Nn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:X.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:X.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ye.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qa({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:fe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:fe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}qa.create=t=>new qa({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Te.ZodDate,...Oe(t)});class Zm extends Ve{_parse(e){if(this._getType(e)!==ce.symbol){const r=this._getOrReturnCtx(e);return ae(r,{code:X.invalid_type,expected:ce.symbol,received:r.parsedType}),Se}return Bn(e.data)}}Zm.create=t=>new Zm({typeName:Te.ZodSymbol,...Oe(t)});class sh extends Ve{_parse(e){if(this._getType(e)!==ce.undefined){const r=this._getOrReturnCtx(e);return ae(r,{code:X.invalid_type,expected:ce.undefined,received:r.parsedType}),Se}return Bn(e.data)}}sh.create=t=>new sh({typeName:Te.ZodUndefined,...Oe(t)});class ih extends Ve{_parse(e){if(this._getType(e)!==ce.null){const r=this._getOrReturnCtx(e);return ae(r,{code:X.invalid_type,expected:ce.null,received:r.parsedType}),Se}return Bn(e.data)}}ih.create=t=>new ih({typeName:Te.ZodNull,...Oe(t)});class Dc extends Ve{constructor(){super(...arguments),this._any=!0}_parse(e){return Bn(e.data)}}Dc.create=t=>new Dc({typeName:Te.ZodAny,...Oe(t)});class ba extends Ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Bn(e.data)}}ba.create=t=>new ba({typeName:Te.ZodUnknown,...Oe(t)});class Ri extends Ve{_parse(e){const n=this._getOrReturnCtx(e);return ae(n,{code:X.invalid_type,expected:ce.never,received:n.parsedType}),Se}}Ri.create=t=>new Ri({typeName:Te.ZodNever,...Oe(t)});class Xm extends Ve{_parse(e){if(this._getType(e)!==ce.undefined){const r=this._getOrReturnCtx(e);return ae(r,{code:X.invalid_type,expected:ce.void,received:r.parsedType}),Se}return Bn(e.data)}}Xm.create=t=>new Xm({typeName:Te.ZodVoid,...Oe(t)});class os extends Ve{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ce.array)return ae(n,{code:X.invalid_type,expected:ce.array,received:n.parsedType}),Se;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ae(n,{code:o?X.too_big:X.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ae(n,{code:X.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ae(n,{code:X.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new $s(n,o,n.path,a)))).then(o=>Nn.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new $s(n,o,n.path,a)));return Nn.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new os({...this._def,minLength:{value:e,message:fe.toString(n)}})}max(e,n){return new os({...this._def,maxLength:{value:e,message:fe.toString(n)}})}length(e,n){return new os({...this._def,exactLength:{value:e,message:fe.toString(n)}})}nonempty(e){return this.min(1,e)}}os.create=(t,e)=>new os({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Te.ZodArray,...Oe(e)});function Tl(t){if(t instanceof Tt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Vs.create(Tl(r))}return new Tt({...t._def,shape:()=>e})}else return t instanceof os?new os({...t._def,type:Tl(t.element)}):t instanceof Vs?Vs.create(Tl(t.unwrap())):t instanceof Ho?Ho.create(Tl(t.unwrap())):t instanceof Bs?Bs.create(t.items.map(e=>Tl(e))):t}class Tt extends Ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ye.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ce.object){const c=this._getOrReturnCtx(e);return ae(c,{code:X.invalid_type,expected:ce.object,received:c.parsedType}),Se}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ri&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const d=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new $s(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Ri){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(c==="strict")a.length>0&&(ae(s,{code:X.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of a){const h=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new $s(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const h=await d.key,f=await d.value;c.push({key:h,value:f,alwaysSet:d.alwaysSet})}return c}).then(c=>Nn.mergeObjectSync(r,c)):Nn.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return fe.errToObj,new Tt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=fe.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Tt({...this._def,unknownKeys:"strip"})}passthrough(){return new Tt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Tt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Tt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Te.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Tt({...this._def,catchall:e})}pick(e){const n={};return Ye.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Tt({...this._def,shape:()=>n})}omit(e){const n={};return Ye.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Tt({...this._def,shape:()=>n})}deepPartial(){return Tl(this)}partial(e){const n={};return Ye.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Tt({...this._def,shape:()=>n})}required(e){const n={};return Ye.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Vs;)i=i._def.innerType;n[r]=i}}),new Tt({...this._def,shape:()=>n})}keyof(){return LV(Ye.objectKeys(this.shape))}}Tt.create=(t,e)=>new Tt({shape:()=>t,unknownKeys:"strip",catchall:Ri.create(),typeName:Te.ZodObject,...Oe(e)});Tt.strictCreate=(t,e)=>new Tt({shape:()=>t,unknownKeys:"strict",catchall:Ri.create(),typeName:Te.ZodObject,...Oe(e)});Tt.lazycreate=(t,e)=>new Tt({shape:t,unknownKeys:"strip",catchall:Ri.create(),typeName:Te.ZodObject,...Oe(e)});class oh extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new mr(a.ctx.common.issues));return ae(n,{code:X.invalid_union,unionErrors:o}),Se}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new mr(l));return ae(n,{code:X.invalid_union,unionErrors:a}),Se}}get options(){return this._def.options}}oh.create=(t,e)=>new oh({options:t,typeName:Te.ZodUnion,...Oe(e)});const ti=t=>t instanceof ch?ti(t.schema):t instanceof hs?ti(t.innerType()):t instanceof uh?[t.value]:t instanceof Wo?t.options:t instanceof dh?Ye.objectValues(t.enum):t instanceof hh?ti(t._def.innerType):t instanceof sh?[void 0]:t instanceof ih?[null]:t instanceof Vs?[void 0,...ti(t.unwrap())]:t instanceof Ho?[null,...ti(t.unwrap())]:t instanceof hx||t instanceof ph?ti(t.unwrap()):t instanceof fh?ti(t._def.innerType):[];class Tv extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.object)return ae(n,{code:X.invalid_type,expected:ce.object,received:n.parsedType}),Se;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ae(n,{code:X.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=ti(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Tv({typeName:Te.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Oe(r)})}}function t0(t,e){const n=si(t),r=si(e);if(t===e)return{valid:!0,data:t};if(n===ce.object&&r===ce.object){const s=Ye.objectKeys(e),i=Ye.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=t0(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ce.array&&r===ce.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=t0(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===ce.date&&r===ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ah extends Ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Jw(i)||Jw(o))return Se;const a=t0(i.value,o.value);return a.valid?((e0(i)||e0(o))&&n.dirty(),{status:n.value,value:a.data}):(ae(r,{code:X.invalid_intersection_types}),Se)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ah.create=(t,e,n)=>new ah({left:t,right:e,typeName:Te.ZodIntersection,...Oe(n)});class Bs extends Ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.array)return ae(r,{code:X.invalid_type,expected:ce.array,received:r.parsedType}),Se;if(r.data.length<this._def.items.length)return ae(r,{code:X.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&r.data.length>this._def.items.length&&(ae(r,{code:X.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new $s(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Nn.mergeArray(n,o)):Nn.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Bs({...this._def,rest:e})}}Bs.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Bs({items:t,typeName:Te.ZodTuple,rest:null,...Oe(e)})};class lh extends Ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.object)return ae(r,{code:X.invalid_type,expected:ce.object,received:r.parsedType}),Se;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new $s(r,a,r.path,a)),value:o._parse(new $s(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Nn.mergeObjectAsync(n,s):Nn.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ve?new lh({keyType:e,valueType:n,typeName:Te.ZodRecord,...Oe(r)}):new lh({keyType:ns.create(),valueType:e,typeName:Te.ZodRecord,...Oe(n)})}}class Jm extends Ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.map)return ae(r,{code:X.invalid_type,expected:ce.map,received:r.parsedType}),Se;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new $s(r,a,r.path,[c,"key"])),value:i._parse(new $s(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return Se;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return Se;(c.status==="dirty"||d.status==="dirty")&&n.dirty(),a.set(c.value,d.value)}return{status:n.value,value:a}}}}Jm.create=(t,e,n)=>new Jm({valueType:e,keyType:t,typeName:Te.ZodMap,...Oe(n)});class Ka extends Ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.set)return ae(r,{code:X.invalid_type,expected:ce.set,received:r.parsedType}),Se;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ae(r,{code:X.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ae(r,{code:X.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const d of l){if(d.status==="aborted")return Se;d.status==="dirty"&&n.dirty(),c.add(d.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new $s(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Ka({...this._def,minSize:{value:e,message:fe.toString(n)}})}max(e,n){return new Ka({...this._def,maxSize:{value:e,message:fe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ka.create=(t,e)=>new Ka({valueType:t,minSize:null,maxSize:null,typeName:Te.ZodSet,...Oe(e)});class ec extends Ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.function)return ae(n,{code:X.invalid_type,expected:ce.function,received:n.parsedType}),Se;function r(a,l){return Qm({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Gm(),Oc].filter(c=>!!c),issueData:{code:X.invalid_arguments,argumentsError:l}})}function s(a,l){return Qm({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Gm(),Oc].filter(c=>!!c),issueData:{code:X.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Mc){const a=this;return Bn(async function(...l){const c=new mr([]),d=await a._def.args.parseAsync(l,i).catch(m=>{throw c.addIssue(r(l,m)),c}),h=await Reflect.apply(o,this,d);return await a._def.returns._def.type.parseAsync(h,i).catch(m=>{throw c.addIssue(s(h,m)),c})})}else{const a=this;return Bn(function(...l){const c=a._def.args.safeParse(l,i);if(!c.success)throw new mr([r(l,c.error)]);const d=Reflect.apply(o,this,c.data),h=a._def.returns.safeParse(d,i);if(!h.success)throw new mr([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ec({...this._def,args:Bs.create(e).rest(ba.create())})}returns(e){return new ec({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ec({args:e||Bs.create([]).rest(ba.create()),returns:n||ba.create(),typeName:Te.ZodFunction,...Oe(r)})}}class ch extends Ve{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ch.create=(t,e)=>new ch({getter:t,typeName:Te.ZodLazy,...Oe(e)});class uh extends Ve{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ae(n,{received:n.data,code:X.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}}uh.create=(t,e)=>new uh({value:t,typeName:Te.ZodLiteral,...Oe(e)});function LV(t,e){return new Wo({values:t,typeName:Te.ZodEnum,...Oe(e)})}class Wo extends Ve{constructor(){super(...arguments),Uu.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ae(n,{expected:Ye.joinValues(r),received:n.parsedType,code:X.invalid_type}),Se}if(Ym(this,Uu)||NV(this,Uu,new Set(this._def.values)),!Ym(this,Uu).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ae(n,{received:n.data,code:X.invalid_enum_value,options:r}),Se}return Bn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Wo.create(e,{...this._def,...n})}exclude(e,n=this._def){return Wo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Uu=new WeakMap;Wo.create=LV;class dh extends Ve{constructor(){super(...arguments),$u.set(this,void 0)}_parse(e){const n=Ye.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ce.string&&r.parsedType!==ce.number){const s=Ye.objectValues(n);return ae(r,{expected:Ye.joinValues(s),received:r.parsedType,code:X.invalid_type}),Se}if(Ym(this,$u)||NV(this,$u,new Set(Ye.getValidEnumValues(this._def.values))),!Ym(this,$u).has(e.data)){const s=Ye.objectValues(n);return ae(r,{received:r.data,code:X.invalid_enum_value,options:s}),Se}return Bn(e.data)}get enum(){return this._def.values}}$u=new WeakMap;dh.create=(t,e)=>new dh({values:t,typeName:Te.ZodNativeEnum,...Oe(e)});class Mc extends Ve{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.promise&&n.common.async===!1)return ae(n,{code:X.invalid_type,expected:ce.promise,received:n.parsedType}),Se;const r=n.parsedType===ce.promise?n.data:Promise.resolve(n.data);return Bn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Mc.create=(t,e)=>new Mc({type:t,typeName:Te.ZodPromise,...Oe(e)});class hs extends Ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Te.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ae(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Se;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Se:l.status==="dirty"||n.value==="dirty"?Fl(l.value):l});{if(n.value==="aborted")return Se;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Se:a.status==="dirty"||n.value==="dirty"?Fl(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Se:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Se:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ha(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ha(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Ye.assertNever(s)}}hs.create=(t,e,n)=>new hs({schema:t,typeName:Te.ZodEffects,effect:e,...Oe(n)});hs.createWithPreprocess=(t,e,n)=>new hs({schema:e,effect:{type:"preprocess",transform:t},typeName:Te.ZodEffects,...Oe(n)});class Vs extends Ve{_parse(e){return this._getType(e)===ce.undefined?Bn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vs.create=(t,e)=>new Vs({innerType:t,typeName:Te.ZodOptional,...Oe(e)});class Ho extends Ve{_parse(e){return this._getType(e)===ce.null?Bn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ho.create=(t,e)=>new Ho({innerType:t,typeName:Te.ZodNullable,...Oe(e)});class hh extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ce.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}hh.create=(t,e)=>new hh({innerType:t,typeName:Te.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Oe(e)});class fh extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return nh(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new mr(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new mr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}fh.create=(t,e)=>new fh({innerType:t,typeName:Te.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Oe(e)});class eg extends Ve{_parse(e){if(this._getType(e)!==ce.nan){const r=this._getOrReturnCtx(e);return ae(r,{code:X.invalid_type,expected:ce.nan,received:r.parsedType}),Se}return{status:"valid",value:e.data}}}eg.create=t=>new eg({typeName:Te.ZodNaN,...Oe(t)});const aee=Symbol("zod_brand");class hx extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Gh extends Ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Se:i.status==="dirty"?(n.dirty(),Fl(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Se:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Gh({in:e,out:n,typeName:Te.ZodPipeline})}}class ph extends Ve{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Ha(s)&&(s.value=Object.freeze(s.value)),s);return nh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}ph.create=(t,e)=>new ph({innerType:t,typeName:Te.ZodReadonly,...Oe(e)});function DR(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function VV(t,e={},n){return t?Dc.create().superRefine((r,s)=>{var i,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,d;if(!l){const h=DR(e,r),f=(d=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&d!==void 0?d:!0;s.addIssue({code:"custom",...h,fatal:f})}});if(!a){const l=DR(e,r),c=(o=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;s.addIssue({code:"custom",...l,fatal:c})}}):Dc.create()}const lee={object:Tt.lazycreate};var Te;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Te||(Te={}));const cee=(t,e={message:`Input not instance of ${t.name}`})=>VV(n=>n instanceof t,e),kr=ns.create,FV=Bo.create,uee=eg.create,dee=zo.create,mh=rh.create,hee=qa.create,fee=Zm.create,pee=sh.create,mee=ih.create,gee=Dc.create,vee=ba.create,yee=Ri.create,_ee=Xm.create,wee=os.create,xv=Tt.create,Eee=Tt.strictCreate,Tee=oh.create,xee=Tv.create,See=ah.create,bee=Bs.create,Cee=lh.create,Iee=Jm.create,Ree=Ka.create,Aee=ec.create,kee=ch.create,Pee=uh.create,fx=Wo.create,Nee=dh.create,Oee=Mc.create,MR=hs.create,Dee=Vs.create,Mee=Ho.create,Lee=hs.createWithPreprocess,Vee=Gh.create,Fee=()=>kr().optional(),jee=()=>FV().optional(),Uee=()=>mh().optional(),$ee={string:t=>ns.create({...t,coerce:!0}),number:t=>Bo.create({...t,coerce:!0}),boolean:t=>rh.create({...t,coerce:!0}),bigint:t=>zo.create({...t,coerce:!0}),date:t=>qa.create({...t,coerce:!0})},Bee=Se;var qf=Object.freeze({__proto__:null,defaultErrorMap:Oc,setErrorMap:FJ,getErrorMap:Gm,makeIssue:Qm,EMPTY_PATH:jJ,addIssueToContext:ae,ParseStatus:Nn,INVALID:Se,DIRTY:Fl,OK:Bn,isAborted:Jw,isDirty:e0,isValid:Ha,isAsync:nh,get util(){return Ye},get objectUtil(){return Xw},ZodParsedType:ce,getParsedType:si,ZodType:Ve,datetimeRegex:MV,ZodString:ns,ZodNumber:Bo,ZodBigInt:zo,ZodBoolean:rh,ZodDate:qa,ZodSymbol:Zm,ZodUndefined:sh,ZodNull:ih,ZodAny:Dc,ZodUnknown:ba,ZodNever:Ri,ZodVoid:Xm,ZodArray:os,ZodObject:Tt,ZodUnion:oh,ZodDiscriminatedUnion:Tv,ZodIntersection:ah,ZodTuple:Bs,ZodRecord:lh,ZodMap:Jm,ZodSet:Ka,ZodFunction:ec,ZodLazy:ch,ZodLiteral:uh,ZodEnum:Wo,ZodNativeEnum:dh,ZodPromise:Mc,ZodEffects:hs,ZodTransformer:hs,ZodOptional:Vs,ZodNullable:Ho,ZodDefault:hh,ZodCatch:fh,ZodNaN:eg,BRAND:aee,ZodBranded:hx,ZodPipeline:Gh,ZodReadonly:ph,custom:VV,Schema:Ve,ZodSchema:Ve,late:lee,get ZodFirstPartyTypeKind(){return Te},coerce:$ee,any:gee,array:wee,bigint:dee,boolean:mh,date:hee,discriminatedUnion:xee,effect:MR,enum:fx,function:Aee,instanceof:cee,intersection:See,lazy:kee,literal:Pee,map:Iee,nan:uee,nativeEnum:Nee,never:yee,null:mee,nullable:Mee,number:FV,object:xv,oboolean:Uee,onumber:jee,optional:Dee,ostring:Fee,pipeline:Vee,preprocess:Lee,promise:Oee,record:Cee,set:Ree,strictObject:Eee,string:kr,symbol:fee,transformer:MR,tuple:bee,undefined:pee,union:Tee,unknown:vee,void:_ee,NEVER:Bee,ZodIssueCode:X,quotelessJson:VJ,ZodError:mr}),px="Checkbox",[zee,_te]=zs(px),[Wee,Hee]=zee(px),jV=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:d,...h}=t,[f,m]=y.useState(null),T=Je(e,O=>m(O)),v=y.useRef(!1),x=f?d||!!f.closest("form"):!0,[E=!1,_]=Pa({prop:s,defaultProp:i,onChange:c}),S=y.useRef(E);return y.useEffect(()=>{const O=f==null?void 0:f.form;if(O){const D=()=>_(S.current);return O.addEventListener("reset",D),()=>O.removeEventListener("reset",D)}},[f,_]),p.jsxs(Wee,{scope:n,state:E,disabled:a,children:[p.jsx(Ce.button,{type:"button",role:"checkbox","aria-checked":xo(E)?"mixed":E,"aria-required":o,"data-state":BV(E),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:T,onKeyDown:me(t.onKeyDown,O=>{O.key==="Enter"&&O.preventDefault()}),onClick:me(t.onClick,O=>{_(D=>xo(D)?!0:!D),x&&(v.current=O.isPropagationStopped(),v.current||O.stopPropagation())})}),x&&p.jsx(qee,{control:f,bubbles:!v.current,name:r,value:l,checked:E,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"},defaultChecked:xo(i)?!1:i})]})});jV.displayName=px;var UV="CheckboxIndicator",$V=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=Hee(UV,n);return p.jsx(Vr,{present:r||xo(i.state)||i.state===!0,children:p.jsx(Ce.span,{"data-state":BV(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});$V.displayName=UV;var qee=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,o=y.useRef(null),a=q2(n),l=a1(e);y.useEffect(()=>{const d=o.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(a!==n&&m){const T=new Event("click",{bubbles:r});d.indeterminate=xo(n),m.call(d,xo(n)?!1:n),d.dispatchEvent(T)}},[a,n,r]);const c=y.useRef(xo(n)?!1:n);return p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??c.current,...i,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function xo(t){return t==="indeterminate"}function BV(t){return xo(t)?"indeterminate":t?"checked":"unchecked"}var zV=jV,Kee=$V;const mx=y.forwardRef(({className:t,...e},n)=>p.jsx(zV,{ref:n,className:De("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:p.jsx(Kee,{className:De("flex items-center justify-center text-current"),children:p.jsx(DP,{className:"h-4 w-4"})})}));mx.displayName=zV.displayName;const Gee=xv({nome:kr().min(2,"Nome deve ter pelo menos 2 caracteres"),tipo:fx(["hamburguer","bebida","porcao","sobremesa"]),subtipo:kr().min(1,"Subtipo  obrigatrio"),descricao:kr().min(5,"Descrio deve ter pelo menos 5 caracteres"),valor:kr().refine(t=>!isNaN(Number(t)),"Valor deve ser um nmero"),block:mh().default(!1),incrementavel:mh().default(!1)});function Qee({onAddProduct:t}){const{toast:e}=jc(),[n,r]=W.useState(!1),s=mv({resolver:Ev(Gee),defaultValues:{nome:"",tipo:"hamburguer",subtipo:"",descricao:"",valor:"",incrementavel:!1}}),i={hamburguer:["Tradicional","Vegetariano","Da casa"],bebida:["Suco da Fruta","Suco Da Polpa","Refrigerante","MilkShake","Alclico","gua"],porcao:[],sobremesa:[]},o=s.watch("tipo");W.useEffect(()=>{const d=s.watch((h,{name:f})=>{f==="tipo"&&s.setValue("incrementavel",h.tipo==="hamburguer")});return()=>d.unsubscribe()},[s]);function a(d){c(d)}const l=en.currentUser,c=async d=>{if(!l){console.error("Usurio no autenticado");return}const h=l.uid,f=ur(jn),m=HD(Ar(f,`users/${h}/produtos`)),T={...d,block:!1};mT(m,T).then(()=>{e({title:"Sucesso!",description:"Produto salvo com sucesso"}),s.reset(),r(!1),t(T)}).catch(v=>{e({variant:"destructive",title:"Erro!",description:"Erro ao salvar produto. Tente novamente."}),console.error("Erro ao salvar produto",v)})};return p.jsxs(Da,{open:n,onOpenChange:r,children:[p.jsx(IE,{asChild:!0,children:p.jsxs(Pt,{variant:"outline",children:[p.jsx(wg,{className:"w-4 h-4 mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Adicionar Produto"})]})}),p.jsxs(ko,{className:"sm:max-w-[425px]",children:[p.jsx(Po,{children:p.jsx(No,{children:"Adicionar Novo Produto"})}),p.jsx(gv,{...s,children:p.jsxs("form",{onSubmit:s.handleSubmit(a),className:"space-y-4",children:[p.jsx(An,{control:s.control,name:"tipo",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Tipo"}),p.jsxs(qm,{onValueChange:d.onChange,defaultValue:d.value,children:[p.jsx(dn,{children:p.jsx(eh,{children:p.jsx(Km,{placeholder:"Selecione o tipo"})})}),p.jsxs(th,{children:[p.jsx(Jr,{value:"hamburguer",children:"Hamburguer"}),p.jsx(Jr,{value:"bebida",children:"Bebida"}),p.jsx(Jr,{value:"porcao",children:"Poro"}),p.jsx(Jr,{value:"sobremesa",children:"Sobremesa"})]})]}),p.jsx(hn,{})]})}),p.jsx(An,{control:s.control,name:"subtipo",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Subtipo"}),p.jsxs(qm,{onValueChange:d.onChange,defaultValue:d.value,disabled:i[o].length===0,children:[p.jsx(dn,{children:p.jsx(eh,{children:p.jsx(Km,{placeholder:i[o].length===0?"No h subtipos disponveis":"Selecione o subtipo"})})}),p.jsx(th,{children:i[o].map(h=>p.jsx(Jr,{value:h,children:h},h))})]}),p.jsx(hn,{})]})}),p.jsx(An,{control:s.control,name:"incrementavel",render:({field:d})=>p.jsxs(cn,{className:"flex flex-row items-center space-x-3 space-y-0",children:[p.jsx(dn,{children:p.jsx(mx,{checked:d.value,onCheckedChange:d.onChange,disabled:o!=="hamburguer"})}),p.jsx(un,{children:"Incrementvel"}),p.jsx(hn,{})]})}),p.jsx(An,{control:s.control,name:"nome",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Nome"}),p.jsx(dn,{children:p.jsx(dr,{placeholder:"Nome do produto",...d})}),p.jsx(hn,{})]})}),p.jsx(An,{control:s.control,name:"descricao",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Descrio"}),p.jsx(dn,{children:p.jsx(dx,{placeholder:"Descrio do produto",...d})}),p.jsx(hn,{})]})}),p.jsx(An,{control:s.control,name:"valor",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Valor"}),p.jsx(dn,{children:p.jsx(dr,{type:"number",step:"0.01",placeholder:"0.00",...d})}),p.jsx(hn,{})]})}),p.jsx(Pt,{type:"submit",className:"w-full",children:"Salvar"})]})})]})]})}const Yee=xv({nome:kr().min(2,"Nome deve ter pelo menos 2 caracteres"),tipo:fx(["hamburguer","bebida","porcao","sobremesa"]),subtipo:kr().min(1,"Subtipo  obrigatrio"),descricao:kr().min(5,"Descrio deve ter pelo menos 5 caracteres"),valor:kr().refine(t=>!isNaN(Number(t)),"Valor deve ser um nmero"),incrementavel:mh().default(!1)});function Zee({product:t,isOpen:e,onOpenChange:n,onProductUpdate:r}){const{toast:s}=jc(),i=mv({resolver:Ev(Yee),defaultValues:{nome:t.nome,tipo:t.tipo,subtipo:t.subtipo,descricao:t.descricao,valor:t.valor.toString(),incrementavel:t.incrementavel||!1}}),o={hamburguer:["Tradicional","Vegetariano","Da casa"],bebida:["Suco da Fruta","Suco Da Polpa","Refrigerante","MilkShake","Alclico","gua"],porcao:[],sobremesa:[]},a=i.watch("tipo");W.useEffect(()=>{const d=i.watch((h,{name:f})=>{f==="tipo"&&i.setValue("incrementavel",h.tipo==="hamburguer")});return()=>d.unsubscribe()},[i]);async function l(d){const h=en.currentUser;if(!h){console.error("Usurio no autenticado");return}const f=ur(jn),m=Ar(f,`users/${h.uid}/produtos/${t.id}`);try{await _m(m,{...d,block:t.block}),s({title:"Sucesso!",description:"Produto atualizado com sucesso"}),n(!1),r()}catch(T){s({variant:"destructive",title:"Erro!",description:"Erro ao atualizar produto. Tente novamente."}),console.error("Erro ao atualizar produto",T)}}async function c(){const d=en.currentUser;if(!d){console.error("Usurio no autenticado");return}const h=ur(jn),f=Ar(h,`users/${d.uid}/produtos/${t.id}`);try{await qD(f),s({title:"Sucesso!",description:"Produto excludo com sucesso"}),n(!1),r()}catch(m){s({variant:"destructive",title:"Erro!",description:"Erro ao excluir produto. Tente novamente."}),console.error("Erro ao excluir produto",m)}}return p.jsx(Da,{open:e,onOpenChange:n,children:p.jsxs(ko,{className:"sm:max-w-[425px]",children:[p.jsx(Po,{children:p.jsx(No,{children:"Editar Produto"})}),p.jsx(gv,{...i,children:p.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[p.jsx(An,{control:i.control,name:"tipo",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Tipo"}),p.jsxs(qm,{onValueChange:d.onChange,defaultValue:d.value,children:[p.jsx(dn,{children:p.jsx(eh,{children:p.jsx(Km,{placeholder:"Selecione o tipo"})})}),p.jsxs(th,{children:[p.jsx(Jr,{value:"hamburguer",children:"Hamburguer"}),p.jsx(Jr,{value:"bebida",children:"Bebida"}),p.jsx(Jr,{value:"porcao",children:"Poro"}),p.jsx(Jr,{value:"sobremesa",children:"Sobremesa"})]})]}),p.jsx(hn,{})]})}),p.jsx(An,{control:i.control,name:"subtipo",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Subtipo"}),p.jsxs(qm,{onValueChange:d.onChange,defaultValue:d.value,disabled:o[a].length===0,children:[p.jsx(dn,{children:p.jsx(eh,{children:p.jsx(Km,{placeholder:o[a].length===0?"No h subtipos disponveis":"Selecione o subtipo"})})}),p.jsx(th,{children:o[a].map(h=>p.jsx(Jr,{value:h,children:h},h))})]}),p.jsx(hn,{})]})}),p.jsx(An,{control:i.control,name:"incrementavel",render:({field:d})=>p.jsxs(cn,{className:"flex flex-row items-center space-x-3 space-y-0",children:[p.jsx(dn,{children:p.jsx(mx,{checked:d.value,onCheckedChange:d.onChange,disabled:a!=="hamburguer"})}),p.jsx(un,{children:"Incrementvel"}),p.jsx(hn,{})]})}),p.jsx(An,{control:i.control,name:"nome",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Nome"}),p.jsx(dn,{children:p.jsx(dr,{placeholder:"Nome do produto",...d})}),p.jsx(hn,{})]})}),p.jsx(An,{control:i.control,name:"descricao",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Descrio"}),p.jsx(dn,{children:p.jsx(dx,{placeholder:"Descrio do produto",...d})}),p.jsx(hn,{})]})}),p.jsx(An,{control:i.control,name:"valor",render:({field:d})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Valor"}),p.jsx(dn,{children:p.jsx(dr,{type:"number",step:"0.01",placeholder:"0.00",...d})}),p.jsx(hn,{})]})}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Pt,{type:"button",variant:"destructive",className:"w-full",onClick:c,children:[p.jsx(VP,{className:"mr-2 h-4 w-4"}),"Excluir"]}),p.jsx(Pt,{type:"submit",className:"w-full",children:"Salvar"})]})]})})]})})}const Xee=qf.object({nome:qf.string().min(2,"Nome deve ter pelo menos 2 caracteres"),valor:qf.string().refine(t=>!isNaN(Number(t)),"Valor deve ser um nmero"),block:qf.boolean().default(!1)});function Jee({onAddAcrescimo:t}){const{toast:e}=jc(),[n,r]=W.useState(!1),s=mv({resolver:Ev(Xee),defaultValues:{nome:"",valor:""}});function i(l){a(l)}const o=en.currentUser,a=async l=>{if(!o){console.error("Usurio no autenticado");return}const c=o.uid,d=ur(jn);console.log(c);const h=HD(Ar(d,`users/${c}/acrescimos`)),f={...l,block:!1};mT(h,f).then(()=>{e({title:"Sucesso!",description:"Acrscimo salvo com sucesso"}),s.reset(),r(!1),t(f)}).catch(m=>{e({variant:"destructive",title:"Erro!",description:"Erro ao salvar acrscimo. Tente novamente."}),console.error("Erro ao salvar acrscimo",m)})};return p.jsxs(Da,{open:n,onOpenChange:r,children:[p.jsx(IE,{asChild:!0,children:p.jsxs(Pt,{variant:"outline",children:[p.jsx(wg,{className:"w-4 h-4 mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Adicionar Acrscimo"})]})}),p.jsxs(ko,{className:"sm:max-w-[425px]",children:[p.jsx(Po,{children:p.jsx(No,{children:"Adicionar Novo Acrscimo"})}),p.jsx(gv,{...s,children:p.jsxs("form",{onSubmit:s.handleSubmit(i),className:"space-y-4",children:[p.jsx(An,{control:s.control,name:"nome",render:({field:l})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Nome"}),p.jsx(dn,{children:p.jsx(dr,{placeholder:"Nome do acrscimo",...l})}),p.jsx(hn,{})]})}),p.jsx(An,{control:s.control,name:"valor",render:({field:l})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Valor"}),p.jsx(dn,{children:p.jsx(dr,{type:"number",step:"0.01",placeholder:"0.00",...l})}),p.jsx(hn,{})]})}),p.jsx(Pt,{type:"submit",className:"w-full",children:"Salvar"})]})})]})]})}const ete=xv({nome:kr().min(2,"Nome deve ter pelo menos 2 caracteres"),valor:kr().refine(t=>!isNaN(Number(t)),"Valor deve ser um nmero")});function tte({acrescimo:t,isOpen:e,onOpenChange:n,onAcrescimoUpdate:r}){const{toast:s}=jc(),i=mv({resolver:Ev(ete),defaultValues:{nome:t.nome,valor:t.valor.toString()}});async function o(l){const c=en.currentUser;if(!c){console.error("Usurio no autenticado");return}const d=ur(jn),h=Ar(d,`users/${c.uid}/acrescimos/${t.id}`);try{await _m(h,{...l,block:t.block}),s({title:"Sucesso!",description:"Acrscimo atualizado com sucesso"}),n(!1),r()}catch(f){s({variant:"destructive",title:"Erro!",description:"Erro ao atualizar acrscimo. Tente novamente."}),console.error("Erro ao atualizar acrscimo",f)}}async function a(){const l=en.currentUser;if(!l){console.error("Usurio no autenticado");return}const c=ur(jn),d=Ar(c,`users/${l.uid}/acrescimos/${t.id}`);try{await qD(d),s({title:"Sucesso!",description:"Acrscimo excludo com sucesso"}),n(!1),r()}catch(h){s({variant:"destructive",title:"Erro!",description:"Erro ao excluir acrscimo. Tente novamente."}),console.error("Erro ao excluir acrscimo",h)}}return p.jsx(Da,{open:e,onOpenChange:n,children:p.jsxs(ko,{className:"sm:max-w-[425px]",children:[p.jsx(Po,{children:p.jsx(No,{children:"Editar Acrscimo"})}),p.jsx(gv,{...i,children:p.jsxs("form",{onSubmit:i.handleSubmit(o),className:"space-y-4",children:[p.jsx(An,{control:i.control,name:"nome",render:({field:l})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Nome"}),p.jsx(dn,{children:p.jsx(dr,{placeholder:"Nome do acrscimo",...l})}),p.jsx(hn,{})]})}),p.jsx(An,{control:i.control,name:"valor",render:({field:l})=>p.jsxs(cn,{children:[p.jsx(un,{children:"Valor"}),p.jsx(dn,{children:p.jsx(dr,{type:"number",step:"0.01",placeholder:"0.00",...l})}),p.jsx(hn,{})]})}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(Pt,{type:"button",variant:"destructive",className:"w-full",onClick:a,children:[p.jsx(VP,{className:"mr-2 h-4 w-4"}),"Excluir"]}),p.jsx(Pt,{type:"submit",className:"w-full",children:"Salvar"})]})]})})]})})}function nte(){const[t,e]=y.useState([]),[n,r]=y.useState([]),[s,i]=y.useState(null),[o,a]=y.useState(!1),[l,c]=y.useState(null),[d,h]=y.useState(!1),[f,m]=y.useState(null),[T,v]=y.useState(!1),x=H1();y.useEffect(()=>{E(),_(),S()},[]),y.useEffect(()=>{const C=A=>{A.target.closest(".profile-menu-container")||v(!1)};return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[]);const E=async()=>{const C=ur(jn),A=en.currentUser;if(!A){console.error("Usurio no autenticado");return}const N=A.uid,k=Ar(C,`users/${N}/produtos`),R=await wm(k);if(R.exists()){const F=R.val(),G=Object.entries(F).map(([K,Q])=>({id:K,...Q}));e(G)}else console.log("Nenhum dado encontrado")},_=async()=>{const C=ur(jn),A=en.currentUser;if(!A){console.error("Usurio no autenticado");return}const N=A.uid,k=Ar(C,`users/${N}/acrescimos`),R=await wm(k);if(R.exists()){const F=R.val(),G=Object.entries(F).map(([K,Q])=>({id:K,...Q}));r(G)}},S=async()=>{const C=en.currentUser;if(C)try{const A=OL(Um,"estabelecimento"),R=(await WL(A)).docs.map(F=>({id:F.id,...F.data()})).find(F=>F.userId===C.uid);R&&m({imageUrl:R.imageUrl})}catch(A){console.error("Error fetching estabelecimento data:",A)}},O=()=>{pZ(en).then(()=>{x("/")})},D=C=>{E()},L=async(C,A,N)=>{N.stopPropagation();const k=ur(jn),R=en.currentUser;if(!R){console.error("Usurio no autenticado");return}try{const F=Ar(k,`users/${R.uid}/produtos/${C}`);await _m(F,{block:!A}),e(t.map(G=>G.id===C?{...G,block:!A}:G))}catch(F){console.error("Erro ao atualizar status:",F)}},I=async(C,A,N)=>{N.stopPropagation();const k=ur(jn),R=en.currentUser;if(!R){console.error("Usurio no autenticado");return}try{const F=Ar(k,`users/${R.uid}/acrescimos/${C}`);await _m(F,{block:!A}),r(n.map(G=>G.id===C?{...G,block:!A}:G))}catch(F){console.error("Erro ao atualizar status:",F)}},b=C=>{_()};return p.jsxs("div",{className:"container mx-auto p-4",children:[p.jsx(QP,{}),p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Painel"}),p.jsxs("div",{className:"relative profile-menu-container",children:[p.jsx("button",{onClick:()=>v(!T),className:"w-12 h-12 rounded-full overflow-hidden border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-neutral-500",children:f!=null&&f.imageUrl?p.jsx("img",{src:f.imageUrl,alt:"Profile",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:p.jsx("span",{className:"text-gray-500",children:"?"})})}),T&&p.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",children:p.jsx("div",{className:"py-1",children:p.jsx("button",{onClick:O,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sair"})})})]})]}),p.jsxs(mN,{defaultValue:"menu",className:"w-full",children:[p.jsxs(vE,{className:"grid w-full grid-cols-2",children:[p.jsx(Xp,{value:"menu",children:"Itens do Menu"}),p.jsx(Xp,{value:"acrescimos",children:"Acrscimos"})]}),p.jsxs(Jp,{value:"menu",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Controle do Menu"}),p.jsx(Qee,{onAddProduct:D})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.length===0?p.jsx("div",{className:"col-span-full text-center text-gray-500",children:"No h produtos"}):t.map(C=>p.jsx("div",{className:"border rounded-lg p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{i(C),a(!0)},children:p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold",children:C.nome}),p.jsxs("p",{className:"text-gray-600",children:["R$ ",C.valor]})]}),p.jsxs(Pt,{className:C.block?"text-green-500 border-green-500 hover:text-green-600 hover:border-green-600":"text-red-500 border-red-500 hover:text-red-600 hover:border-red-600",variant:"outline",size:"sm",onClick:A=>L(C.id,C.block,A),children:[C.block?p.jsx(_b,{}):p.jsx(yb,{}),C.block?"Desbloquear":"Bloquear"]})]})},C.id))})]}),p.jsxs(Jp,{value:"acrescimos",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Controle de Acrscimos"}),p.jsx(Jee,{onAddAcrescimo:b})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.length===0?p.jsx("div",{className:"col-span-full text-center text-gray-500",children:"No h acrscimos"}):n.map(C=>p.jsx("div",{className:"border rounded-lg p-4 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>{c(C),h(!0)},children:p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold",children:C.nome}),p.jsxs("p",{className:"text-gray-600",children:["R$ ",C.valor]})]}),p.jsxs(Pt,{className:C.block?"text-green-500 border-green-500 hover:text-green-600 hover:border-green-600":"text-red-500 border-red-500 hover:text-red-600 hover:border-red-600",variant:"outline",size:"sm",onClick:A=>I(C.id,C.block,A),children:[C.block?p.jsx(_b,{}):p.jsx(yb,{}),C.block?"Desbloquear":"Bloquear"]})]})},C.id))})]})]}),s&&p.jsx(Zee,{product:s,isOpen:o,onOpenChange:a,onProductUpdate:E}),l&&p.jsx(tte,{acrescimo:l,isOpen:d,onOpenChange:h,onAcrescimoUpdate:_})]})}const rte=new B5,ste=()=>{const[t,e]=y.useState(null),[n,r]=y.useState(!0);return y.useEffect(()=>{const s=fZ(en,i=>{i?(e(i),r(!1)):(e(null),r(!1))});return()=>s()},[]),n?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-900",children:p.jsxs("div",{role:"status",children:[p.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-gray-600 dark:fill-gray-300",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),p.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),p.jsx("span",{className:"sr-only",children:"Loading..."})]})}):p.jsx(W5,{client:rte,children:p.jsxs(_5,{children:[p.jsx(QP,{}),p.jsx(G$,{}),p.jsx(VB,{children:p.jsxs(DB,{children:[p.jsx(Nu,{path:"/",element:p.jsx(jX,{user:t})}),p.jsx(Nu,{path:"/painel",element:p.jsx(UX,{user:t,children:p.jsx(nte,{})})}),p.jsx(Nu,{path:"/menu/:businessName",element:p.jsx(DX,{})}),p.jsx(Nu,{path:"*",element:p.jsx(MX,{})})]})})]})})};iP(document.getElementById("root")).render(p.jsx(ste,{}));
